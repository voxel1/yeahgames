"use strict";(self.webpackChunkgame=self.webpackChunkgame||[]).push([[226],{1226:(t,e,n)=>{n.r(e),n.d(e,{default:()=>jh});var r=n(955),o=n(3832),i=n(9842),a=n.n(i),u=n(5657),l=n(7061),s=n(1878);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=b(t);if(e){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},b(t)}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(u,t);var e,n,r,i=h(u);function u(){return f(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){l.Z.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(10066176,.5),t.debugView.drawCircle(0,0,t.getProp("radius")),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"onCreate",value:function(){this.activated=!1}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.circle(t.x,t.y,this.getProp("radius"),{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#999900"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.requestTap,this)}}},{key:"requestTap",value:function(t,e){this.activated||(this.activated=!0,this.level.requestTap(this.getProp("motivation")))}}])&&y(e.prototype,n),r&&y(e,r),u}(u.Z);v(m,"label","Jumper"),v(m,"defaultProps",{data:{type:"json",value:"{}"},radius:{type:"number",value:200},motivation:{type:"string",value:"Tap to jump"}});const g=m;n(7155);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function P(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return S=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},S(t,e)}function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R(t);if(e){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function j(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var C=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&S(t,e)}(u,t);var e,n,r,i=x(u);function u(){return P(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(4360181,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#4287f5"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.UP,e.jumpForceScale=this.getProp("jumpForceScale")}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,e.jumpForceScale=1}},{key:"activate",value:function(){a().World.add(this.level.world,this.body)}},{key:"deactivate",value:function(){a().World.remove(this.level.world,this.body)}}])&&k(e.prototype,n),r&&k(e,r),u}(u.Z);j(C,"label","JumpUp"),j(C,"defaultProps",{data:{type:"json",value:"{}"},jumpForceScale:{type:"number",value:1}});const _=C;function B(t){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B(t)}function E(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Z(t,e){return Z=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Z(t,e)}function T(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=q(t);if(e){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return V(this,n)}}function V(t,e){return!e||"object"!==B(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Z(t,e)}(u,t);var e,n,r,i=T(u);function u(){return E(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(10027161,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#990099"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.LEFT,e.jumpForceScale=this.getProp("jumpForceScale")}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,e.jumpForceScale=1}},{key:"activate",value:function(){a().World.add(this.level.world,this.body)}},{key:"deactivate",value:function(){a().World.remove(this.level.world,this.body)}}])&&A(e.prototype,n),r&&A(e,r),u}(u.Z);D(L,"label","JumpLeft"),D(L,"defaultProps",{data:{type:"json",value:"{}"},jumpForceScale:{type:"number",value:1}});const W=L;function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e){return N=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},N(t,e)}function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=X(t);if(e){var o=X(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(t,e){return!e||"object"!==I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function X(t){return X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},X(t)}function Y(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var J=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&N(t,e)}(u,t);var e,n,r,i=z(u);function u(){return M(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(39321,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#009999"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.RIGHT,e.jumpForceScale=this.getProp("jumpForceScale")}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,e.jumpForceScale=1}},{key:"activate",value:function(){a().World.add(this.level.world,this.body)}},{key:"deactivate",value:function(){a().World.remove(this.level.world,this.body)}}])&&U(e.prototype,n),r&&U(e,r),u}(u.Z);Y(J,"label","JumpRight"),Y(J,"defaultProps",{data:{type:"json",value:"{}"},jumpForceScale:{type:"number",value:1}});const G=J;var H=n(3316);function $(t){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$(t)}function K(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e){return tt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tt(t,e)}function et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rt(t);if(e){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nt(this,n)}}function nt(t,e){return!e||"object"!==$(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rt(t){return rt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rt(t)}function ot(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var it=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tt(t,e)}(i,t);var e,n,r,o=et(i);function i(){return K(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.body.jumpLocked=this.getProp("isJumpLocked")}}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}}])&&Q(e.prototype,n),r&&Q(e,r),i}(u.Z);ot(it,"label","PlatformNormal"),ot(it,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},isJumpLocked:{type:"boolean",value:!1}});const at=it;var ut=n(6194);function lt(t){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lt(t)}function st(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function ct(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ht(t,e){return ht=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ht(t,e)}function dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mt(t);if(e){var o=mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return bt(this,n)}}function bt(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?vt(t):e}function vt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}function gt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ht(t,e)}(f,t);var e,n,r,i,u,c=dt(f);function f(){var t;yt(this,f);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return gt(vt(t=c.call.apply(c,[this].concat(n))),"activated",!1),gt(vt(t),"playerCollision",{x:0,y:0,active:!1}),gt(vt(t),"moving",!1),gt(vt(t),"playerJumpDirection",s.Z.JUMP_DIRECTION.NONE),t}return e=f,n=[{key:"onCreate",value:function(){f.updateView(this),this.view=this.query("view")}},{key:"start",value:function(){this.getProp("autoStart")&&this.activate()}},{key:"setColors",value:function(t,e){this.query("view/platform").tint=t,this.query("view/holder").tint=t,this.query("view/square").tint=t,this.query("view/back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.platformWidth=228*e.x*this.getProp("platformScale");var r=a().Bodies.rectangle(0,-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y),this.body=a().Body.create({parts:[r],isStatic:!0,label:f.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionActive,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"sync",value:function(){this.body&&this.syncBodyAndView(this.body,this.view)}},{key:"activate",value:function(){var t=this;if(!this.activated){this.activated=!0,this.moving=!0;var e=this.getNormalDistributePathPoints(this.getPathPoints(),0,-8),n={x:e.x[0],y:e.y[0],angle:this.body.angle};e.x.shift(),e.y.shift();var r=function(){var e=n.x-t.body.position.x;if(0!==e&&(t.playerJumpDirection=e>0?s.Z.JUMP_DIRECTION.RIGHT:s.Z.JUMP_DIRECTION.LEFT),a().Body.setPosition(t.body,{x:n.x,y:n.y+8}),t.player&&t.playerCollision.active){var r=Math.atan2(t.playerCollision.y,t.playerCollision.x),o=Math.sqrt(t.playerCollision.x*t.playerCollision.x+t.playerCollision.y*t.playerCollision.y),i=t.body.position.x+Math.cos(r+n.angle)*o,u=t.body.position.y+Math.sin(r+n.angle)*o;a().Body.setPosition(t.player.body,{x:i,y:u}),t.player.x=i,t.player.y=u}};new ut.ZP.Tween(n).to({x:e.x,y:e.y},this.getProp("moveTime")).onStart((function(){r()})).onUpdate((function(){r()})).onComplete((function(){t.moving=!1,t.getProp("shouldRotate")&&(n.angle=t.normalizeAngle(t.body.angle),new ut.ZP.Tween(n).to({angle:t.getRotationAngle(t.getProp("targetAngle"))},t.getProp("rotateDuration")).onStart(t.removeJumpZones.bind(t)).onUpdate((function(){a().Body.setAngle(t.body,n.angle),r()})).start())})).start()}}},{key:"handlePlayerCollision",value:function(t,e){var n=this,r=Math.abs(e.body.position.x-this.body.position.x);this.body.position.y-e.body.position.y>0&&r<this.platformWidth/2&&(this.playerCollision.active=!0,this.playerCollision.x=e.body.position.x-this.body.position.x,this.playerCollision.y=-30,e.once("jump",(function(){n.playerCollision.active=!1})),this.player=e,this.handlePlayerCollisionActive(t,e)),this.activate()}},{key:"handlePlayerCollisionActive",value:function(t,e){this.moving&&this.playerCollision.active&&(this.player=e,a().Body.setVelocity(e.body,{x:0,y:0}),a().Body.setAngularVelocity(e.body,0))}},{key:"handlePlayerCollisionEnd",value:function(t,e){this.player=null,this.playerCollision.active=!1}},{key:"removeJumpZones",value:function(){var t=["JumpUp","JumpLeft","JumpRight","JumpByParent"];this.children.filter((function(e){var n;return t.includes(null===(n=e.body)||void 0===n?void 0:n.label)})).forEach((function(t){return t.deactivate()})),this.body.parts.forEach((function(t){return t.jumpLocked=!0}))}}],r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t.exists("path")){var e=t.query("path");e.removeChildren();var n=t.getProp("path");if(n){var r,i=ct(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=new o.TC;u.beginFill(0,.5),u.drawCircle(0,0,5),u.endFill(),u.position.set(a.x,a.y),e.addChild(u)}}catch(t){i.e(t)}finally{i.f()}if(t.query("view/platform").scale.x=t.getProp("platformScale"),l.Z.editorMode){t.debugView||(t.debugView=new o.TC,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var s=f.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(s),100*Math.sin(s))}}}}},{key:"onEditorResize",value:function(t){f.updateView(t)}},{key:"onEditorUpdate",value:function(t){f.updateView(t)}},{key:"calcTime",value:function(t){var e;e=130*t.getProp("path").length,t.updateEditorProp("props.moveTime",e),f.updateView(t)}},{key:"recalculatePoints",value:(i=regeneratorRuntime.mark((function t(e){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,(r=e.getProp("path"))&&r.length>0&&(n=r[r.length-1].x),t.next=5,EditorAPI.prompt("Enter the final x coordinate",n);case 5:if(""!==(n=t.sent)){t.next=8;break}return t.abrupt("return");case 8:if(n=parseFloat(n),!isNaN(n)){t.next=11;break}return t.abrupt("return");case 11:for(o=Math.abs(Math.trunc(n/34)),r=[],i=0;i<=o;i++)r.push({x:34*i*Math.sign(n),y:-8});e.updateEditorProp("props.path",JSON.stringify(r)),f.calcTime(e);case 16:case"end":return t.stop()}}),t)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){st(o,n,r,a,u,"next",t)}function u(t){st(o,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return u.apply(this,arguments)})},{key:"onEditorCreate",value:function(t){f.updateView(t),t.editorActions={"Calc points":f.recalculatePoints,"Calc time":f.calcTime}}}],n&&pt(e.prototype,n),r&&pt(e,r),f}(u.Z);gt(wt,"label","SlidePlatform0"),gt(wt,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.385},path:{type:"json",value:"[]"},moveTime:{type:"number",value:1e3},shouldRotate:{type:"boolean",value:!0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:150},autoStart:{type:"boolean",value:!1}});const Pt=wt;var kt=n(6186),St=n(7547);function xt(t){return xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xt(t)}function Ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rt(t,e){return Rt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Rt(t,e)}function jt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_t(t);if(e){var o=_t(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ct(this,n)}}function Ct(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _t(t){return _t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_t(t)}var Bt,Et,At,Zt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rt(t,e)}(n,t);var e=jt(n);function n(){return Ot(this,n),e.apply(this,arguments)}return n}(u.Z);At={data:{type:"json",value:"{}"}},(Et="defaultProps")in(Bt=Zt)?Object.defineProperty(Bt,Et,{value:At,enumerable:!0,configurable:!0,writable:!0}):Bt[Et]=At;const Tt=Zt;var Vt=n(9390),qt=n(3494);function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Lt(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Wt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mt(t,e,n){return Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Xt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Mt(t,e,n||t)}function Ut(t,e){return Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ut(t,e)}function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Xt(t);if(e){var o=Xt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zt(this,n)}}function zt(t,e){return!e||"object"!==Dt(e)&&"function"!=typeof e?Ft(t):e}function Ft(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xt(t){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Xt(t)}function Yt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(l,t);var e,n,r,o,i,u=Nt(l);function l(){var t;Wt(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Yt(Ft(t=u.call.apply(u,[this].concat(n))),"mainColor",0),Yt(Ft(t),"started",!1),Yt(Ft(t),"animators",{}),t}return e=l,n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(0,-25),e=this.getWorldScale(),n=this.getWorldRotation(),r=a().Bodies.rectangle(t.x,t.y,140,50,{isStatic:!0,label:l.label,isSensor:!0,friction:.001,render:{strokeStyle:"#6600ff"}});a().Body.scale(r,e.x,e.y),a().Body.setAngle(r,n),a().World.add(this.level.world,r),r.view=this,this.level.addStartCollisionListener(r,s.Z.label,this.handlePlayerCollision,this)}}},{key:"setColors",value:function(t,e){Mt(Xt(l.prototype),"setColors",this).call(this,t,e),this.query("pointer1").tint=t,this.query("pointer2").tint=t,this.query("pointer3").tint=t,this.mainColor=t,this.started&&this.startAnimation()}},{key:"handlePlayerCollision",value:function(t){this.level.win()}},{key:"start",value:function(){this.startAnimation(),this.started=!0}},{key:"startAnimation",value:function(){this.animatePointer("pointer1",0),this.animatePointer("pointer2",150),this.animatePointer("pointer3",300)}},{key:"animatePointer",value:(o=regeneratorRuntime.mark((function t(e,n){var r,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.animators[e]&&this.animators[e].stop(),t.next=3,new qt.Z(n).start();case 3:r=this.query(e),o=Vt.Z.getRGBColor(this.mainColor),i=Vt.Z.getRGBColor(16777215),a={r:o.r,g:o.g,b:o.b},this.animators[e]=new ut.ZP.Tween(a).to({r:[i.r,o.r,o.r,o.r],g:[i.g,o.g,o.g,o.g],b:[i.b,o.b,o.b,o.b]},1500).onUpdate((function(){r.tint=Vt.Z.getIntColor(a)})).repeat(1/0).start();case 9:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Lt(i,n,r,a,u,"next",t)}function u(t){Lt(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}],n&&It(e.prototype,n),r&&It(e,r),l}(u.Z);Yt(Jt,"label","WinPlatform"),Yt(Jt,"defaultProps",{data:{type:"json",value:"{}"}});const Gt=Jt;function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function $t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kt(t,e){return Kt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Kt(t,e)}function Qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ee(t);if(e){var o=ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(t,e){return!e||"object"!==Ht(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ee(t)}var ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(n,t);var e=Qt(n);function n(){return $t(this,n),e.apply(this,arguments)}return n}(u.Z);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(ne,"defaultProps",{data:{type:"json",value:"{}"}});const re=ne;function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ie(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ue(t,e){return ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ue(t,e)}function le(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fe(t);if(e){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return se(this,n)}}function se(t,e){return!e||"object"!==oe(e)&&"function"!=typeof e?ce(t):e}function ce(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fe(t)}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ue(t,e)}(i,t);var e,n,r,o=le(i);function i(){var t;ie(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ye(ce(t=o.call.apply(o,[this].concat(n))),"playerStartX",void 0),t}return e=i,r=[{key:"updateView",value:function(t){if(t&&t.exists("view")){var e=t.query("view");e.scale.x=t.getProp("circleScale"),e.scale.y=t.getProp("circleScale")}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.fromVertices(0,0,[{x:39,y:-211},{x:81.5122,y:-199.7757},{x:118.3375,y:-180.0922},{x:150.615,y:-153.6028},{x:177.1045,y:-121.3252},{x:196.788,y:-84.4999},{x:208.9091,y:-44.5423},{x:213.0018,y:-2.9877},{x:208.9091,y:38.5669},{x:196.788,y:78.5245},{x:177.1045,y:115.3498},{x:150.615,y:147.6273},{x:118.3375,y:174.1168},{x:81.5122,y:193.8003},{x:41.5546,y:205.9214},{x:0,y:210.0141},{x:-41.5546,y:205.9214},{x:-81.5122,y:193.8003},{x:-118.3375,y:174.1168},{x:-150.615,y:147.6273},{x:-177.1045,y:115.3498},{x:-196.788,y:78.5245},{x:-208.9091,y:38.5669},{x:-213.0018,y:-2.9877},{x:-208.9091,y:-44.5423},{x:-196.788,y:-84.4999},{x:-177.1045,y:-121.3252},{x:-150.615,y:-153.6028},{x:-118.3375,y:-180.0922},{x:-81.5122,y:-199.7757},{x:-38,y:-211},{x:-39,y:-190},{x:-73.8729,y:-181.3326},{x:-107.2468,y:-163.4939},{x:-136.4993,y:-139.487},{x:-160.5062,y:-110.2345},{x:-178.3449,y:-76.8606},{x:-189.3299,y:-40.6478},{x:-193.0391,y:-2.9877},{x:-189.3299,y:34.6724},{x:-178.3449,y:70.8852},{x:-160.5062,y:104.2591},{x:-136.4993,y:133.5116},{x:-107.2468,y:157.5185},{x:-73.8729,y:175.3572},{x:-37.6601,y:186.3422},{x:0,y:190.0514},{x:37.6601,y:186.3422},{x:73.8729,y:175.3572},{x:107.2468,y:157.5185},{x:136.4993,y:133.5116},{x:160.5062,y:104.2591},{x:178.3449,y:70.8852},{x:189.3299,y:34.6724},{x:193.0391,y:-2.9877},{x:189.3299,y:-40.6478},{x:178.3449,y:-76.8606},{x:160.5062,y:-110.2345},{x:136.4993,y:-139.487},{x:107.2468,y:-163.4939},{x:73.8729,y:-181.3326},{x:39,y:-191}],{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=l.Z.getProp(this,"circleScale");a().Body.scale(this.body,e.x*r,e.y*r),a().Body.setCentre(this.body,{x:0,y:-9*e.y},!0),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),t=this.getWorldPosition(this.x,this.y-222*e.y*r,this.parent);var o=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}});a().Body.setPosition(o,t),a().World.add(this.level.world,o),t=this.getWorldPosition(this.x-3,this.y+170*e.y*r,this.parent);var u=a().Bodies.fromVertices(0,0,[{x:-105.2661,y:159.8867},{x:-72.5086,y:177.3959},{x:-36.9645,y:188.1781},{x:0,y:191.8188},{x:36.9645,y:188.1781},{x:72.5086,y:177.3959},{x:105.2661,y:159.8867}],{isSensor:!0,isStatic:!0,label:"Internal Sensor",render:{strokeStyle:"#9900ff"}});a().Body.scale(u,e.x*r,e.y*r),a().Body.setPosition(u,t),a().World.add(this.level.world,u),this.level.addStartCollisionListener(this.body,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(o,"Player",this.handlePlayerEndCollision,this),this.level.addStartCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(u,"Player",this.handlePlayerEndCollision,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){void 0===this.playerStartX&&(this.playerStartX=e.body.position.x)}},{key:"handlePlayerCollision",value:function(t,e){this.level.isBodyHasContacts(e.body,this.body)&&(e.jumpDirection=s.Z.JUMP_DIRECTION.UP,a().Body.setAngularVelocity(e.body,0),a().Body.setVelocity(e.body,{x:0,y:0}),void 0!==this.playerStartX&&a().Body.setPosition(e.body,{x:this.playerStartX,y:e.body.position.y}))}},{key:"handlePlayerEndCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,this.playerStartX=void 0}},{key:"tick",value:function(t){var e=this.body.angle+.01*this.getProp("angularVelocity")*(t/1e3);a().Body.setAngle(this.body,e)}}])&&ae(e.prototype,n),r&&ae(e,r),i}(u.Z);ye(pe,"label","CircleBigV2"),ye(pe,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},angularVelocity:{type:"number",value:-50},circleScale:{type:"number",value:.8459617}});const he=pe;function de(t){return de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},de(t)}function be(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function me(t,e){return me=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},me(t,e)}function ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ke(t);if(e){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return we(this,n)}}function we(t,e){return!e||"object"!==de(e)&&"function"!=typeof e?Pe(t):e}function Pe(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ke(t)}function Se(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&me(t,e)}(i,t);var e,n,r,o=ge(i);function i(){var t;be(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Se(Pe(t=o.call.apply(o,[this].concat(n))),"playerStartX",void 0),t}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.fromVertices(0,0,[{x:32.2051,y:-121.1282},{x:62.5,y:-108.2532},{x:88.3883,y:-88.3883},{x:108.2532,y:-62.5},{x:120.7407,y:-32.3524},{x:125,y:0},{x:120.7407,y:32.3524},{x:108.2532,y:62.5},{x:88.3883,y:88.3883},{x:62.5,y:108.2532},{x:32.3524,y:120.7407},{x:0,y:125},{x:-32.3524,y:120.7407},{x:-62.5,y:108.2532},{x:-88.3883,y:88.3883},{x:-108.2532,y:62.5},{x:-120.7407,y:32.3524},{x:-125,y:0},{x:-120.7407,y:-32.3524},{x:-108.2532,y:-62.5},{x:-88.3883,y:-88.3883},{x:-62.5,y:-108.2532},{x:-29.8462,y:-121.641},{x:-30.359,y:-101.641},{x:-52.5,y:-90.9327},{x:-74.2462,y:-74.2462},{x:-90.9327,y:-52.5},{x:-101.4222,y:-27.176},{x:-105,y:0},{x:-101.4222,y:27.176},{x:-90.9327,y:52.5},{x:-74.2462,y:74.2462},{x:-52.5,y:90.9327},{x:-27.176,y:101.4222},{x:0,y:105},{x:27.176,y:101.4222},{x:52.5,y:90.9327},{x:74.2462,y:74.2462},{x:90.9327,y:52.5},{x:101.4222,y:27.176},{x:105,y:0},{x:101.4222,y:-27.176},{x:90.9327,y:-52.5},{x:74.2462,y:-74.2462},{x:52.5,y:-90.9327},{x:32.2051,y:-100.6154}],{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setCentre(this.body,{x:0,y:-10},!0),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),t=this.getWorldPosition(this.x,this.y-130*e.y,this.parent);var r=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}});a().Body.setPosition(r,t),a().World.add(this.level.world,r),t=this.getWorldPosition(this.x,this.y+85*e.y,this.parent);var o=a().Bodies.fromVertices(0,0,[{x:74.8402,y:72.8402},{x:58.8016,y:86.0027},{x:40.5032,y:95.7834},{x:20.6484,y:101.8063},{x:0,y:103.84},{x:-20.6484,y:101.8063},{x:-40.5032,y:95.7834},{x:-58.8016,y:86.0027},{x:-74.8402,y:72.8402}],{isSensor:!0,isStatic:!0,label:"Internal Sensor",render:{strokeStyle:"#9900ff"}});a().Body.scale(o,e.x,e.y),a().Body.setPosition(o,t),a().World.add(this.level.world,o),this.level.addStartCollisionListener(this.body,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(r,"Player",this.handlePlayerEndCollision,this),this.level.addStartCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(o,"Player",this.handlePlayerEndCollision,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){void 0===this.playerStartX&&(this.playerStartX=e.body.position.x)}},{key:"handlePlayerCollision",value:function(t,e){this.level.isBodyHasContacts(e.body,this.body)&&(e.jumpDirection=s.Z.JUMP_DIRECTION.UP,a().Body.setAngularVelocity(e.body,0),a().Body.setVelocity(e.body,{x:0,y:0}),void 0!==this.playerStartX&&a().Body.setPosition(e.body,{x:this.playerStartX,y:e.body.position.y}))}},{key:"handlePlayerEndCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,this.playerStartX=void 0}},{key:"tick",value:function(t){var e=this.body.angle+.01*this.getProp("angularVelocity")*(t/1e3);a().Body.setAngle(this.body,e)}}])&&ve(e.prototype,n),r&&ve(e,r),i}(u.Z);Se(xe,"label","CircleNormal"),Se(xe,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},angularVelocity:{type:"number",value:-50}});const Oe=xe;function Re(t){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Re(t)}function je(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _e(t,e){return _e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_e(t,e)}function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ze(t);if(e){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ee(this,n)}}function Ee(t,e){return!e||"object"!==Re(e)&&"function"!=typeof e?Ae(t):e}function Ae(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ze(t){return Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ze(t)}function Te(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ve=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(i,t);var e,n,r,o=Be(i);function i(){var t;je(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Te(Ae(t=o.call.apply(o,[this].concat(n))),"playerStartX",void 0),t}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.fromVertices(0,0,[{x:32.2051,y:-121.1282},{x:62.5,y:-108.2532},{x:88.3883,y:-88.3883},{x:108.2532,y:-62.5},{x:120.7407,y:-32.3524},{x:125,y:0},{x:120.7407,y:32.3524},{x:108.2532,y:62.5},{x:88.3883,y:88.3883},{x:62.5,y:108.2532},{x:32.3524,y:120.7407},{x:0,y:125},{x:-32.3524,y:120.7407},{x:-62.5,y:108.2532},{x:-88.3883,y:88.3883},{x:-108.2532,y:62.5},{x:-120.7407,y:32.3524},{x:-125,y:0},{x:-120.7407,y:-32.3524},{x:-108.2532,y:-62.5},{x:-88.3883,y:-88.3883},{x:-62.5,y:-108.2532},{x:-29.8462,y:-121.641},{x:-30.359,y:-101.641},{x:-52.5,y:-90.9327},{x:-74.2462,y:-74.2462},{x:-90.9327,y:-52.5},{x:-101.4222,y:-27.176},{x:-105,y:0},{x:-101.4222,y:27.176},{x:-90.9327,y:52.5},{x:-74.2462,y:74.2462},{x:-52.5,y:90.9327},{x:-27.176,y:101.4222},{x:0,y:105},{x:27.176,y:101.4222},{x:52.5,y:90.9327},{x:74.2462,y:74.2462},{x:90.9327,y:52.5},{x:101.4222,y:27.176},{x:105,y:0},{x:101.4222,y:-27.176},{x:90.9327,y:-52.5},{x:74.2462,y:-74.2462},{x:52.5,y:-90.9327},{x:32.2051,y:-100.6154}],{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setCentre(this.body,{x:0,y:-6},!0),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,t=this.getWorldPosition(this.x,this.y-130*e.y,this.parent);var r=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}});a().Body.setPosition(r,t),a().World.add(this.level.world,r),t=this.getWorldPosition(this.x,this.y+85*e.y,this.parent);var o=a().Bodies.fromVertices(0,0,[{x:74.8402,y:72.8402},{x:58.8016,y:86.0027},{x:40.5032,y:95.7834},{x:20.6484,y:101.8063},{x:0,y:103.84},{x:-20.6484,y:101.8063},{x:-40.5032,y:95.7834},{x:-58.8016,y:86.0027},{x:-74.8402,y:72.8402}],{isSensor:!0,isStatic:!0,label:"Internal Sensor",render:{strokeStyle:"#9900ff"}});a().Body.scale(o,e.x,e.y),a().Body.setPosition(o,t),a().World.add(this.level.world,o),this.level.addStartCollisionListener(this.body,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(r,"Player",this.handlePlayerEndCollision,this),this.level.addStartCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(o,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(o,"Player",this.handlePlayerEndCollision,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){void 0===this.playerStartX&&(this.playerStartX=e.body.position.x)}},{key:"handlePlayerCollision",value:function(t,e){this.level.isBodyHasContacts(e.body,this.body)&&(e.jumpDirection=s.Z.JUMP_DIRECTION.UP,a().Body.setAngularVelocity(e.body,0),a().Body.setVelocity(e.body,{x:0,y:0}),void 0!==this.playerStartX&&this.getProp("lockPlayerPosition")&&a().Body.setPosition(e.body,{x:this.playerStartX,y:e.body.position.y}))}},{key:"handlePlayerEndCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,this.playerStartX=void 0}},{key:"tick",value:function(t){var e=this.body.angle+.01*this.getProp("angularVelocity")*(t/1e3);a().Body.setAngle(this.body,e)}}])&&Ce(e.prototype,n),r&&Ce(e,r),i}(u.Z);Te(Ve,"label","CircleSmall"),Te(Ve,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},angularVelocity:{type:"number",value:-50},lockPlayerPosition:{type:"boolean",value:!0}});const qe=Ve;function De(t){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},De(t)}function Le(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function We(t,e){return We=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},We(t,e)}function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ue(t);if(e){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(t,e){return!e||"object"!==De(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ue(t){return Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ue(t)}var Ne=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&We(t,e)}(n,t);var e=Ie(n);function n(){return Le(this,n),e.apply(this,arguments)}return n}(u.Z);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Ne,"defaultProps",{data:{type:"json",value:"{}"}});const ze=Ne;function Fe(t){return Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(t)}function Xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ye(t,e){return Ye=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ye(t,e)}function Je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=He(t);if(e){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(t,e){return!e||"object"!==Fe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function He(t){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},He(t)}var $e=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ye(t,e)}(n,t);var e=Je(n);function n(){return Xe(this,n),e.apply(this,arguments)}return n}(u.Z);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}($e,"defaultProps",{data:{type:"json",value:"{}"}});const Ke=$e;function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}function tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function en(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nn(t,e,n){return nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ln(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},nn(t,e,n||t)}function rn(t,e){return rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rn(t,e)}function on(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ln(t);if(e){var o=ln(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return an(this,n)}}function an(t,e){return!e||"object"!==Qe(e)&&"function"!=typeof e?un(t):e}function un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ln(t){return ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ln(t)}function sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rn(t,e)}(i,t);var e,n,r,o=on(i);function i(){var t;tn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return sn(un(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return e+=Math.PI,t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")&&(t.query("platform").scale.x=t.getProp("platformScale"),l.Z.editorMode)){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var e=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(e),100*Math.sin(e))}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y,u=106*r;if(this.centreX=u,a().Body.scale(this.body,r,o),this.getProp("isStatic")&&a().Body.setCentre(this.body,{x:u,y:0}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),!this.getProp("isStatic")){var l=this.getWorldPosition(-u*Math.sign(this.scale.x),0);a().Body.setPosition(this.body,{x:l.x,y:l.y});var c=Math.cos(n)*u,f=Math.sin(n)*u;this.joint=a().Constraint.create({pointA:{x:t.x,y:t.y},bodyB:this.body,pointB:{x:c,y:f},stiffness:0,damping:this.getProp("damping"),length:0}),a().World.add(this.level.world,this.joint)}this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"sync",value:function(){if(this.getProp("isStatic"))nn(ln(i.prototype),"sync",this).call(this);else{var t=this.level.mainContainer.toGlobal({x:this.body.position.x+Math.cos(this.body.angle)*this.centreX,y:this.body.position.y+Math.sin(this.body.angle)*this.centreX});t=this.parent.toLocal(t),this.position.set(t.x,t.y),this.rotation=this.body.angle}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated)if(this.activated=!0,this.getProp("isStatic")){var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}else this.body.isStatic=!1,this.getProp("disableCollisions")&&(this.body.collisionFilter.mask=0)}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("hinge").tint=t,this.query("back").tint=e}}])&&en(e.prototype,n),r&&en(e,r),i}(u.Z);sn(cn,"label","Hinge"),sn(cn,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.554},isStatic:{type:"boolean",value:!0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},damping:{type:"number",value:.12},disableCollisions:{type:"boolean",value:!0}});const fn=cn;function yn(t){return yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yn(t)}function pn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e,n){return dn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wn(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},dn(t,e,n||t)}function bn(t,e){return bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},bn(t,e)}function vn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=wn(t);if(e){var o=wn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mn(this,n)}}function mn(t,e){return!e||"object"!==yn(e)&&"function"!=typeof e?gn(t):e}function gn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wn(t){return wn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},wn(t)}function Pn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var kn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bn(t,e)}(i,t);var e,n,r,o=vn(i);function i(){var t;pn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Pn(gn(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return e+=Math.PI,t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){t.query("platform").scale.x=t.getProp("platformScale");var e=t.query("spike");if(e.position.set(t.getProp("spikeX"),t.getProp("spikeY")),e.rotation=t.getProp("spikeRotation")*Math.PI/180,e.scale.x=t.getProp("spikeScale"),e.scale.y=t.getProp("spikeScale"),l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var n=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(n),100*Math.sin(n))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"prepare",value:function(t){this.getProp("trigger")&&(this.trigger=t.view.query(this.getProp("trigger")),this.trigger.once("start",this.handlePlayerCollision,this)),dn(wn(i.prototype),"prepare",this).call(this,t)}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y,u=106*r;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:u,y:0}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.trigger||this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("hinge").tint=t,this.query("back").tint=e}}])&&hn(e.prototype,n),r&&hn(e,r),i}(u.Z);Pn(kn,"label","HingeSpike"),Pn(kn,"defaultProps",{data:{type:"json",value:"{}"},trigger:{type:"string",value:""},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.554},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},spikeX:{type:"number",value:-144},spikeY:{type:"number",value:16},spikeRotation:{type:"number",value:0},spikeScale:{type:"number",value:1}});const Sn=kn;function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function On(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jn(t,e){return jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},jn(t,e)}function Cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=En(t);if(e){var o=En(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _n(this,n)}}function _n(t,e){return!e||"object"!==xn(e)&&"function"!=typeof e?Bn(t):e}function Bn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function En(t){return En=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},En(t)}function An(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jn(t,e)}(i,t);var e,n,r,o=Cn(i);function i(){var t;On(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return An(Bn(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return e+=Math.PI,t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){t.query("platform").scale.x=t.getProp("platformScale");var e=t.query("spike");if(e.position.set(t.getProp("spikeX"),t.getProp("spikeY")),e.rotation=t.getProp("spikeRotation")*Math.PI/180,e.scale.x=t.getProp("spikeScale"),e.scale.y=t.getProp("spikeScale"),l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var n=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(n),100*Math.sin(n))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y,u=106*r;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:u,y:0}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("hinge").tint=t,this.query("back").tint=e}}])&&Rn(e.prototype,n),r&&Rn(e,r),i}(u.Z);An(Zn,"label","HingeSpike4"),An(Zn,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.554},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},spikeX:{type:"number",value:-144},spikeY:{type:"number",value:-16},spikeRotation:{type:"number",value:0},spikeScale:{type:"number",value:1}});const Tn=Zn;function Vn(t){return Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vn(t)}function qn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ln(t,e){return Ln=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ln(t,e)}function Wn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Un(t);if(e){var o=Un(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return In(this,n)}}function In(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?Mn(t):e}function Mn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Un(t){return Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Un(t)}function Nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ln(t,e)}(i,t);var e,n,r,o=Wn(i);function i(){var t;qn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Nn(Mn(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")&&(t.query("platform").scale.x=t.getProp("platformScale"),t.query("spike").position.set(t.getProp("spikeX"),t.getProp("spikeY")),l.Z.editorMode)){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var e=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(e),100*Math.sin(e))}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:0,y:8}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&Dn(e.prototype,n),r&&Dn(e,r),i}(u.Z);Nn(zn,"label","TwisSpike"),Nn(zn,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.58},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},spikeX:{type:"number",value:-40},spikeY:{type:"number",value:-27.3}});const Fn=zn;function Xn(t){return Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(t)}function Yn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gn(t,e){return Gn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gn(t,e)}function Hn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qn(t);if(e){var o=Qn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $n(this,n)}}function $n(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?Kn(t):e}function Kn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qn(t){return Qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qn(t)}function tr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gn(t,e)}(i,t);var e,n,r,o=Hn(i);function i(){var t;Yn(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return tr(Kn(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")&&(t.query("platform").scale.x=t.getProp("platformScale"),l.Z.editorMode)){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var e=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(e),100*Math.sin(e))}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:0,y:8}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&Jn(e.prototype,n),r&&Jn(e,r),i}(u.Z);tr(er,"label","Twist"),tr(er,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.58},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250}});const nr=er;function rr(t){return rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rr(t)}function or(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ar(t,e){return ar=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ar(t,e)}function ur(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=sr(t);if(e){var o=sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lr(this,n)}}function lr(t,e){return!e||"object"!==rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sr(t){return sr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},sr(t)}function cr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ar(t,e)}(i,t);var e,n,r,o=ur(i);function i(){return or(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){var e=t.query("platform");if(e.scale.x=t.getProp("platformScale"),e.position.x=t.getProp("platformX"),t.query("block").position.x=e.position.x+-e.width/2+8.5,t.query("jumpRight").scale.x=2*e.scale.x,l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var n=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(n),100*Math.sin(n))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this),this.query("jumpRight").config.props.jumpForceScale=this.getProp("jumpForceScale")}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("block").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=(this.getWorldPosition(0,0),this.getWorldScale()),n=this.getWorldRotation(),r=a().Bodies.rectangle(this.getProp("platformX"),-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y);var o=a().Bodies.rectangle(this.getProp("platformX")-100*e.x*this.getProp("platformScale"),-20,17,38);a().Body.scale(o,e.x,e.y),this.body=a().Body.create({parts:[r,o],isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(r,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&ir(e.prototype,n),r&&ir(e,r),i}(u.Z);cr(fr,"label","TwistR"),cr(fr,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.5},platformX:{type:"number",value:0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},jumpForceScale:{type:"number",value:1}});const yr=fr;function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function hr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function br(t,e){return br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},br(t,e)}function vr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gr(t);if(e){var o=gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return mr(this,n)}}function mr(t,e){return!e||"object"!==pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gr(t){return gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gr(t)}function wr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(i,t);var e,n,r,o=vr(i);function i(){return hr(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return e+=Math.PI,t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){var e=t.query("platform");if(e.scale.x=t.getProp("platformScale"),e.position.x=t.getProp("platformX"),t.query("block").position.x=e.position.x+e.width/2-8.5,t.query("jumpLeft").scale.x=2*e.scale.x,l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var n=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(n),100*Math.sin(n))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this),this.query("jumpLeft").config.props.jumpForceScale=this.getProp("jumpForceScale")}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("block").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=(this.getWorldPosition(0,0),this.getWorldScale()),n=this.getWorldRotation(),r=a().Bodies.rectangle(this.getProp("platformX"),-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y);var o=a().Bodies.rectangle(this.getProp("platformX")+100*e.x*this.getProp("platformScale"),-20,17,38);a().Body.scale(o,e.x,e.y),this.body=a().Body.create({parts:[r,o],isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(r,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&dr(e.prototype,n),r&&dr(e,r),i}(u.Z);wr(Pr,"label","TwistL"),wr(Pr,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.5},platformX:{type:"number",value:0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},jumpForceScale:{type:"number",value:1}});const kr=Pr;function Sr(t){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sr(t)}function xr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rr(t,e){return Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Rr(t,e)}function jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=_r(t);if(e){var o=_r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(t,e){return!e||"object"!==Sr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},_r(t)}function Br(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Er=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}(i,t);var e,n,r,o=jr(i);function i(){return xr(this,i),o.apply(this,arguments)}return e=i,r=[{key:"updateView",value:function(t){t&&t.exists("platform")&&(t.query("platform").scale.x=t.getProp("platformScale"))}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"setColors",value:function(t,e){this.query("platform").tint=t}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,17,228,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x,o=e.y*this.getProp("platformScale");a().Body.scale(this.body,r,o),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.getProp("platformDamage")&&this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t){this.level.fail()}}])&&Or(e.prototype,n),r&&Or(e,r),i}(u.Z);Br(Er,"label","SpikePlatf"),Br(Er,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.2068176},platformDamage:{type:"boolean",value:!0}});const Ar=Er;function Zr(t){return Zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zr(t)}function Tr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qr(t,e){return qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qr(t,e)}function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wr(t);if(e){var o=Wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lr(this,n)}}function Lr(t,e){return!e||"object"!==Zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wr(t){return Wr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wr(t)}function Ir(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Mr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(i,t);var e,n,r,o=Dr(i);function i(){return Tr(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"setColors",value:function(t,e){this.query("platform").tint=t}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,17,49,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t){this.level.fail()}}])&&Vr(e.prototype,n),r&&Vr(e,r),i}(u.Z);Ir(Mr,"label","DoubleSpike"),Ir(Mr,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0}});const Ur=Mr;function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function zr(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Fr(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Xr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gr(t,e){return Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Gr(t,e)}function Hr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qr(t);if(e){var o=Qr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $r(this,n)}}function $r(t,e){return!e||"object"!==Nr(e)&&"function"!=typeof e?Kr(t):e}function Kr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qr(t){return Qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qr(t)}function to(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var eo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(c,t);var e,n,r,i,u,l=Hr(c);function c(){var t;Yr(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return to(Kr(t=l.call.apply(l,[this].concat(n))),"activated",!1),to(Kr(t),"playerCollisionActive",!1),to(Kr(t),"player",null),t}return e=c,n=[{key:"onCreate",value:function(){c.updateView(this),this.view=this.query("view"),this.query("spike1").notLinkBody=!0,this.query("spike2").notLinkBody=!0}},{key:"setColors",value:function(t,e){this.query("view/platform").tint=t,this.query("view/holder").tint=t,this.query("view/square").tint=t,this.query("view/left").tint=t,this.query("view/right").tint=t,this.query("view/back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation(),r=a().Bodies.rectangle(0,-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y);var o=228*e.x*this.getProp("platformScale"),i=a().Bodies.rectangle(-o/2+8.5,0,17,32);a().Body.scale(i,e.x,e.y);var u=a().Bodies.rectangle(o/2-8.5,0,17,32);a().Body.scale(u,e.x,e.y),this.body=a().Body.create({parts:[r,i,u],isStatic:!0,label:c.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionActive,this)}}},{key:"sync",value:function(){this.body&&this.syncBodyAndView(this.body,this.view)}},{key:"handlePlayerCollision",value:function(t,e){var n=this;this.activated||(this.activated=!0,this.playerCollisionActive=!0,this.player=e,this.handlePlayerCollisionActive(t,e),e.once("jump",(function(){n.playerCollisionActive=!1})),this.activate())}},{key:"activate",value:function(){var t=this,e=this.getNormalDistributePathPoints(this.getPathPoints()),n={x:this.body.position.x,y:this.body.position.y};new ut.ZP.Tween(n).to({x:e.x,y:e.y},this.getProp("moveTime")).onUpdate((function(){t.body.position.y,a().Body.setPosition(t.body,{x:n.x,y:n.y})})).start()}},{key:"handlePlayerCollisionActive",value:function(t,e){this.playerCollisionActive&&(a().Body.setVelocity(e.body,{x:0,y:0}),a().Body.setAngularVelocity(e.body,0))}}],r=[{key:"updateView",value:function(t){if(t.exists("path")){var e=t.query("path");e.removeChildren();var n=t.getProp("path");if(n){var r,i=Fr(n);try{for(i.s();!(r=i.n()).done;){var a=r.value,u=new o.TC;u.beginFill(0,.5),u.drawCircle(0,0,5),u.endFill(),u.position.set(a.x,a.y),e.addChild(u)}}catch(t){i.e(t)}finally{i.f()}t.query("view/platform").scale.x=t.getProp("platformScale"),t.query("view/left").x=-t.query("view/platform").width/2+8.5,t.query("view/right").x=t.query("view/platform").width/2-8.5,t.getProp("useSpikes")?(t.query("spike1").visible=!0,t.query("spike2").visible=!0,t.query("spike1").y=t.getProp("spikesY"),t.query("spike2").y=t.getProp("spikesY")):(t.query("spike1").visible=!1,t.query("spike2").visible=!1)}}}},{key:"calcTime",value:function(t){var e;e=200*t.getProp("path").length,t.updateEditorProp("props.moveTime",e),c.updateView(t)}},{key:"onEditorResize",value:function(t){c.updateView(t)}},{key:"onEditorUpdate",value:function(t){c.updateView(t)}},{key:"recalculatePoints",value:(i=regeneratorRuntime.mark((function t(e){var n,r,o,i,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,(r=e.getProp("path"))&&r.length>0&&(n=r[r.length-1].y),t.next=5,EditorAPI.prompt("Enter the final y coordinate",n);case 5:if(""!==(n=t.sent)){t.next=8;break}return t.abrupt("return");case 8:if(n=parseFloat(n),!isNaN(n)){t.next=11;break}return t.abrupt("return");case 11:for(o=Math.abs(Math.trunc(n/34)),r=[],i=0;i<=o;i++)r.push({x:0,y:34*i*Math.sign(n)});e.updateEditorProp("props.path",JSON.stringify(r)),r.length>0&&(a=r[r.length-1],e.updateEditorProp("props.spikesY",a.y-40)),c.calcTime(e);case 17:case"end":return t.stop()}}),t)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){zr(o,n,r,a,u,"next",t)}function u(t){zr(o,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return u.apply(this,arguments)})},{key:"onEditorCreate",value:function(t){c.updateView(t),t.editorActions={"Calc points":c.recalculatePoints,"Calc time":c.calcTime}}}],n&&Jr(e.prototype,n),r&&Jr(e,r),c}(u.Z);to(eo,"label","Elevator"),to(eo,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.385},path:{type:"json",value:"[]"},moveTime:{type:"number",value:1e3},useSpikes:{type:"boolean",value:!1},spikesY:{type:"number",value:-200}});const no=eo;function ro(t){return ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ro(t)}function oo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function io(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ao(t,e){return ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ao(t,e)}function uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=so(t);if(e){var o=so(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lo(this,n)}}function lo(t,e){return!e||"object"!==ro(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function so(t){return so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},so(t)}function co(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ao(t,e)}(u,t);var e,n,r,i=uo(u);function u(){return oo(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){l.Z.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(16750848,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#ff9900"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){e.gravityScale=this.getProp("gravityScale")}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.gravityScale=1}}])&&io(e.prototype,n),r&&io(e,r),u}(u.Z);co(fo,"label","GravityChanger"),co(fo,"defaultProps",{data:{type:"json",value:"{}"},gravityScale:{type:"number",value:1}});const yo=fo;function po(t){return po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},po(t)}function ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vo(t,e){return vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},vo(t,e)}function mo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Po(t);if(e){var o=Po(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return go(this,n)}}function go(t,e){return!e||"object"!==po(e)&&"function"!=typeof e?wo(t):e}function wo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Po(t){return Po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Po(t)}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var So=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vo(t,e)}(i,t);var e,n,r,o=mo(i);function i(){var t;ho(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ko(wo(t=o.call.apply(o,[this].concat(n))),"playerStartX",void 0),t}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.circle(0,0,10,{isStatic:!0,isSensor:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=Math.atan2(2,9),o=Math.sqrt(85);a().Body.scale(this.body,e.x,e.y),a().Body.setPosition(this.body,{x:t.x+Math.cos(r)*o,y:t.y+Math.sin(r)*o}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),t=this.getWorldPosition(this.x,this.y-155*e.y,this.parent);var u=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}});a().Body.setPosition(u,t),a().World.add(this.level.world,u),this.level.addStartCollisionListener(u,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(u,"Player",this.handlePlayerEndCollision,this),t=this.getWorldPosition(this.x,this.y+110*e.y,this.parent),u=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}}),a().Body.setPosition(u,t),a().World.add(this.level.world,u),this.level.addStartCollisionListener(u,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(u,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(u,"Player",this.handlePlayerEndCollision,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){void 0===this.playerStartX&&(this.playerStartX=e.body.position.x)}},{key:"handlePlayerCollision",value:function(t,e){this.level.isBodyHasContacts(e.body)&&(e.jumpDirection=s.Z.JUMP_DIRECTION.UP,a().Body.setAngularVelocity(e.body,0),a().Body.setVelocity(e.body,{x:0,y:0}),void 0!==this.playerStartX&&a().Body.setPosition(e.body,{x:this.playerStartX,y:e.body.position.y}))}},{key:"handlePlayerEndCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,this.playerStartX=void 0}},{key:"tick",value:function(t){var e=this.body.angle+.01*this.getProp("angularVelocity")*(t/1e3);a().Body.setAngle(this.body,e)}}])&&bo(e.prototype,n),r&&bo(e,r),i}(u.Z);ko(So,"label","Heptagon"),ko(So,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},angularVelocity:{type:"number",value:-50}});const xo=So;function Oo(t){return Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oo(t)}function Ro(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Co(t,e){return Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Co(t,e)}function _o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ao(t);if(e){var o=Ao(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bo(this,n)}}function Bo(t,e){return!e||"object"!==Oo(e)&&"function"!=typeof e?Eo(t):e}function Eo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ao(t){return Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ao(t)}function Zo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var To=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(i,t);var e,n,r,o=_o(i);function i(){var t;Ro(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Zo(Eo(t=o.call.apply(o,[this].concat(n))),"playerStartX",void 0),t}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.circle(0,0,10,{isStatic:!0,isSensor:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),t=this.getWorldPosition(this.x,this.y-130*e.y,this.parent);var r=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}});a().Body.setPosition(r,t),a().World.add(this.level.world,r),this.level.addStartCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(r,"Player",this.handlePlayerEndCollision,this),t=this.getWorldPosition(this.x,this.y+100*e.y,this.parent),r=a().Bodies.rectangle(0,0,100*e.x,20*e.y,{isSensor:!0,isStatic:!0,label:"Sensor",render:{strokeStyle:"#9900ff"}}),a().Body.setPosition(r,t),a().World.add(this.level.world,r),this.level.addStartCollisionListener(r,"Player",this.handlePlayerStartCollision,this),this.level.addStartCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addActiveCollisionListener(r,"Player",this.handlePlayerCollision,this),this.level.addEndCollisionListener(r,"Player",this.handlePlayerEndCollision,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){void 0===this.playerStartX&&(this.playerStartX=e.body.position.x)}},{key:"handlePlayerCollision",value:function(t,e){this.level.isBodyHasContacts(e.body)&&(e.jumpDirection=s.Z.JUMP_DIRECTION.UP,a().Body.setAngularVelocity(e.body,0),a().Body.setVelocity(e.body,{x:0,y:0}),void 0!==this.playerStartX&&a().Body.setPosition(e.body,{x:this.playerStartX,y:e.body.position.y}))}},{key:"handlePlayerEndCollision",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,this.playerStartX=void 0}},{key:"tick",value:function(t){var e=this.body.angle+.01*this.getProp("angularVelocity")*(t/1e3);a().Body.setAngle(this.body,e)}}])&&jo(e.prototype,n),r&&jo(e,r),i}(u.Z);Zo(To,"label","Heptagon1"),Zo(To,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},angularVelocity:{type:"number",value:-50}});const Vo=To;function qo(t){return qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qo(t)}function Do(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wo(t,e){return Wo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Wo(t,e)}function Io(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Uo(t);if(e){var o=Uo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mo(this,n)}}function Mo(t,e){return!e||"object"!==qo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Uo(t){return Uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Uo(t)}function No(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wo(t,e)}(i,t);var e,n,r,o=Io(i);function i(){return Do(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){var e=t.query("platform");e.scale.x=t.getProp("platformScale"),e.position.x=t.getProp("platformX"),t.query("block").position.x=e.position.x+-e.width/2+8.5,t.query("jumpRight").scale.x=2*e.scale.x;var n=t.query("spike");if(n.position.x=e.position.x+e.width/2-25,n.visible=t.getProp("spikeVisible"),l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var r=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(r),100*Math.sin(r))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this),this.query("jumpRight").config.props.jumpForceScale=this.getProp("jumpForceScale")}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("block").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=(this.getWorldPosition(0,0),this.getWorldScale()),n=this.getWorldRotation(),r=a().Bodies.rectangle(this.getProp("platformX"),-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y);var o=a().Bodies.rectangle(this.getProp("platformX")-100*e.x*this.getProp("platformScale"),-20,17,38);a().Body.scale(o,e.x,e.y),this.body=a().Body.create({parts:[r,o],isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&Lo(e.prototype,n),r&&Lo(e,r),i}(u.Z);No(zo,"label","TwistRSpike"),No(zo,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.5},platformX:{type:"number",value:0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},jumpForceScale:{type:"number",value:1},spikeVisible:{type:"boolean",value:!0}});const Fo=zo;var Xo=n(1497);function Yo(t){return Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yo(t)}function Jo(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Go(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Go(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Go(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Ho(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ko(t,e){return Ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ko(t,e)}function Qo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ni(t);if(e){var o=ni(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ti(this,n)}}function ti(t,e){return!e||"object"!==Yo(e)&&"function"!=typeof e?ei(t):e}function ei(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ni(t){return ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ni(t)}function ri(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ko(t,e)}(u,t);var e,n,r,i=Qo(u);function u(){var t;Ho(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ri(ei(t=i.call.apply(i,[this].concat(n))),"active",!1),ri(ei(t),"enabled",!0),t}return e=u,r=[{key:"calculateTrajectory",value:function(t,e,n,r,o){for(var i=[],a=0;a<r;a++){var u=a*o,l=t*u,s=e*u+.5*n*u*u;i.push({x:l,y:s})}return i}},{key:"updateView",value:function(t){l.Z.editorMode&&(t.debugView||(t.debugView=new o.TC,t.debugView._editorInternal=!0,t.addChild(t.debugView),t.debugView.x=-22,t.debugView.y=44),requestAnimationFrame((function(){var e=u.calculateTrajectory(t.getProp("strengthX"),t.getProp("strengthY"),.45,20,2.5);t.debugView.clear();var n,r=Jo(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.debugView.beginFill(16748544,1),t.debugView.drawCircle(o.x,o.y,5),t.debugView.endFill()}}catch(t){r.e(t)}finally{r.f()}for(var i=t.rotation,a=t.parent;a;)i+=a.rotation,a=a.parent;t.debugView.rotation=-i})))}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"onCreate",value:function(){var t=this;this.query("rope").animationSpeed=1,this.query("rope").gotoAndStop(0),this.query("rope").onAnimationEnd=function(){t.query("rope").gotoAndStop(0)}}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(-22,44),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,124,10,{isStatic:!0,label:u.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#006666"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n-Math.PI/4),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(this.enabled&&!this.active){this.active=!0;var r={x:this.getProp("strengthX"),y:this.getProp("strengthY")};return Xo.Z.playOnce("bounce"),a().Body.setVelocity(e.body,r),e.emit("jump"),this.query("rope").gotoAndPlay(0),this.getProp("needBounceDisable")&&(this.enabled=!1),new qt.Z(this.getProp("timeout")).then((function(){n.active=!1})),!1}}},{key:"sync",value:function(){}},{key:"setColors",value:function(t,e){this.query("pin1/holder").tint=t,this.query("pin1/circle").tint=t,this.query("pin1/fill").tint=e,this.query("pin2/holder").tint=t,this.query("pin2/circle").tint=t,this.query("pin2/fill").tint=e,this.query("rope").tint=t}}])&&$o(e.prototype,n),r&&$o(e,r),u}(u.Z);ri(oi,"label","Bounce1"),ri(oi,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},strengthX:{type:"number",value:-5},strengthY:{type:"number",value:-7},needBounceDisable:{type:"boolean",value:!1},timeout:{type:"number",value:500}});const ii=oi;function ai(t){return ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ai(t)}function ui(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function si(t,e){return si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},si(t,e)}function ci(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pi(t);if(e){var o=pi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fi(this,n)}}function fi(t,e){return!e||"object"!==ai(e)&&"function"!=typeof e?yi(t):e}function yi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pi(t){return pi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pi(t)}function hi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var di=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&si(t,e)}(i,t);var e,n,r,o=ci(i);function i(){var t;ui(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return hi(yi(t=o.call.apply(o,[this].concat(n))),"activated",!1),t}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){t.query("platform").scale.x=t.getProp("platformScale");var e=t.query("spike");if(e.position.set(t.getProp("spikeX"),t.getProp("spikeY")),e.rotation=t.getProp("spikeRotation")*Math.PI/180,l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var n=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(n),100*Math.sin(n))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this)}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}});var r=e.x*this.getProp("platformScale"),o=e.y;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:0,y:8}),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&li(e.prototype,n),r&&li(e,r),i}(u.Z);hi(di,"label","TwisSpikeVariant"),hi(di,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.58},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},spikeX:{type:"number",value:-40},spikeY:{type:"number",value:-27.3},spikeRotation:{type:"number",value:0}});const bi=di;var vi=n(3319);function mi(t){return mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mi(t)}function gi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pi(t,e){return Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pi(t,e)}function ki(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xi(t);if(e){var o=xi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Si(this,n)}}function Si(t,e){return!e||"object"!==mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xi(t){return xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(t)}var Oi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}(u,t);var e,n,r,i=ki(u);function u(){return gi(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(3342387,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#330033"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerStartCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerActiveCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerStartCollision",value:function(t,e){this.emit("start",e)}},{key:"handlePlayerActiveCollision",value:function(t,e){this.emit("active",e)}},{key:"handlePlayerCollisionEnd",value:function(t,e){this.emit("end",e)}}])&&wi(e.prototype,n),r&&wi(e,r),u}(u.Z);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Oi,"label","Trigger");const Ri=Oi;function ji(t){return ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(t)}function Ci(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function _i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Bi(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Ei(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Bi(i,r,o,a,u,"next",t)}function u(t){Bi(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ai(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ti(t,e){return Ti=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ti(t,e)}function Vi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Li(t);if(e){var o=Li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(t,e){return!e||"object"!==ji(e)&&"function"!=typeof e?Di(t):e}function Di(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Li(t){return Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Li(t)}function Wi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ii=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ti(t,e)}(l,t);var e,n,r,o,i,u=Vi(l);function l(){var t;Ai(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wi(Di(t=u.call.apply(u,[this].concat(n))),"active",!1),Wi(Di(t),"level",null),Wi(Di(t),"target",null),Wi(Di(t),"trigger",null),Wi(Di(t),"waypoint",null),t}return e=l,n=[{key:"prepare",value:function(t){this.level=t,this.target=this.level.view.query(this.getProp("target"),!0),this.trigger=this.level.view.query(this.getProp("trigger"),!0),this.waypoint=this.level.view.query(this.getProp("waypoint"),!0)}},{key:"start",value:function(){var t;this.getProp("autoStart")?this.activate():null===(t=this.trigger)||void 0===t||t.on("start",this.activate,this)}},{key:"activate",value:(i=Ei(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.active){t.next=2;break}return t.abrupt("return");case 2:if(this.active=!0,this.getProp("shouldMove")&&this.move(),this.getProp("shouldRotate")&&this.rotate(),!this.getProp("repeat")){t.next=9;break}return t.next=8,new qt.Z(this.getProp("duration"));case 8:this.active=!1;case 9:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"move",value:function(){var t=this,e=this.waypoint.toGlobal({x:0,y:0});e=this.level.view.toLocal(e);var n={x:this.target.body.position.x,y:this.target.body.position.y},r=new ut.ZP.Tween(n).to(e,this.getProp("duration")).onUpdate((function(){a().Body.setPosition(t.target.body,n)}));this.getProp("loop")&&(r.repeat(1/0),r.yoyo(!0)),r.start()}},{key:"rotate",value:function(){for(var t=this,e=this.waypoint.rotation,n=this.waypoint.parent;n!==this.level.view;)e+=n.rotation,n=n.parent;var r={rotation:this.target.body.angle},o=new ut.ZP.Tween(r).to({rotation:e},this.getProp("duration")).onUpdate((function(){a().Body.setAngle(t.target.body,r.rotation)}));this.getProp("loop")&&(o.repeat(1/0),o.yoyo(!0)),o.start()}}],r=[{key:"getElementPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t&&t.config?(e=t.config.name+(e?"/"+e:""),l.getElementPath(t.parent,e)):e}},{key:"autoLinks",value:function(t){var e,n=null,r=null,o=null,i=null,a=Ci(t.children);try{for(a.s();!(e=a.n()).done;){var u,l,s,c,f,y,p=e.value;"Component"===(null===(u=p.config)||void 0===u?void 0:u.type)&&["levelsElements/PlatformNormal","levelsElements/InvisiblePlatform"].includes(null===(l=p.config)||void 0===l?void 0:l.path)&&(n=p),"Container"===(null===(s=p.config)||void 0===s?void 0:s.type)&&(null===(c=p.config)||void 0===c?void 0:c.name.toLowerCase().startsWith("way"))&&(r=p),"Container"===(null===(f=p.config)||void 0===f?void 0:f.type)&&(null===(y=p.config)||void 0===y?void 0:y.name.toLowerCase().startsWith("trig"))&&(o=p)}}catch(t){a.e(t)}finally{a.f()}if(o){var h,d=Ci(o.children);try{for(d.s();!(h=d.n()).done;){var b,v,m=h.value;"Component"===(null===(b=m.config)||void 0===b?void 0:b.type)&&"levelsElements/Trigger"===(null===(v=m.config)||void 0===v?void 0:v.path)&&(i=m)}}catch(t){d.e(t)}finally{d.f()}i||(i=EditorAPI.addElement(o,"Component","levelsElements/Trigger"))}n&&t.updateEditorProp("props.target",n.getElementPath()),r&&t.updateEditorProp("props.waypoint",r.getElementPath()),i&&t.updateEditorProp("props.trigger",i.getElementPath()),EditorAPI.setCurrentElement(t)}},{key:"autoStructure",value:(o=Ei(regeneratorRuntime.mark((function t(e){var n,r,o,i,a,u,s,c,f,y,p,h,d,b,v,m,g,w,P;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,EditorAPI.prompt("Enter the path(s) to the element(s)");case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return");case 5:r=EditorAPI.getCurrentRoot(),""!==e.getProp("target")&&""!==e.getProp("waypoint")&&""!==e.getProp("trigger")||l.autoLinks(e),o=null,i=e.getProp("target"),a=Ci(e.children);try{for(a.s();!(u=a.n()).done;)f=u.value,"Component"===(null===(s=f.config)||void 0===s?void 0:s.type)&&"levelsElements/Point"===(null===(c=f.config)||void 0===c?void 0:c.path)&&(o=f)}catch(t){a.e(t)}finally{a.f()}o||""===i||i.endsWith("Point")||(y=e.queryPath(i),o=EditorAPI.addElement(e,"Component","levelsElements/Point"),p=y.x,h=y.y,o.updateEditorProp("layout.default.x.value",p),y.updateEditorProp("layout.default.x.value",0),o.updateEditorProp("layout.default.y.value",h),y.updateEditorProp("layout.default.y.value",0),EditorAPI.changeElementParent(y,o)),d=n.split(","),b=Ci(d),t.prev=14,b.s();case 16:if((v=b.n()).done){t.next=31;break}if(""!==(m=(m=v.value).trim())){t.next=21;break}return t.abrupt("continue",29);case 21:if(g=r.queryPath(m,!0)){t.next=24;break}return t.abrupt("continue",29);case 24:w=g.toGlobal({x:0,y:0}),P=o.toLocal(w),g.updateEditorProp("layout.default.x.value",P.x),g.updateEditorProp("layout.default.y.value",P.y),EditorAPI.changeElementParent(g,o);case 29:t.next=16;break;case 31:t.next=36;break;case 33:t.prev=33,t.t0=t.catch(14),b.e(t.t0);case 36:return t.prev=36,b.f(),t.finish(36);case 39:o&&e.updateEditorProp("props.target",o.getElementPath()),EditorAPI.setCurrentElement(e);case 41:case"end":return t.stop()}}),t,null,[[14,33,36,39]])}))),function(t){return o.apply(this,arguments)})},{key:"onEditorCreate",value:function(t){t.editorActions={"Auto links":l.autoLinks,"Auto structure":l.autoStructure}}}],n&&Zi(e.prototype,n),r&&Zi(e,r),l}(l.Z.Container);Wi(Ii,"defaultProps",{target:{type:"string",value:""},waypoint:{type:"string",value:""},trigger:{type:"string",value:""},duration:{type:"number",value:1e3},loop:{type:"boolean",value:!1},shouldRotate:{type:"boolean",value:!1},shouldMove:{type:"boolean",value:!0},autoStart:{type:"boolean",value:!1},repeat:{type:"boolean",value:!1}});const Mi=Ii;function Ui(t){return Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui(t)}function Ni(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fi(t,e){return Fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fi(t,e)}function Xi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ji(t);if(e){var o=Ji(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yi(this,n)}}function Yi(t,e){return!e||"object"!==Ui(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ji(t){return Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ji(t)}function Gi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Hi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fi(t,e)}(i,t);var e,n,r,o=Xi(i);function i(){return Ni(this,i),o.apply(this,arguments)}return e=i,r=[{key:"getTargetAngle",value:function(t){for(var e=t.getProp("targetAngle")*Math.PI/180,n=t;n;)e-=n.rotation,n=n.parent;return t.scale.x<0&&(e=Math.PI-e),e}},{key:"updateView",value:function(t){if(t&&t.exists("platform")){var e=t.query("platform");e.scale.x=t.getProp("platformScale"),e.position.x=t.getProp("platformX"),t.query("block").position.x=e.position.x+-e.width/2+8.5,t.query("jumpLeft").scale.x=2*e.scale.x;var n=t.query("spike");if(n.position.x=e.position.x+e.width/2-25,n.visible=t.getProp("spikeVisible"),l.Z.editorMode){t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.lineStyle(2,16711680),t.debugView.moveTo(0,0);var r=i.getTargetAngle(t);t.debugView.lineTo(100*Math.cos(r),100*Math.sin(r))}}}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"onCreate",value:function(){i.updateView(this),this.query("jumpLeft").config.props.jumpForceScale=this.getProp("jumpForceScale")}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("block").tint=t,this.query("holder").tint=t,this.query("circle").tint=t,this.query("back").tint=e}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=(this.getWorldPosition(0,0),this.getWorldScale()),n=this.getWorldRotation(),r=a().Bodies.rectangle(this.getProp("platformX"),-8,228,17);a().Body.scale(r,e.x*this.getProp("platformScale"),e.y);var o=a().Bodies.rectangle(this.getProp("platformX")-100*e.x*this.getProp("platformScale"),-20,17,38);a().Body.scale(o,e.x,e.y),this.body=a().Body.create({parts:[r,o],isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.setCentre(this.body,{x:0,y:0}),a().Body.setPosition(this.body,t),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"handlePlayerCollision",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r={angle:this.normalizeAngle(this.body.angle)};new ut.ZP.Tween(r).to({angle:this.getRotationAngle(this.getProp("targetAngle"))},this.getProp("rotateDuration")).onUpdate((function(){return a().Body.setAngle(n.body,r.angle)})).start()}}}])&&zi(e.prototype,n),r&&zi(e,r),i}(u.Z);Gi(Hi,"label","TwistLSpike"),Gi(Hi,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.5},platformX:{type:"number",value:0},targetAngle:{type:"number",value:0},rotateDuration:{type:"number",value:250},jumpForceScale:{type:"number",value:1},spikeVisible:{type:"boolean",value:!0}});const $i=Hi;function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function Qi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ea(t,e){return ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ea(t,e)}function na(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=oa(t);if(e){var o=oa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ra(this,n)}}function ra(t,e){return!e||"object"!==Ki(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function oa(t){return oa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},oa(t)}function ia(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var aa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ea(t,e)}(u,t);var e,n,r,i=na(u);function u(){return Qi(this,u),i.apply(this,arguments)}return e=u,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new o.TC,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(2500249,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:u.label,isSensor:!0,render:{strokeStyle:"#262699"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){this.parent&&void 0!==this.parent.playerJumpDirection&&(e.jumpDirection=this.parent.playerJumpDirection),e.jumpForceScale=this.getProp("jumpForceScale")}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.jumpDirection=s.Z.JUMP_DIRECTION.NONE,e.jumpForceScale=1}},{key:"activate",value:function(){a().World.add(this.level.world,this.body)}},{key:"deactivate",value:function(){a().World.remove(this.level.world,this.body)}}])&&ta(e.prototype,n),r&&ta(e,r),u}(u.Z);ia(aa,"label","JumpByParent"),ia(aa,"defaultProps",{data:{type:"json",value:"{}"},jumpForceScale:{type:"number",value:1}});const ua=aa;function la(t){return la="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},la(t)}function sa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fa(t,e){return fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fa(t,e)}function ya(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ha(t);if(e){var o=ha(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pa(this,n)}}function pa(t,e){return!e||"object"!==la(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ha(t){return ha=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ha(t)}function da(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fa(t,e)}(i,t);var e,n,r,o=ya(i);function i(){return sa(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.body.jumpLocked=!1}}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}}])&&ca(e.prototype,n),r&&ca(e,r),i}(u.Z);da(ba,"label","MovePlatform"),da(ba,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0}});const va=ba;function ma(t){return ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(t)}function ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function wa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pa(t,e){return Pa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pa(t,e)}function ka(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xa(t);if(e){var o=xa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sa(this,n)}}function Sa(t,e){return!e||"object"!==ma(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xa(t){return xa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xa(t)}function Oa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ra=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pa(t,e)}(i,t);var e,n,r,o=ka(i);function i(){return ga(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.circle(t.x,t.y,5,{isStatic:!0,isSensor:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#006666"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this}}}])&&wa(e.prototype,n),r&&wa(e,r),i}(u.Z);Oa(Ra,"label","Point"),Oa(Ra,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0}});const ja=Ra;function Ca(t){return Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(t)}function _a(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Ba(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ea(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ea(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function Ea(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Aa(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ta(t,e){return Ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ta(t,e)}function Va(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=La(t);if(e){var o=La(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qa(this,n)}}function qa(t,e){return!e||"object"!==Ca(e)&&"function"!=typeof e?Da(t):e}function Da(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function La(t){return La=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},La(t)}function Wa(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ia=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ta(t,e)}(c,t);var e,n,r,o,i,u=Va(c);function c(){var t;Aa(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Wa(Da(t=u.call.apply(u,[this].concat(n))),"activated",!1),t}return e=c,n=[{key:"onCreate",value:function(){c.updateView(this)}},{key:"setColors",value:function(t,e){var n,r=Ba(this.query("pivot").children);try{for(r.s();!(n=r.n()).done;)n.value.tint=t}catch(t){r.e(t)}finally{r.f()}}},{key:"sync",value:function(){this.body&&this.syncBodyAndView(this.body,this.query("pivot"))}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,56,17,{isStatic:!0,label:c.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#ff9933"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setCentre(this.body,{x:0,y:32*e.y},!0),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this.query("pivot"),this.body.jumpLocked=!0,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerStartCollision,this)}}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}},{key:"handlePlayerStartCollision",value:(o=regeneratorRuntime.mark((function t(e,n){var r,o,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.activated){t.next=2;break}return t.abrupt("return");case 2:return this.activated=!0,r=this.body.position.y,o={position:r},t.next=7,new ut.ZP.Tween(o).to({position:r+this.getProp("stopY")},this.getProp("compressionTime")).onUpdate((function(){a().Body.setPosition(i.body,{x:i.body.position.x,y:o.position})})).start();case 7:return a().Body.setAngularVelocity(n.body,0),a().Body.setAngularSpeed(n.body,0),a().Body.setVelocity(n.body,{x:this.getProp("forceX"),y:this.getProp("forceY")}),t.next=12,new ut.ZP.Tween(o).to({position:r+this.getProp("releaseY")},this.getProp("releaseTime")).onUpdate((function(){a().Body.setPosition(i.body,{x:i.body.position.x,y:o.position})})).start();case 12:return t.next=14,new ut.ZP.Tween(o).to({position:r},1e3).easing(ut.ZP.Easing.Elastic.Out).onUpdate((function(){a().Body.setPosition(i.body,{x:i.body.position.x,y:o.position})})).start();case 14:return t.next=16,new qt.Z(this.getProp("coolDownTime"));case 16:this.activated=!1;case 17:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){_a(i,n,r,a,u,"next",t)}function u(t){_a(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}],r=[{key:"calculateTrajectory",value:function(t,e,n,r,o){for(var i=[],a=0;a<r;a++){var u=a*o,l=t*u,s=e*u+.5*n*u*u;i.push({x:l,y:s})}return i}},{key:"updateView",value:function(t){t.exists("pivot")&&(t.query("pivot").mask=t.query("springMask"),l.Z.editorMode&&(t.debugView||(t.debugView=new PIXI.Graphics,t.debugView._editorInternal=!0,t.addChild(t.debugView)),requestAnimationFrame((function(){var e=c.calculateTrajectory(t.getProp("forceX"),t.getProp("forceY"),.45,20,2.5);t.debugView.clear();var n,r=Ba(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;t.debugView.beginFill(16748544,1),t.debugView.drawCircle(o.x,o.y,5),t.debugView.endFill()}}catch(t){r.e(t)}finally{r.f()}for(var i=t.rotation,a=t.parent;a;)i+=a.rotation,a=a.parent;t.debugView.rotation=-i}))))}},{key:"onEditorUpdate",value:function(t){c.updateView(t)}},{key:"onEditorCreate",value:function(t){c.updateView(t)}}],n&&Za(e.prototype,n),r&&Za(e,r),c}(u.Z);Wa(Ia,"label","SpringObj"),Wa(Ia,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},stopY:{type:"number",value:85},compressionTime:{type:"number",value:700},releaseY:{type:"number",value:-85},releaseTime:{type:"number",value:200},forceX:{type:"number",value:0},forceY:{type:"number",value:-15},coolDownTime:{type:"number",value:1e3}});const Ma=Ia;function Ua(t){return Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ua(t)}function Na(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fa(t,e){return Fa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fa(t,e)}function Xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ja(t);if(e){var o=Ja(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ya(this,n)}}function Ya(t,e){return!e||"object"!==Ua(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ja(t){return Ja=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ja(t)}function Ga(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ha=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fa(t,e)}(i,t);var e,n,r,o=Xa(i);function i(){return Na(this,i),o.apply(this,arguments)}return e=i,r=[{key:"updateView",value:function(t){EditorRuntime.editorMode&&(t.debugView||(t.debugView=new PIXI.Graphics,t.addChild(t.debugView))),t.debugView.clear(),t.debugView.beginFill(10066176,.5),t.debugView.drawRect(-50,-50,100,100),t.debugView.endFill()}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],(n=[{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,100,100,{isStatic:!0,label:i.label,isSensor:!0,render:{strokeStyle:"#999900"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"handlePlayerCollision",value:function(t,e){e.jumpLocked=!0}},{key:"handlePlayerCollisionEnd",value:function(t,e){e.jumpLocked=!1}},{key:"activate",value:function(){a().World.add(this.level.world,this.body)}},{key:"deactivate",value:function(){a().World.remove(this.level.world,this.body)}}])&&za(e.prototype,n),r&&za(e,r),i}(u.Z);Ga(Ha,"label","LockLaunchState"),Ga(Ha,"defaultProps",{data:{type:"json",value:"{}"},jumpForceScale:{type:"number",value:1}});const $a=Ha;function Ka(t){return Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ka(t)}function Qa(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return tu(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tu(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function tu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function eu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function nu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ru(t,e){return ru=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ru(t,e)}function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=uu(t);if(e){var o=uu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return iu(this,n)}}function iu(t,e){return!e||"object"!==Ka(e)&&"function"!=typeof e?au(t):e}function au(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function uu(t){return uu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},uu(t)}function lu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var su=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ru(t,e)}(i,t);var e,n,r,o=ou(i);function i(){var t;eu(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return lu(au(t=o.call.apply(o,[this].concat(n))),"player",null),t}return e=i,(n=[{key:"onCreate",value:function(){var t=this.query("effect");t.scale.x=1/this.scale.x,t.scale.y=1/this.scale.y,t.proton.autoDestroy=!1;var e,n=228*this.config.layout.default.scaleX.value*.9,r=Qa(t.proton.emitters[0].initializes);try{for(r.s();!(e=r.n()).done;){var o=e.value;"Position"===o.name&&(o.zone.x=-n/2,o.zone.width=n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"setColors",value:function(t,e){this.query("platform").tint=t;var n=this.query("effect"),r=Vt.Z.getHexColor(t);Vt.Z.setParticlesColor(n,r)}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,228,17,{isStatic:!0,label:i.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff66"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.body.jumpLocked=!1,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this),this.level.addActiveCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionActive,this),this.level.addEndCollisionListener(this.body,s.Z.label,this.handlePlayerCollisionEnd,this)}}},{key:"dispose",value:function(){this.query("effect").dispose()}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}},{key:"handlePlayerCollision",value:function(t,e){var n=e.toGlobal({x:0,y:0});(n=this.toLocal(n)).y>-20||(this.player=e,this.playerX=e.body.position.x,this.handlePlayerCollisionActive(t,e))}},{key:"handlePlayerCollisionActive",value:function(t,e){this.player&&void 0!==this.playerX&&(a().Body.setPosition(this.player.body,{x:this.playerX,y:this.player.body.position.y}),a().Body.setVelocity(this.player.body,{x:0,y:0}),a().Body.setAngularVelocity(this.player.body,0))}},{key:"handlePlayerCollisionEnd",value:function(t,e){this.player=null,this.playerX=void 0}}])&&nu(e.prototype,n),r&&nu(e,r),i}(u.Z);lu(su,"label","StickyPlatform"),lu(su,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0}});const cu=su;function fu(t){return fu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fu(t)}function yu(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function pu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function du(t,e){return du=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},du(t,e)}function bu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=gu(t);if(e){var o=gu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vu(this,n)}}function vu(t,e){return!e||"object"!==fu(e)&&"function"!=typeof e?mu(t):e}function mu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gu(t){return gu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},gu(t)}function wu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Pu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&du(t,e)}(c,t);var e,n,r,i,u,s=bu(c);function c(){var t;pu(this,c);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return wu(mu(t=s.call.apply(s,[this].concat(n))),"rotationIndex",0),wu(mu(t),"rotationData",null),wu(mu(t),"animator",null),wu(mu(t),"timerView",null),t}return e=c,n=[{key:"onCreate",value:function(){c.updateView(this),this.rotationData=this.getProp("rotationData"),this.rotationIndex=this.rotationData.rotationIndex;for(var t=0;t<this.rotationData.timedRotations.length;t++)0===this.rotationData.timedRotations[t].rotationDuration&&(this.rotationData.timedRotations[t].rotationDuration=.02*Math.abs(this.rotationData.timedRotations[t].amount))}},{key:"setColors",value:function(t,e){this.query("platform").tint=t,this.query("circle").tint=t,this.query("holder").tint=t,this.query("back").tint=e,this.config.props.timerColor=Vt.Z.getHexColor(t)}},{key:"start",value:function(){this.timerView=new o.TC,this.addChild(this.timerView),this.timerView.scale.set(.1),this.timerView.rotation=-this.rotation,this.startRotation()}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(0,0,228,17,{isStatic:!0,label:c.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#ff9966"}});var r=e.x*this.getProp("platformScale"),o=e.y,i=100*r;a().Body.scale(this.body,r,o),a().Body.setCentre(this.body,{x:-i,y:0}),a().Body.setAngle(this.body,n),a().Body.setPosition(this.body,{x:t.x,y:t.y}),a().World.add(this.level.world,this.body),this.body._localAngle=this.rotation,this.body.view=this,this.body.jumpLocked=!1}}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}},{key:"dispose",value:function(){var t;null===(t=this.animator)||void 0===t||t.stop()}},{key:"startRotation",value:(i=regeneratorRuntime.mark((function t(){var e,n,r,o,i,u,l,s,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.rotationData.timedRotations[this.rotationIndex]){t.next=3;break}return t.abrupt("return");case 3:if(n=this.rotationData.easeType,e.easeOverride>=0&&(n=e.easeOverride),r=c.Easings[n]||ut.ZP.Easing.Linear.None,0===e.amount){t.next=19;break}return this.animateTimer(0,100,.75*e.rotationDuration),o=this.normalizeAngle(this.body.angle),a().Body.setAngle(this.body,o),i=Vt.Z.degreesToRadians(e.amount),u=this.normalizeAngle(o+i),l=this.normalizeAngle(this.body._localAngle+i),s={angle:o,localAngle:this.normalizeAngle(this.body._localAngle)},this.animator=new ut.ZP.Tween(s).to({angle:this.getRotationAngle(Vt.Z.radiansToDegrees(u)),localAngle:this.getRotationAngle(Vt.Z.radiansToDegrees(l),Vt.Z.radiansToDegrees(s.localAngle))},1e3*e.rotationDuration).easing(r).onUpdate((function(){a().Body.setAngle(f.body,s.angle),f.body._localAngle=s.localAngle})).start(),t.next=17,this.animator;case 17:t.next=23;break;case 19:return this.animateTimer(100,0,e.rotationDuration),this.animator=new qt.Z(1e3*e.rotationDuration).start(),t.next=23,this.animator;case 23:this.rotationIndex++,this.rotationIndex>=this.rotationData.timedRotations.length&&(this.rotationIndex=0),this.startRotation();case 26:case"end":return t.stop()}}),t,this)})),u=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){yu(o,n,r,a,u,"next",t)}function u(t){yu(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return u.apply(this,arguments)})},{key:"animateTimer",value:function(t,e,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ut.ZP.Easing.Linear.None;this.timerView.clear();var i={value:t};new ut.ZP.Tween(i).to({value:e},1e3*n).easing(o).onUpdate((function(){if(r.timerView){var t=r.getWorldRotation();r.timerView.rotation=-t;var e=2*Math.PI*(i.value/100)+Math.PI/2;r.timerView.clear(),r.timerView.beginFill(parseInt("0x"+r.getProp("timerColor").substring(1),16)),r.timerView.moveTo(0,0),r.timerView.lineTo(0,130),r.timerView.arc(0,0,130,Math.PI/2,e,!1),r.timerView.lineTo(0,0),r.timerView.endFill()}})).start()}}],r=[{key:"updateView",value:function(t){t&&t.exists("platform")&&(t.query("platform").scale.x=t.getProp("platformScale"),l.Z.editorMode&&(t.debugView||(t.debugView=new o.TC,t.debugView._editorInternal=!0,t.addChild(t.debugView)),t.debugView.clear(),t.debugView.beginFill(parseInt("0x"+t.getProp("timerColor").substring(1),16),1),t.debugView.drawCircle(0,0,13),t.debugView.endFill()))}},{key:"onEditorResize",value:function(t){c.updateView(t)}},{key:"onEditorUpdate",value:function(t){c.updateView(t)}},{key:"onEditorCreate",value:function(t){c.updateView(t)}}],n&&hu(e.prototype,n),r&&hu(e,r),c}(u.Z);wu(Pu,"label","TimedPlatform"),wu(Pu,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},platformScale:{type:"number",value:.4289583},timerColor:{type:"color",value:"#00ff00"},rotationData:{type:"json",value:"{}"}}),wu(Pu,"Easings",{0:ut.ZP.Easing.Back.InOut});const ku=Pu;n(2075);function Su(t){return Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Su(t)}function xu(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Ou(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ru(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ju(t,e){return ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ju(t,e)}function Cu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Eu(t);if(e){var o=Eu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(t,e){return!e||"object"!==Su(e)&&"function"!=typeof e?Bu(t):e}function Bu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Eu(t){return Eu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Eu(t)}function Au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ju(t,e)}(l,t);var e,n,r,o,i,u=Cu(l);function l(){var t;Ou(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Au(Bu(t=u.call.apply(u,[this].concat(n))),"player",null),Au(Bu(t),"active",!0),Au(Bu(t),"runsCount",0),t}return e=l,n=[{key:"onCreate",value:function(){this.query("view").rotation=Math.random()*Math.PI*2,this.animator=new ut.ZP.Tween(this.query("view")).to({rotation:this.query("view").rotation+2*Math.PI},5e3).repeat(1/0).start()}},{key:"dispose",value:function(){var t;null===(t=this.animator)||void 0===t||t.stop()}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.circle(t.x,t.y,64,{isStatic:!0,isSensor:!0,label:l.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#333333"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.level.addStartCollisionListener(this.body,s.Z.label,this.handlePlayerCollision,this)}}},{key:"setColors",value:function(t,e){this.query("view").tint=t,this.query("view/center").tint=t,this.query("view/point1").tint=t,this.query("view/point2").tint=t;var n=Vt.Z.getHexColor(t),r=this.query("view/effect1");Vt.Z.setParticlesColor(r,n),r=this.query("view/effect2"),Vt.Z.setParticlesColor(r,n)}},{key:"handlePlayerCollision",value:(o=regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.active){t.next=2;break}return t.abrupt("return");case 2:if(this.level.physEngine.gravity.y=-this.level.physEngine.gravity.y,this.active=!1,this.visible=!1,this.runsCount++,!(this.runsCount<this.getProp("timesToRun"))){t.next=11;break}return t.next=9,new qt.Z(1e3);case 9:this.active=!0,this.visible=!0;case 11:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){xu(i,n,r,a,u,"next",t)}function u(t){xu(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t,e){return i.apply(this,arguments)})}],n&&Ru(e.prototype,n),r&&Ru(e,r),l}(u.Z);Au(Zu,"label","StickyPlatform"),Au(Zu,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},timesToRun:{type:"number",value:1}});const Tu=Zu;n(5977);var Vu=n(3231);function qu(t){return qu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qu(t)}function Du(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Lu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wu(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Iu(t,e,n){return Iu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fu(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Iu(t,e,n||t)}function Mu(t,e){return Mu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Mu(t,e)}function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Fu(t);if(e){var o=Fu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nu(this,n)}}function Nu(t,e){return!e||"object"!==qu(e)&&"function"!=typeof e?zu(t):e}function zu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fu(t){return Fu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Fu(t)}function Xu(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Yu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mu(t,e)}(l,t);var e,n,r,o,i,u=Uu(l);function l(){var t;Lu(this,l);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Xu(zu(t=u.call.apply(u,[this].concat(n))),"activated",!1),t}return e=l,n=[{key:"onCreate",value:function(){this.query("view").alpha=0,this.effect=new Vu.Z(228,17),this.addChild(this.effect)}},{key:"prepare",value:(o=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Iu(Fu(l.prototype),"prepare",this).call(this,e),this.getProp("showOnStart")){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,new qt.Z(this.getProp("delayBeforeOnStartShow"));case 5:this.showEffect();case 6:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Du(i,n,r,a,u,"next",t)}function u(t){Du(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"setColors",value:function(t,e){this.query("view").tint=t,this.effect.tint=t}},{key:"createBody",value:function(){if(this.isVisible()){var t=this.getWorldPosition(),e=this.getWorldScale(),n=this.getWorldRotation();this.body=a().Bodies.rectangle(t.x,t.y,228,17,{isStatic:!0,label:l.label,mass:this.getProp("mass"),restitution:this.getProp("restitution"),friction:this.getProp("friction"),frictionAir:this.getProp("frictionAir"),render:{strokeStyle:"#00ff00"}}),a().Body.scale(this.body,e.x,e.y),a().Body.setAngle(this.body,n),a().World.add(this.level.world,this.body),this.body.view=this,this.body.jumpLocked=!1,this.sensor=a().Bodies.circle(t.x,t.y,this.getProp("minDistance"),{isStatic:!0,isSensor:!0,label:l.sensorLabel,render:{strokeStyle:"#ff0066"}}),a().World.add(this.level.world,this.sensor),this.level.addStartCollisionListener(this.sensor,s.Z.label,this.showEffect,this)}}},{key:"showEffect",value:function(t,e){var n=this;if(!this.activated){this.activated=!0;var r=this.query("view");this.effect.show(),new ut.ZP.Tween(r).to({alpha:1},500).easing(ut.ZP.Easing.Exponential.Out).delay(this.getProp("showDelay")).onComplete((function(){n.effect&&(n.removeChild(n.effect),n.effect.dispose(),n.effect=null)})).start()}}},{key:"lockJump",value:function(){this.body.jumpLocked=!0}},{key:"unlockJump",value:function(){this.body.jumpLocked=!1}},{key:"dispose",value:function(){this.effect&&(this.effect.dispose(),this.effect=null)}}],n&&Wu(e.prototype,n),r&&Wu(e,r),l}(u.Z);Xu(Yu,"label","InvisiblePlatform"),Xu(Yu,"sensorLabel","InvisibleSensor"),Xu(Yu,"defaultProps",{data:{type:"json",value:"{}"},mass:{type:"number",value:1},restitution:{type:"number",value:0},friction:{type:"number",value:.001},frictionAir:{type:"number",value:0},minDistance:{type:"number",value:300},showDelay:{type:"number",value:500},showOnStart:{type:"boolean",value:!1},delayBeforeOnStartShow:{type:"number",value:300}});const Ju=Yu;var Gu=n(8706);function Hu(t){return Hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu(t)}function $u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ku(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qu(t,e){return Qu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qu(t,e)}function tl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rl(t);if(e){var o=rl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return el(this,n)}}function el(t,e){return!e||"object"!==Hu(e)&&"function"!=typeof e?nl(t):e}function nl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rl(t){return rl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rl(t)}function ol(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const il=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qu(t,e)}(i,t);var e,n,r,o=tl(i);function i(){var t;$u(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ol(nl(t=o.call.apply(o,[this].concat(n))),"pressed",!1),ol(nl(t),"disabled",!1),t}return e=i,(n=[{key:"onCreate",value:function(){this.root=this.query("root"),this.overlay=this.query("root/overlay"),this.overlay.alpha=0,this.tween=null,this.root.interactive=!0,this.root.buttonMode=!0,this.root.on("pointerdown",this.onPointerDown,this),this.root.on("pointerup",this.onPointerUp,this),this.root.on("pointerupoutside",this.onPointerCancel,this),this.root.on("pointercancel",this.onPointerCancel,this)}},{key:"onPointerDown",value:function(t){var e;null===(e=this.tween)||void 0===e||e.stop(),this.tween=new ut.ZP.Tween(this.overlay).to({alpha:1},100).start(),this.pressed=!0,Xo.Z.playClick(),t.stopPropagation()}},{key:"onPointerUp",value:function(t){this.pressed&&this.emit("action",this),this.onPointerCancel(),t.stopPropagation()}},{key:"onPointerCancel",value:function(t){var e,n=this;null===(e=this.tween)||void 0===e||e.stop(),this.tween=new ut.ZP.Tween(this.overlay).to({alpha:0},100).onComplete((function(){n.overlay.alpha=0})).start(),this.pressed=!1}},{key:"enable",value:function(){this.disabled=!1,this.root.buttonMode=!0,this.root.on("pointerdown",this.onPointerDown,this),this.root.on("pointerup",this.onPointerUp,this),this.root.on("pointerupoutside",this.onPointerCancel,this),this.root.on("pointercancel",this.onPointerCancel,this)}},{key:"disable",value:function(){this.disabled=!0,this.root.buttonMode=!1,this.root.off("pointerdown",this.onPointerDown,this),this.root.off("pointerup",this.onPointerUp,this),this.root.off("pointerupoutside",this.onPointerCancel,this),this.root.off("pointercancel",this.onPointerCancel,this)}}])&&Ku(e.prototype,n),r&&Ku(e,r),i}(l.Z.Component);function al(t){return al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},al(t)}function ul(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ll(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function sl(t,e,n){return sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},sl(t,e,n||t)}function cl(t,e){return cl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},cl(t,e)}function fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=pl(t);if(e){var o=pl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yl(this,n)}}function yl(t,e){return!e||"object"!==al(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pl(t){return pl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},pl(t)}var hl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cl(t,e)}(a,t);var e,n,r,i=fl(a);function a(){return ul(this,a),i.apply(this,arguments)}return e=a,r=[{key:"updateView",value:function(t){var e=t.query("root/iconCont"),n=t.query("root/iconCont/icon"),r=t.query("root/iconCont/iconShadow"),i="icons/".concat(t.getProp("icon")),a=t.getProp("iconScale"),u=t.getProp("iconRotation");n.texture=o.xE.from(i),n.rotation=u*Math.PI/180,r.texture=o.xE.from(i),r.x=t.getProp("shadowOffsetX"),r.y=t.getProp("shadowOffsetY"),r.rotation=u*Math.PI/180,e.x=t.getProp("iconX"),e.y=t.getProp("iconY"),e.scale.set(a);var s=parseInt(t.getProp("backColor").replace("#","0x"));l.Z.editorMode?(t.query("root/back").view.tint=s,t.query("root/shadow").view.tint=s):(t.query("root/back").tint=s,t.query("root/shadow").tint=s),s=parseInt(t.getProp("iconColor").replace("#","0x")),n.tint=s,r.tint=s}},{key:"onEditorResize",value:function(t){a.updateView(t)}},{key:"onEditorUpdate",value:function(t){a.updateView(t)}},{key:"onEditorCreate",value:function(t){a.updateView(t)}}],(n=[{key:"onCreate",value:function(){sl(pl(a.prototype),"onCreate",this).call(this),a.updateView(this)}}])&&ll(e.prototype,n),r&&ll(e,r),a}(il);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(hl,"defaultProps",{backColor:{type:"color",value:"#0B3642"},iconColor:{type:"color",value:"#ffffff"},icon:{type:"list",options:["pause","arrow","ball","home","restart","gift","info"],value:"pause"},iconScale:{type:"number",value:1},iconX:{type:"number",value:0},iconY:{type:"number",value:0},iconRotation:{type:"number",value:0},shadowOffsetX:{type:"number",value:0},shadowOffsetY:{type:"number",value:6}});const dl=hl;var bl=n(1328);function vl(t){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(t)}function ml(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wl(t,e,n){return wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},wl(t,e,n||t)}function Pl(t,e){return Pl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Pl(t,e)}function kl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=xl(t);if(e){var o=xl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sl(this,n)}}function Sl(t,e){return!e||"object"!==vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xl(t){return xl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},xl(t)}var Ol=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pl(t,e)}(i,t);var e,n,r,o=kl(i);function i(){return ml(this,i),o.apply(this,arguments)}return e=i,n=[{key:"onCreate",value:function(){wl(xl(i.prototype),"onCreate",this).call(this),i.updateView(this)}},{key:"setBackColor",value:function(t){var e=this.query("root/back");e.clear(),e.beginFill(t),e.drawRoundedRect(-Number(e.config.width)/2,-Number(e.config.height)/2,Number(e.config.width),Number(e.config.height),Number(e.config.radius)),e.endFill()}},{key:"showShadow",value:function(t){this.query("root/shadow").visible=t}}],r=[{key:"updateView",value:function(t){var e=t.query("root/labelCont/label"),n=t.query("root/labelCont/labelShadow"),r=(0,bl.Z)(t.getProp("label")).toUpperCase();e.text=r,n.text=r}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],n&&gl(e.prototype,n),r&&gl(e,r),i}(il);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Ol,"defaultProps",{label:{type:"string",value:"Button"}});const Rl=Ol;function jl(t){return jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jl(t)}function Cl(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _l(t,e,n){return _l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},_l(t,e,n||t)}function Bl(t,e){return Bl=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Bl(t,e)}function El(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zl(t);if(e){var o=Zl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Al(this,n)}}function Al(t,e){return!e||"object"!==jl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zl(t){return Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zl(t)}const Tl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bl(t,e)}(i,t);var e,n,r,o=El(i);function i(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t)).id=e,n}return e=i,(n=[{key:"onCreate",value:function(){_l(Zl(i.prototype),"onCreate",this).call(this),this.number=this.root.query("labelCont/number"),this.number.shadow=this.root.query("labelCont/numberShadow"),this.number.text=this.id,this.number.shadow.text=this.id,this.icon=this.root.query("icon"),this.icon.visible=!1}},{key:"disable",value:function(){_l(Zl(i.prototype),"disable",this).call(this),this.number.visible=!1,this.number.shadow.visible=!1,this.icon.visible=!0}}])&&Cl(e.prototype,n),r&&Cl(e,r),i}(il);function Vl(t){return Vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vl(t)}function ql(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Dl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ll(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wl(t,e,n){return Wl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nl(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Wl(t,e,n||t)}function Il(t,e){return Il=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Il(t,e)}function Ml(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Nl(t);if(e){var o=Nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ul(this,n)}}function Ul(t,e){return!e||"object"!==Vl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nl(t){return Nl=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Nl(t)}var zl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Il(t,e)}(u,t);var e,n,r,o,i,a=Ml(u);function u(){return Dl(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){Wl(Nl(u.prototype),"onCreate",this).call(this),this.root.alpha=0}},{key:"show",value:(o=regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.createAnimation(this,"show",!1,!0);case 2:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ql(i,n,r,a,u,"next",t)}function u(t){ql(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],n&&Ll(e.prototype,n),r&&Ll(e,r),u}(il);const Fl=zl;var Xl=n(6512),Yl=n(8175),Jl=n(6133);function Gl(t){return Gl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gl(t)}function Hl(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function $l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Hl(i,r,o,a,u,"next",t)}function u(t){Hl(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Kl(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ql(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ts(t,e,n){return ts="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=os(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},ts(t,e,n||t)}function es(t,e){return es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},es(t,e)}function ns(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=os(t);if(e){var o=os(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rs(this,n)}}function rs(t,e){return!e||"object"!==Gl(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function os(t){return os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},os(t)}var is=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&es(t,e)}(u,t);var e,n,r,o,i,a=ns(u);function u(){return Kl(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:(i=$l(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:ts(os(u.prototype),"onCreate",this).call(this),this.cost=Jl.level.skipCost,this.price=this.bindings.price,this.price.text=this.cost,this.shine=this.bindings.shine,this.shine.alpha=0,this.canBeMotivated=!0,this.animations=null,this.animationCallback=this.motivate.bind(this),Xl.Z.getMoney()>this.cost&&this.motivate(),Yl.Z.observer.on("moneyUpdate",this.updateMotivationPossibility,this);case 12:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPointerUp",value:(o=$l(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.pressed&&this.emit("action",this),this.onPointerCancel(),e.stopPropagation();case 3:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"updateMotivationPossibility",value:function(t){this.canBeMotivated=t>this.cost}},{key:"motivate",value:function(){var t=this;if(null===this.animations&&this.canBeMotivated){var e=l.Z.createAnimation(this,"motivate",!1,!0),n=l.Z.createAnimation(this,"star",!1,!0);this.animations=Promise.all([e,n]),this.animations.then($l(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.animations=null,e.next=3,new qt.Z(500);case 3:null===(n=t.animationCallback)||void 0===n||n.call(t);case 4:case"end":return e.stop()}}),e)}))))}}},{key:"dispose",value:function(){this.canBeMotivated=!1,Yl.Z.observer.off("moneyUpdate",this.updateMotivationPossibility,this)}}],n&&Ql(e.prototype,n),r&&Ql(e,r),u}(il);const as=is;function us(t){return us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},us(t)}function ls(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function ss(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fs(t,e){return fs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fs(t,e)}function ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ds(t);if(e){var o=ds(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ps(this,n)}}function ps(t,e){return!e||"object"!==us(e)&&"function"!=typeof e?hs(t):e}function hs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ds(t){return ds=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ds(t)}function bs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fs(t,e)}(u,t);var e,n,r,o,i,a=ys(u);function u(){var t;ss(this,u);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return bs(hs(t=a.call.apply(a,[this].concat(n))),"busy",!1),t}return e=u,n=[{key:"onCreate",value:function(){this.update(),this.query("button").on("action",this.claimGift,this)}},{key:"update",value:function(){if(!Yl.Z.paused){var t=Xl.Z.isDailyBonusAwailable(),e=this.query("button");if(t)e.disabled&&e.enable(),this.query("overlay").visible=!1,this.query("badge/ready").visible=!0,this.query("badge/countdown").visible=!1;else{e.disabled||e.disable(),this.query("overlay").visible=!0,this.query("badge/ready").visible=!1,this.query("badge/countdown").visible=!0;var n=Math.floor(Xl.Z.getDailyBonusTimeout()/1e3),r=Math.floor(n/3600),o=Math.floor(n%3600/60),i=n%60;r<10&&(r="0"+r),o<10&&(o="0"+o),i<10&&(i="0"+i),this.query("badge/countdown/value").text="".concat(r,":").concat(o,":").concat(i)}}}},{key:"claimGift",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Xl.Z.isDailyBonusAwailable()){t.next=2;break}return t.abrupt("return");case 2:if(!this.busy){t.next=4;break}return t.abrupt("return");case 4:return this.busy=!0,t.next=7,l.Z.createComponent("overlays/DailyBonus");case 7:e=t.sent,Yl.Z.currentWindow.addChild(e),this.busy=!1;case 10:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){ls(i,n,r,a,u,"next",t)}function u(t){ls(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"tick",value:function(t){this.update()}}],n&&cs(e.prototype,n),r&&cs(e,r),u}(l.Z.Component);const ms=vs;function gs(t){return gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gs(t)}function ws(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ks(t,e){return ks=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ks(t,e)}function Ss(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Os(t);if(e){var o=Os(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xs(this,n)}}function xs(t,e){return!e||"object"!==gs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Os(t){return Os=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Os(t)}const Rs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ks(t,e)}(i,t);var e,n,r,o=Ss(i);function i(){return ws(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"onCreate",value:function(){this.themeDisabled=Xl.Z.get("levelsThemeDisabled",!1),this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",this.toggleState,this),this.update()}},{key:"update",value:function(){this.themeDisabled?(this.query("classic").visible=!1,this.query("theme").visible=!0):(this.query("classic").visible=!0,this.query("theme").visible=!1)}},{key:"toggleState",value:function(){this.themeDisabled=!this.themeDisabled,Xl.Z.set("levelsThemeDisabled",this.themeDisabled),this.update(),this.emit("toggle",this.themeDisabled)}}])&&Ps(e.prototype,n),r&&Ps(e,r),i}(l.Z.Component);function js(t){return js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},js(t)}function Cs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Bs(t,e,n){return Bs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ts(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Bs(t,e,n||t)}function Es(t,e){return Es=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Es(t,e)}function As(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ts(t);if(e){var o=Ts(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zs(this,n)}}function Zs(t,e){return!e||"object"!==js(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ts(t)}var Vs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Es(t,e)}(i,t);var e,n,r,o=As(i);function i(){return Cs(this,i),o.apply(this,arguments)}return e=i,n=[{key:"onCreate",value:function(){Bs(Ts(i.prototype),"onCreate",this).call(this),i.updateView(this)}},{key:"setBackColor",value:function(t){var e=this.query("root/back");e.clear(),e.beginFill(t),e.drawRoundedRect(-Number(e.config.width)/2,-Number(e.config.height)/2,Number(e.config.width),Number(e.config.height),Number(e.config.radius)),e.endFill()}},{key:"showShadow",value:function(t){this.query("shadow").visible=t}}],r=[{key:"updateView",value:function(t){var e=t.query("root/label"),n=(0,bl.Z)(t.getProp("label"));e.text=n}},{key:"onEditorResize",value:function(t){i.updateView(t)}},{key:"onEditorUpdate",value:function(t){i.updateView(t)}},{key:"onEditorCreate",value:function(t){i.updateView(t)}}],n&&_s(e.prototype,n),r&&_s(e,r),i}(il);!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Vs,"defaultProps",{label:{type:"string",value:"Button"}});const qs=Vs;function Ds(t){return Ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ds(t)}function Ls(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ws(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Is(t,e){return Is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Is(t,e)}function Ms(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Ns(t);if(e){var o=Ns(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Us(this,n)}}function Us(t,e){return!e||"object"!==Ds(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ns(t){return Ns=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Ns(t)}var zs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Is(t,e)}(i,t);var e,n,r,o=Ms(i);function i(){return Ls(this,i),o.apply(this,arguments)}return e=i,n=[{key:"onCreate",value:function(){Yl.Z.observer.on("moneyUpdate",this.updateView,this),this.updateView(Xl.Z.getMoney()),this.animation=null}},{key:"lack",value:function(){var t=this;if(null===this.animation){var e=this.query("value");e.style.fill=Jl.wallet.lackColor,this.animation=l.Z.createAnimation(this,"lack",!1,!0),this.animation.then((function(){e.style.fill=Jl.wallet.defaultColor,t.animation=null}))}}},{key:"dispose",value:function(){Yl.Z.observer.off("moneyUpdate",this.updateView,this)}},{key:"updateView",value:function(t){this.query("value").text=String(t)}}],n&&Ws(e.prototype,n),r&&Ws(e,r),i}(l.Z.Component);const Fs=zs;function Xs(t){return Xs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xs(t)}function Ys(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Js(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hs(t,e){return Hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Hs(t,e)}function $s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Qs(t);if(e){var o=Qs(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ks(this,n)}}function Ks(t,e){return!e||"object"!==Xs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qs(t){return Qs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Qs(t)}var tc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hs(t,e)}(u,t);var e,n,r,o,i,a=$s(u);function u(){return Js(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){this.busy=!1,this.button=this.query("button"),this.button.on("action",this.showShop,this),this.updateAlert()}},{key:"updateAlert",value:function(){0===Xl.Z.getNewShopItems().length?this.bindings.alert.visible=!1:(this.bindings.alert.visible=!0,this.bindings.alert.animate())}},{key:"showShop",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,t.next=5,l.Z.createComponent("overlays/Shop");case 5:e=t.sent,Yl.Z.currentWindow.addChild(e),e.once("close",this.updateAlert,this),this.busy=!1;case 9:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Ys(i,n,r,a,u,"next",t)}function u(t){Ys(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})},{key:"enable",value:function(){this.button.enable()}},{key:"disable",value:function(){this.button.disable()}}],n&&Gs(e.prototype,n),r&&Gs(e,r),u}(l.Z.Component);const ec=tc;function nc(t){return nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nc(t)}function rc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function oc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ic(t,e){return ic=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ic(t,e)}function ac(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=lc(t);if(e){var o=lc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return uc(this,n)}}function uc(t,e){return!e||"object"!==nc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lc(t){return lc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},lc(t)}const sc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ic(t,e)}(i,t);var e,n,r,o=ac(i);function i(){return rc(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"animate",value:function(){var t,e;null===(t=this.animator1)||void 0===t||t.stop(),null===(e=this.animator2)||void 0===e||e.stop(),this.animator1=new ut.ZP.Tween(this.scale).to({x:[1.2,1],y:[1.2,1]},250).delay(2e3).repeat(1/0).start(),this.animator2=new ut.ZP.Tween(this.bindings.text).to({rotation:[-Math.PI/4,0,Math.PI/4,0]},250).delay(2e3).repeat(1/0).start()}},{key:"dispose",value:function(){var t,e;null===(t=this.animator1)||void 0===t||t.stop(),null===(e=this.animator2)||void 0===e||e.stop()}}])&&oc(e.prototype,n),r&&oc(e,r),i}(l.Z.Component);function cc(t){return cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cc(t)}function fc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function yc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function pc(t,e){return pc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},pc(t,e)}function hc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=vc(t);if(e){var o=vc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dc(this,n)}}function dc(t,e){return!e||"object"!==cc(e)&&"function"!=typeof e?bc(t):e}function bc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vc(t){return vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},vc(t)}function mc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const gc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pc(t,e)}(a,t);var e,n,r,i=hc(a);function a(){var t;fc(this,a);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return mc(bc(t=i.call.apply(i,[this].concat(n))),"itemName",""),mc(bc(t),"cost",1e5),mc(bc(t),"owned",!1),mc(bc(t),"pressed",!1),t}return e=a,(n=[{key:"onCreate",value:function(){this.interactive=!0,this.buttonMode=!0,this.on("pointerdown",this.onPointerDown,this),this.on("pointerup",this.onPointerUp,this),this.on("pointerupoutside",this.onPointerCancel,this)}},{key:"onPointerDown",value:function(t){this.pressed=!0}},{key:"onPointerUp",value:function(t){this.pressed&&this.emit("action",this),this.onPointerCancel()}},{key:"onPointerCancel",value:function(t){this.pressed=!1}},{key:"interruptActions",value:function(){this.pressed=!1}},{key:"update",value:function(t,e,n){this.itemName=t,this.query("icon").texture=o.xE.from(e),this.query("button/price").text=String(n.cost),this.cost=n.cost}},{key:"setOwned",value:function(t){t?(this.query("button/price").visible=!1,this.query("button/gem").visible=!1,this.query("button/select").visible=!0,this.query("overlay").visible=!1):(this.query("button/price").visible=!0,this.query("button/gem").visible=!0,this.query("button/select").visible=!1,this.query("overlay").visible=!0),this.owned=t}},{key:"setCurrent",value:function(t){t?(this.query("button/mark").visible=!0,this.query("back").tint=10092441,this.query("button/select").visible=!1):(this.query("button/mark").visible=!1,this.query("back").tint=16777215,this.query("button/select").visible=this.owned)}}])&&yc(e.prototype,n),r&&yc(e,r),a}(l.Z.Component);function wc(t){return wc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wc(t)}function Pc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sc(t,e){return Sc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sc(t,e)}function xc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Rc(t);if(e){var o=Rc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oc(this,n)}}function Oc(t,e){return!e||"object"!==wc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rc(t){return Rc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Rc(t)}var jc=4046973;const Cc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sc(t,e)}(a,t);var e,n,r,i=xc(a);function a(){return Pc(this,a),i.apply(this,arguments)}return e=a,(n=[{key:"onCreate",value:function(){this.unselectAll(),this.updateSkin("r6"),this.updateSkin("r7"),this.updateSkin("r8")}},{key:"updateSkin",value:function(t){var e=this.query(t);e.skinId=t,e.query("icon").texture=o.xE.from("skins/".concat(t)),e.query("icon").alpha=.5;var n=Xl.Z.get("skins",[]);Xl.Z.get("unlockedSkins",[]).includes(t)&&(e.query("lock").visible=!1,e.hitArea=new o.Ae(-75,-75,150,150),e.interactive=!0,e.buttonMode=!0,e.on("pointerdown",this.onSkinDown,this),e.on("pointerup",this.onSkinUp,this),e.on("pointerupoutside",this.onSkinCancel,this),e.query("icon").alpha=1,Xl.Z.get("currentSkin")===t&&(e.query("back").tint=jc),n.includes(t)||Xl.Z.push("skins",t))}},{key:"onSkinDown",value:function(t){t.currentTarget.isDown=!0}},{key:"onSkinUp",value:function(t){var e=t.currentTarget;e.isDown&&this.selectSkin(t),e.isDown=!1}},{key:"onSkinCancel",value:function(t){t.currentTarget.isDown=!1}},{key:"interruptActions",value:function(){for(var t=0,e=["r6","r7","r8"];t<e.length;t++){var n=e[t];this.query(n).isDown=!1}}},{key:"selectSkin",value:function(t){var e=t.currentTarget,n=e.skinId;Xl.Z.get("skins",[]).includes(n)||Xl.Z.push("skins",n),Xl.Z.set("currentSkin",n),this.unselectAll(),e.query("back").tint=jc,this.emit("skinSelected",n),Xo.Z.playClick()}},{key:"unselectAll",value:function(){for(var t=0,e=["r6","r7","r8"];t<e.length;t++){var n=e[t];this.query(n).query("back").tint=8638942}}}])&&kc(e.prototype,n),r&&kc(e,r),a}(l.Z.Component);var _c=n(7108);function Bc(t){return Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bc(t)}function Ec(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Ac(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tc(t,e){return Tc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Tc(t,e)}function Vc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Dc(t);if(e){var o=Dc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qc(this,n)}}function qc(t,e){return!e||"object"!==Bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dc(t){return Dc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Dc(t)}var Lc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tc(t,e)}(u,t);var e,n,r,o,i,a=Vc(u);function u(){return Ac(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){this.query("button").on("action",this.onButtonClick,this),u.updateView(this)}},{key:"onButtonClick",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.query("button").disable(),e=new _c.Z("toTheMoon"),Yl.Z.showWindow(e);case 3:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Ec(i,n,r,a,u,"next",t)}function u(t){Ec(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],r=[{key:"updateView",value:function(t){if(t.exists("packCont/mars_bg")){var e=t.query("packCont/mask");t.query("packCont/mars_bg").mask=e}}},{key:"onEditorResize",value:function(t){u.updateView(t)}},{key:"onEditorUpdate",value:function(t){u.updateView(t)}},{key:"onEditorCreate",value:function(t){u.updateView(t)}}],n&&Zc(e.prototype,n),r&&Zc(e,r),u}(l.Z.Component);const Wc=Lc;var Ic=n(8321);function Mc(t){return Mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mc(t)}function Uc(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Nc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fc(t,e){return Fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Fc(t,e)}function Xc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Jc(t);if(e){var o=Jc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yc(this,n)}}function Yc(t,e){return!e||"object"!==Mc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jc(t){return Jc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Jc(t)}var Gc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fc(t,e)}(u,t);var e,n,r,o,i,a=Xc(u);function u(){return Nc(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){this.query("button").on("action",this.onButtonClick,this)}},{key:"onButtonClick",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.query("button").disable(),e=new Ic.Z,Yl.Z.showWindow(e);case 3:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Uc(i,n,r,a,u,"next",t)}function u(t){Uc(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],n&&zc(e.prototype,n),r&&zc(e,r),u}(l.Z.Component);const Hc=Gc;function $c(t){return $c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$c(t)}function Kc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tf(t,e){return tf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tf(t,e)}function ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rf(t);if(e){var o=rf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return nf(this,n)}}function nf(t,e){return!e||"object"!==$c(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rf(t){return rf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rf(t)}const of=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tf(t,e)}(i,t);var e,n,r,o=ef(i);function i(){return Kc(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"onCreate",value:function(){this.animation=l.Z.createAnimation(this,"animate",!1,!0,1/0),this.effects=this.queryTagAll("effect")}},{key:"dispose",value:function(){var t;this.effects.forEach((function(t){t.emitter.stop(),t.emitter.removeAllParticles()})),null===(t=this.animation)||void 0===t||t.stop(),this.animation=null}}])&&Qc(e.prototype,n),r&&Qc(e,r),i}(l.Z.Component);function af(t){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},af(t)}function uf(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function lf(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){uf(i,r,o,a,u,"next",t)}function u(t){uf(i,r,o,a,u,"throw",t)}a(void 0)}))}}function sf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cf(t,e){return cf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},cf(t,e)}function ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hf(t);if(e){var o=hf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yf(this,n)}}function yf(t,e){return!e||"object"!==af(e)&&"function"!=typeof e?pf(t):e}function pf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hf(t){return hf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hf(t)}var df=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cf(t,e)}(f,t);var e,n,r,i,a,u,s,c=ff(f);function f(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(pf(n=c.call(this,t)),"pressed",!1),n.levelpack=e,n}return e=f,n=[{key:"onCreate",value:(s=lf(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.root=this.query("root"),this.root.mask=this.query("mask"),t.next=4,this.prepareBack();case 4:if(this.prepareContent(),this.prepareSkinsPanel(),this.animation=null,this.shineTimer=null,this.interactive=!0,!this.levelpack.isComingSoon&&!this.isLocked){t.next=11;break}return t.abrupt("return");case 11:this.shine(),this.buttonMode=!0,this.on("pointerdown",this.onPointerDown,this),this.on("pointerup",this.onPointerUp,this),this.on("pointerupoutside",this.onPointerCancel,this);case 16:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"prepareBack",value:(u=lf(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.levelpack,n=e.name,r=e.preferences,o=r.shadowColor,this.back=this.root.query("back"),this.overlay=this.back.query("overlay"),this.overlay.alpha=0,i=this.overlay,a=i.width,u=i.height,this.shadow=this.back.query("shadow"),this.shadow.clear().beginFill(Vt.Z.getIntColor(o),1).drawRoundedRect(-a/2,-u/2,a,u,100).endFill(),t.next=10,l.Z.createComponent("packs/UI/".concat(n));case 10:(s=t.sent).mask=this.back.query("mask"),this.back.addChildAt(s,2);case 13:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"prepareContent",value:(a=lf(regeneratorRuntime.mark((function t(){var e,n,r,i,a,u,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.levelpack,n=e.progress,r=e.levels,i=e.preferences,a=e.isComingSoon,u=i.logo,l=i.difficulty,i.lockedBy,this.content=this.root.query("content"),!a){t.next=6;break}return this.content.visible=!1,t.abrupt("return");case 6:this.logo=this.content.query("logo"),this.logo.texture=o.xE.from("packs/logo/".concat(u)),this.difficulty=this.content.query("difficulty"),this.difficulty.text=l.map(bl.Z).join(" / ").toUpperCase(),this.progressBar=this.content.query("ProgressBar"),this.progressBar.update(n,r),this.content.query("play").visible=!this.isLocked,this.content.query("lock").visible=this.isLocked;case 14:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"prepareSkinsPanel",value:function(){}},{key:"shine",value:(i=lf(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.animation){t.next=2;break}return t.abrupt("return");case 2:this.animation=l.Z.createAnimation(this,"shine",!1,!0),this.animation.on("finish",(function(){e.animation=null,e.shineTimer=new qt.Z(5e3),e.shineTimer.on("finish",(function(){e.shineTimer=null,e.shine()}))}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onPointerDown",value:function(t){var e;Xo.Z.playClick(),null===(e=this.tween)||void 0===e||e.stop(),this.tween=new ut.ZP.Tween(this.overlay).to({alpha:1},100).start(),this.pressed=!0,t.stopPropagation()}},{key:"onPointerUp",value:function(t){this.pressed&&this.emit("action",this.levelpack),this.onPointerCancel(),t.stopPropagation()}},{key:"onPointerCancel",value:function(t){var e,n=this;null===(e=this.tween)||void 0===e||e.stop(),this.tween=new ut.ZP.Tween(this.overlay).to({alpha:0},100).onComplete((function(){n.overlay.alpha=0})).start(),this.pressed=!1}},{key:"interruptActions",value:function(){this.pressed=!1}},{key:"dispose",value:function(){var t,e,n;null===(t=this.animation)||void 0===t||null===(e=t.stop)||void 0===e||e.call(t),this.animation=null,null===(n=this.shineTimer)||void 0===n||n.stop(),this.shineTimer=null}},{key:"isLocked",get:function(){var t=this.levelpack.preferences.lockedBy;return!!t&&!t.every((function(t){return Xl.Z.isLevelpackCompleted(t)}))}}],n&&sf(e.prototype,n),r&&sf(e,r),f}(l.Z.Component);const bf=df;function vf(t){return vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vf(t)}function mf(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wf(t,e){return wf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},wf(t,e)}function Pf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Sf(t);if(e){var o=Sf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kf(this,n)}}function kf(t,e){return!e||"object"!==vf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Sf(t){return Sf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Sf(t)}const xf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wf(t,e)}(i,t);var e,n,r,o=Pf(i);function i(){return mf(this,i),o.apply(this,arguments)}return e=i,(n=[{key:"onCreate",value:function(){this.bar=this.query("bar"),this.bar.back=this.bar.query("back"),this.bar.progress=this.bar.query("progress"),this.label=this.query("label")}},{key:"update",value:function(t,e){var n=Jl.pack.progressBar,r=n.width,o=n.height,i=n.backColor,a=n.progressColor,u=r-o;if(this.label.text="".concat(t," / ").concat(e),this.bar.back.clear().beginFill(Vt.Z.getIntColor(i),1).drawCircle(-u/2,0,o/2).drawCircle(u/2,0,o/2).drawRect(-u/2,-o/2,u,o).endFill(),this.bar.progress.clear(),0!==t){var l=t/e,s=u*(l-.5);this.bar.progress.beginFill(Vt.Z.getIntColor(a),1).drawCircle(-u/2,0,o/2).drawCircle(s,0,o/2).drawRect(-u/2,-o/2,u*l,o).endFill()}}}])&&gf(e.prototype,n),r&&gf(e,r),i}(l.Z.Component);function Of(t){return Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Of(t)}function Rf(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function jf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cf(t,e,n){return Cf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zf(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Cf(t,e,n||t)}function _f(t,e){return _f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_f(t,e)}function Bf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Zf(t);if(e){var o=Zf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ef(this,n)}}function Ef(t,e){return!e||"object"!==Of(e)&&"function"!=typeof e?Af(t):e}function Af(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zf(t){return Zf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Zf(t)}var Tf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_f(t,e)}(l,t);var e,n,r,i,a,u=Bf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Af(n=u.call(this,t)),"pressed",!1),n.grouppack=e,n}return e=l,n=[{key:"onCreate",value:(i=regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Cf(Zf(l.prototype),"onCreate",this).call(this),this.grouppack){t.next=3;break}return t.abrupt("return");case 3:e=this.grouppack,n=e.index,r=e.group,this.icon=this.root.query("icon"),this.icon.texture=o.xE.from("packs/groups/chapter_icon_".concat(n%8+1)),this.label=this.root.query("label"),this.label.text="".concat(r[0],"-").concat(r[r.length-1]),this.lock=this.root.query("lockCont"),this.lock.visible=!1;case 10:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Rf(o,n,r,a,u,"next",t)}function u(t){Rf(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"interruptActions",value:function(){this.pressed=!1}},{key:"disable",value:function(){Cf(Zf(l.prototype),"disable",this).call(this),this.lock.visible=!0}}],n&&jf(e.prototype,n),r&&jf(e,r),l}(il);const Vf=Tf;function qf(t){return qf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qf(t)}function Df(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Lf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wf(t,e,n){return Wf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zf(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}},Wf(t,e,n||t)}function If(t,e){return If=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},If(t,e)}function Mf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=zf(t);if(e){var o=zf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Uf(this,n)}}function Uf(t,e){return!e||"object"!==qf(e)&&"function"!=typeof e?Nf(t):e}function Nf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zf(t){return zf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},zf(t)}var Ff=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&If(t,e)}(l,t);var e,n,r,i,a,u=Mf(l);function l(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Nf(n=u.call(this,t)),"pressed",!1),n.grouppack=e,n}return e=l,n=[{key:"onCreate",value:(i=regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Wf(zf(l.prototype),"onCreate",this).call(this),this.grouppack){t.next=3;break}return t.abrupt("return");case 3:this.root.hitArea=new o.Ae(-110,-90,220,220),e=this.grouppack,n=e.index,r=e.group,this.icon=this.root.query("icon"),this.icon.texture=o.xE.from("packs/toTheMoon/groups/".concat(n+1)),this.label=this.root.query("label"),this.label.text="".concat(r[0],"-").concat(r[r.length-1]),this.lock=this.root.query("lockCont"),this.lock.visible=!1;case 11:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var o=i.apply(t,e);function a(t){Df(o,n,r,a,u,"next",t)}function u(t){Df(o,n,r,a,u,"throw",t)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"interruptActions",value:function(){this.pressed=!1}},{key:"disable",value:function(){Wf(zf(l.prototype),"disable",this).call(this),this.query("root/frame").texture=o.xE.from("packs/toTheMoon/group-locked"),this.lock.visible=!0}}],n&&Lf(e.prototype,n),r&&Lf(e,r),l}(il);const Xf=Ff;var Yf=n(6871),Jf=n(6891);function Gf(t){return Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gf(t)}function Hf(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function $f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Kf(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qf(t,e){return Qf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Qf(t,e)}function ty(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ny(t);if(e){var o=ny(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ey(this,n)}}function ey(t,e){return!e||"object"!==Gf(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ny(t){return ny=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ny(t)}var ry=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qf(t,e)}(u,t);var e,n,r,o,i,a=ty(u);function u(){return $f(this,u),a.apply(this,arguments)}return e=u,n=[{key:"prepare",value:(o=regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.level=e;case 1:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){Hf(i,n,r,a,u,"next",t)}function u(t){Hf(i,n,r,a,u,"throw",t)}a(void 0)}))},function(t){return i.apply(this,arguments)})},{key:"onCreate",value:function(){this.pauseButton=this.bindings.pauseButton,this.pauseButton.on("action",this.onPauseButtonClick,this)}},{key:"onPauseButtonClick",value:function(){this.disable(),this.level.pause()}},{key:"enable",value:function(){this.pauseButton.enable()}},{key:"disable",value:function(){this.pauseButton.disable()}}],n&&Kf(e.prototype,n),r&&Kf(e,r),u}(l.Z.Component);const oy=ry;function iy(t){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iy(t)}function ay(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function uy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ly(t,e){return ly=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},ly(t,e)}function sy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=fy(t);if(e){var o=fy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cy(this,n)}}function cy(t,e){return!e||"object"!==iy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fy(t){return fy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},fy(t)}const yy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ly(t,e)}(a,t);var e,n,r,i=sy(a);function a(){return ay(this,a),i.apply(this,arguments)}return e=a,r=[{key:"getColorFromHex",value:function(t){return parseInt(t.replace("#","0x"),16)}}],(n=[{key:"onCreate",value:function(){this.visible=!1}},{key:"prepare",value:function(t){this.level=t;var e=Jl.overlay,n=e.color,r=e.alpha;this.overlay=this.addChildAt(new o.TC,0),this.overlay.beginFill(a.getColorFromHex(n),r).drawRect(-1,-1,2,2).endFill(),this.homeButton=this.query("buttons/homeButton"),this.homeButton.on("action",this.onHomeButtonClick,this),this.restartButton=this.query("buttons/restartButton"),this.restartButton.on("action",this.onRestartButtonClick,this),this.continueButton=this.query("buttons/continueButton"),this.continueButton.on("action",this.onContinueButtonClick,this),this.query("buttons/themeButton").visible="default"!==this.level.config.pack,this.query("buttons/themeButton").on("toggle",this.updateTheme,this)}},{key:"updateTheme",value:function(){this.level.updateTheme()}},{key:"onHomeButtonClick",value:function(){Yl.Z.gamePlayPause=!1,Yl.Z.showWindow(new Ic.Z)}},{key:"onRestartButtonClick",value:function(){this.level.restart(),this.hide()}},{key:"onContinueButtonClick",value:function(){this.level.resume(),this.hide()}},{key:"show",value:function(){this.visible=!0}},{key:"hide",value:function(){this.visible=!1}},{key:"onResize",value:function(){if(this.overlay){var t=Yf.Z.width,e=Yf.Z.height;this.overlay.width=t,this.overlay.height=e}}}])&&uy(e.prototype,n),r&&uy(e,r),a}(l.Z.Component);var py=n(4476),hy=n(8717),dy=n(5698),by=n(6729);function vy(t){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(t)}function my(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function gy(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){my(i,r,o,a,u,"next",t)}function u(t){my(i,r,o,a,u,"throw",t)}a(void 0)}))}}function wy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Py(t,e){return Py=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Py(t,e)}function ky(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oy(t);if(e){var o=Oy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Sy(this,n)}}function Sy(t,e){return!e||"object"!==vy(e)&&"function"!=typeof e?xy(t):e}function xy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oy(t){return Oy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Oy(t)}var Ry=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Py(t,e)}(u,t);var e,n,r,o,i,a=ky(u);function u(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(n=a.call(this)).wheelStep=70,n.marginTop=0,n.marginBottom=0,n.padding=u.PADDING,n.locked=!1,n.element=t,n.area=e,n.minY=0,n.maxY=0,n.isScrolling=!1,n.initialScrollY=0,n.startScrollY=0,n.startScrollDate=0,n.pointerId=-1,n.area.interactive=!0,n.area.on("pointerdown",n.onPointerDown,xy(n)),n.area.on("pointerup",n.onPointerUp,xy(n)),n.area.on("pointerupoutside",n.onPointerCancel,xy(n)),n.area.on("pointercancel",n.onPointerCancel,xy(n)),n.area.on("pointermove",n.onPointerMove,xy(n)),n.onMouseWheel=n.onMouseWheel.bind(xy(n)),n.onBrowserPointerUp=n.onBrowserPointerUp.bind(xy(n)),window.addEventListener("mousewheel",n.onMouseWheel),Yl.Z.pixiApp.view.addEventListener("mouseup",n.onBrowserPointerUp),Yl.Z.pixiApp.view.addEventListener("touchend",n.onBrowserPointerUp),Yl.Z.pixiApp.view.addEventListener("touchcancel",n.onBrowserPointerUp),n}return e=u,n=[{key:"checkEvent",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!(t&&t.data&&!t.data.isPrimary||t&&t.data&&e&&t.data.pointerId!==this.pointerId)}},{key:"onPointerDown",value:function(t){this.locked||this.checkEvent(t,!1)&&(this.pointerId=t.data.pointerId,this.isScrolling=!0,this.startScrollY=t.data.getLocalPosition(this.area.parent).y,this.initialScrollY=this.startScrollY,this.startScrollDate=Date.now())}},{key:"onPointerMove",value:function(t){if(!this.locked&&this.checkEvent(t)&&this.isScrolling){var e=t.data.getLocalPosition(this.area.parent).y,n=e-this.startScrollY;this.startScrollY=e,this.element.y+=n,this.element.y<this.minY-this.padding&&(this.element.y=this.minY-this.padding),this.element.y>this.maxY+this.padding&&(this.element.y=this.maxY+this.padding),Math.abs(this.initialScrollY-e)>5&&this.emit("scroll")}}},{key:"onPointerUp",value:function(t){this.locked||this.checkEvent(t)&&this.onPointerCancel(t)}},{key:"onPointerCancel",value:function(t){this.locked||this.checkEvent(t)&&(this.isScrolling=!1,this.animateScroll(t))}},{key:"animateScroll",value:(i=gy(regeneratorRuntime.mark((function t(e){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.locked=!0,t.next=3,this.scrollBack();case 3:if(!t.sent){t.next=6;break}return this.locked=!1,t.abrupt("return");case 6:if(this.area.parent){t.next=9;break}return this.locked=!1,t.abrupt("return");case 9:if(e){t.next=12;break}return this.locked=!1,t.abrupt("return");case 12:return n=e.data.getLocalPosition(this.area.parent).y,r=Math.sign(this.initialScrollY-n),o=Math.abs(this.initialScrollY-n)/(Date.now()-this.startScrollDate),i=100*o*r,t.next=18,new ut.ZP.Tween(this.element).to({y:this.element.y-i},150).start();case 18:return t.next=20,this.scrollBack();case 20:this.locked=!1;case 21:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"scrollBack",value:(o=gy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this.element.y>this.maxY)){t.next=4;break}return t.next=3,new ut.ZP.Tween(this.element).to({y:this.maxY},150).start();case 3:case 7:return t.abrupt("return",!0);case 4:if(!(this.element.y<this.minY)){t.next=8;break}return t.next=7,new ut.ZP.Tween(this.element).to({y:this.minY},150).start();case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleResize",value:function(){this.maxY=this.element.y+this.marginTop;var t=this.element.getLocalBounds();this.minY=this.element.y-t.height+this.area.height-this.marginBottom,this.minY>this.maxY&&(this.minY=this.maxY)}},{key:"onMouseWheel",value:function(t){this.locked||(t.deltaY>0?this.element.y-=this.wheelStep:this.element.y+=this.wheelStep,this.element.y<this.minY&&(this.element.y=this.minY),this.element.y>this.maxY&&(this.element.y=this.maxY))}},{key:"onBrowserPointerUp",value:function(){this.locked||(this.isScrolling&&this.onPointerCancel(),this.isScrolling=!1)}},{key:"dispose",value:function(){window.removeEventListener("mousewheel",this.onMouseWheel),Yl.Z.pixiApp.view.removeEventListener("mouseup",this.onBrowserPointerUp),Yl.Z.pixiApp.view.removeEventListener("touchend",this.onBrowserPointerUp),Yl.Z.pixiApp.view.removeEventListener("touchcancel",this.onBrowserPointerUp)}}],n&&wy(e.prototype,n),r&&wy(e,r),u}(n.n(by)());!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(Ry,"PADDING",200);const jy=Ry;function Cy(t){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(t)}function _y(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function By(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){_y(i,r,o,a,u,"next",t)}function u(t){_y(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ey(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ay(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zy(t,e){return Zy=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Zy(t,e)}function Ty(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=qy(t);if(e){var o=qy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vy(this,n)}}function Vy(t,e){return!e||"object"!==Cy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qy(t){return qy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},qy(t)}const Dy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zy(t,e)}(u,t);var e,n,r,o,i,a=Ty(u);function u(){return Ey(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){var t=this;Yf.Z.on("resize",this.handleResize,this),this.rarity="common",this.tab="skins",this.wallet=this.query("wallet"),this.query("back").interactive=!0,this.container=this.query("root/content/container"),this.container.interactive=!0,this.container.mask=this.query("root/content/mask"),this.query("root/skinsTab").interactive=!0,this.query("root/skinsTab").on("pointerdown",(function(){t.showSkins(),Xo.Z.playClick()})),this.query("root/trailsTab").interactive=!0,this.query("root/trailsTab").on("pointerdown",(function(){t.showTrails(),Xo.Z.playClick()})),this.query("root/commonButton").on("action",this.setCommonRarity,this),this.query("root/rareButton").on("action",this.setRareRarity,this),this.backButton=this.query("backContainer/backButton"),this.backButton.once("action",this.close,this),this.backButton.x=(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x,new ut.ZP.Tween(this.backButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start(),this.showSkins(),this.scrollableArea=new jy(this.query("root/content/container"),this.query("root/content/mask")),this.scrollableArea.marginBottom=60,this.scrollableArea.on("scroll",this.interruptActions,this)}},{key:"dispose",value:function(){Yf.Z.off("resize",this.handleResize,this),this.scrollableArea.dispose()}},{key:"interruptActions",value:function(){this.container.traverse((function(t){var e;null===(e=t.interruptActions)||void 0===e||e.call(t)}))}},{key:"close",value:(i=By(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backButton.interactive=!1,t.next=3,new ut.ZP.Tween(this.backButton).to({x:(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x},400).easing(ut.ZP.Easing.Sinusoidal.In).start();case 3:this.emit("close"),this.parent.removeChild(this);case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"showSkins",value:function(){this.query("root/skinsTab/back").tint=3317682,this.query("root/skinsTab/back").scale.set(1),this.query("root/trailsTab/back").tint=6408411,this.query("root/trailsTab/back").scale.set(.9),this.query("root/commonButton").visible=!0,this.query("root/commonButton").x=-265,this.query("root/rareButton").visible=!0,this.query("root/rareButton").x=265,this.tab="skins",this.setCommonRarity()}},{key:"showTrails",value:function(){this.query("root/skinsTab/back").tint=6408411,this.query("root/skinsTab/back").scale.set(.9),this.query("root/trailsTab/back").tint=3317682,this.query("root/trailsTab/back").scale.set(1),this.query("root/commonButton").visible=!0,this.query("root/commonButton").x=0,this.query("root/rareButton").visible=!1,this.tab="trails",this.setCommonRarity()}},{key:"updateRarityButtons",value:function(){"common"===this.rarity?(this.query("root/commonButton").setBackColor(1340805),this.query("root/rareButton").setBackColor(7327713)):(this.query("root/commonButton").setBackColor(7327713),this.query("root/rareButton").setBackColor(1340805)),this.updateAlertIcons()}},{key:"updateAlertIcons",value:function(){"skins"===this.tab&&(this.query("root/skinsTab/alert").visible=!1,this.query("root/trailsTab/alert").visible=this.canBuyNewTrail()),"trails"===this.tab&&(this.query("root/trailsTab/alert").visible=!1,this.query("root/skinsTab/alert").visible=this.canBuyNewSkin()),"common"===this.rarity?(this.query("root/commonButton/alert").visible=!1,this.query("root/rareButton/alert").visible="skins"===this.tab?this.canBuyNewSkin(["rare","epic"]):this.canBuyNewTrail(["rare","epic"])):(this.query("root/commonButton/alert").visible="skins"===this.tab?this.canBuyNewSkin("common"):this.canBuyNewTrail("common"),this.query("root/rareButton/alert").visible=!1)}},{key:"setCommonRarity",value:function(){this.rarity="common",this.updateRarityButtons(),this.updateItems()}},{key:"setRareRarity",value:function(){this.rarity="rare",this.updateRarityButtons(),this.updateItems()}},{key:"updateItems",value:(o=By(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,s,c,f,y,p,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.container.removeChildren(),e="skins"===this.tab?hy:dy,n="skins"===this.tab?"skins":"icons/trails",r="skins"===this.tab?Xl.Z.get("skins",[]):Xl.Z.get("trails",[]),o="skins"===this.tab?Xl.Z.get("currentSkin",""):Xl.Z.get("currentTrail",""),i=Object.keys(e),a=0,u=0,s=i;case 8:if(!(u<s.length)){t.next=33;break}if(c=s[u],(f=e[c]).rarity===this.rarity){t.next=13;break}return t.abrupt("continue",30);case 13:return t.next=15,l.Z.createComponent("UI/ShopItem");case 15:(y=t.sent).config=null,y.update(c,n+"/"+c,f),y.on("pointerdown",this.scrollableArea.onPointerDown,this.scrollableArea),y.on("pointermove",this.scrollableArea.onPointerMove,this.scrollableArea),y.on("pointerup",this.scrollableArea.onPointerUp,this.scrollableArea),this.container.addChild(y),p=Math.floor(a/4),h=a%4,y.x=240*h-360,y.y=300*p+150,r.includes(c)?y.setOwned(!0):y.setOwned(!1),o===c?y.setCurrent(!0):y.setCurrent(!1),y.on("action",this.buyOrSelect,this),a++;case 30:u++,t.next=8;break;case 33:if("skins"!==this.tab||"rare"!==this.rarity){t.next=45;break}return t.next=36,l.Z.createComponent("UI/ToTheMoonSkins");case 36:this.toTheMoonSkins=t.sent,this.toTheMoonSkins.config=null,this.toTheMoonSkins.on("skinSelected",this.unselectAll,this),this.container.addChild(this.toTheMoonSkins),this.toTheMoonSkins.y=800,this.toTheMoonSkins.interactive=!0,this.toTheMoonSkins.on("pointerdown",this.scrollableArea.onPointerDown,this.scrollableArea),this.toTheMoonSkins.on("pointermove",this.scrollableArea.onPointerMove,this.scrollableArea),this.toTheMoonSkins.on("pointerup",this.scrollableArea.onPointerUp,this.scrollableArea);case 45:this.handleResize();case 46:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"unselectAll",value:function(){this.container.traverse((function(t){t instanceof gc&&t.setCurrent(!1)}))}},{key:"buyOrSelect",value:function(t){var e,n=Xl.Z.getMoney();!t.owned&&n<t.cost?this.wallet.lack():(this.unselectAll(),t.owned?"skins"===this.tab?Xl.Z.set("currentSkin",t.itemName):Xl.Z.set("currentTrail",t.itemName):(Xl.Z.addMoney(-t.cost),"skins"===this.tab?Xl.Z.unlockSkin(t.itemName):Xl.Z.unlockTrail(t.itemName)),t.setOwned(!0),t.setCurrent(!0),this.updateAlertIcons(),null===(e=this.toTheMoonSkins)||void 0===e||e.unselectAll(),Xo.Z.playClick())}},{key:"canBuyNewSkin",value:function(t){return this.canBuyItem(hy,Xl.Z.get("skins",[]),Xl.Z.get("unlockedSkins",[]),t)}},{key:"canBuyNewTrail",value:function(t){return this.canBuyItem(dy,Xl.Z.get("trails",[]),Xl.Z.get("unlockedTrails",[]),t)}},{key:"canBuyItem",value:function(t,e,n,r){var o=Object.keys(t),i=Xl.Z.getMoney();r&&!Array.isArray(r)&&(r=[r]);for(var a=0,u=o;a<u.length;a++){var l=u[a],s=t[l];if((!r||r.includes(s.rarity))&&!e.includes(l)&&(!s.unlockContition||n.includes(l))&&s.cost<=i)return!0}return!1}},{key:"handleResize",value:function(){if(l.Z.resize(this),Yf.Z.isPortrait()&&Yf.Z.aspectRatio>=1.48){var t=Yf.Z.height-285,e=this.query("root/window");e.clear(),e.beginFill(3252145),e.drawRect(-Yf.Z.width/2,-t/2,Yf.Z.width,t),e.endFill(),e.y=Yf.Z.bottom-t/2-this.query("root").y;var n=t-220,r=this.query("root/content");r.clear(),r.beginFill(8638942),r.drawRoundedRect(-550,-n/2,1100,n,80),r.endFill(),r.y=Yf.Z.bottom-t/2-this.query("root").y+80;var o=this.query("root/content/mask");o.clear(),o.beginFill(16711680),o.drawRoundedRect(-550,-n/2,1100,n,80),o.endFill(),this.query("root/content/container").y=-n/2}else{var i=this.query("root/window");i.clear(),i.beginFill(3252145),i.drawRect(-Number(i.config.width/2),-Number(i.config.height/2),Number(i.config.width),Number(i.config.height)),i.endFill();var a=this.query("root/content");a.clear(),a.beginFill(8638942),a.drawRoundedRect(-Number(a.config.width/2),-Number(a.config.height/2),Number(a.config.width),Number(a.config.height),80),a.endFill();var u=this.query("root/content/mask");u.clear(),u.beginFill(16711680),u.drawRoundedRect(-Number(u.config.width/2),-Number(u.config.height/2),Number(u.config.width),Number(u.config.height),80),u.endFill(),this.query("root/content/container").y=-600}this.scrollableArea.handleResize()}}],n&&Ay(e.prototype,n),r&&Ay(e,r),u}(l.Z.Component);function Ly(t){return Ly="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ly(t)}function Wy(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Iy(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Wy(i,r,o,a,u,"next",t)}function u(t){Wy(i,r,o,a,u,"throw",t)}a(void 0)}))}}function My(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Uy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ny(t,e){return Ny=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Ny(t,e)}function zy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Yy(t);if(e){var o=Yy(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fy(this,n)}}function Fy(t,e){return!e||"object"!==Ly(e)&&"function"!=typeof e?Xy(t):e}function Xy(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yy(t){return Yy=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Yy(t)}function Jy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Gy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ny(t,e)}(s,t);var e,n,r,i,a,u=zy(s);function s(){var t;My(this,s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Jy(Xy(t=u.call.apply(u,[this].concat(n))),"shakeAnimation",null),t}return e=s,n=[{key:"onCreate",value:function(){this.startAppearAnimation();var t=this.query("root");t.interactive=!0,t.once("pointerdown",this.claimGift,this),this.backButton=this.query("backButton"),this.backButton.visible=!1,this.backButton.once("action",this.close,this),Yf.Z.on("resize",this.handleResize,this)}},{key:"startAppearAnimation",value:(a=Iy(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.createAnimation(this,"appear");case 2:this.startShakeAnimation();case 3:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"startShakeAnimation",value:function(){this.shakeAnimation=l.Z.createAnimation(this,"shake",!1,!0,1/0),this.shakeAnimation.on("sound",(function(){Xo.Z.playOnce("gift-box-shake")}))}},{key:"claimGift",value:(i=Iy(regeneratorRuntime.mark((function t(){var e,n,r,i,a,u,s,c,f,y,p,h,d,b,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.shakeAnimation&&(this.shakeAnimation.finish(!0),this.shakeAnimation=null),Xo.Z.playOnce("gift-box-open"),l.Z.createAnimation(this,"open"),t.next=5,new qt.Z(1e3).start();case 5:for(e=[],n=this.query("root").toGlobal({x:0,y:0}),n=this.toLocal(n),r=0;r<30;r++)(i=new Jf.Z("icons/gem")).rotation=Math.random()*Math.PI*2,a=.48*Math.min(Yf.Z.width,Yf.Z.height)-200,u=Math.random()*Math.PI*2,s=200+Math.random()*a,c=Math.cos(u)*s,f=Math.sin(u)*s,c+=n.x,f+=n.y,i.scale.set(0),i.position.set(n.x,n.y),new ut.ZP.Tween(i).to({x:c,y:f,scale:{x:1.5,y:1.5}},750).easing(ut.ZP.Easing.Back.Out).start(),this.addChild(i),e.push(i);return t.next=11,new qt.Z(800).start();case 11:return(y=new o.xv("+"+Jl.dailyBonus.reward,{fontFamily:"Roboto-Regular",fontSize:156,fill:16777215,dropShadow:!0,dropShadowColor:16756301,dropShadowDistance:8,dropShadowAngle:Math.PI/2,align:"center"})).anchor.set(.5),y.position.set(n.x,n.y),y.scale.set(0),this.addChild(y),new ut.ZP.Tween(y.scale).to({x:1.5,y:1.5},500).easing(ut.ZP.Easing.Back.Out).start(),t.next=19,new qt.Z(2e3).start();case 19:for(p=this.query("wallet").x,h=this.query("wallet").y,d=0,b=e;d<b.length;d++)v=b[d],new ut.ZP.Tween(v).to({x:p,y:h,alpha:0,scale:{x:0,y:0}},250).start();new ut.ZP.Tween(y).to({x:p,y:h,alpha:0,scale:{x:0,y:0}},250).start(),Xl.Z.claimDailyBonus(),this.backButton.visible=!0;case 25:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"dispose",value:function(){this.shakeAnimation&&this.shakeAnimation.stop(),Yf.Z.off("resize",this.handleResize,this)}},{key:"close",value:function(){this.dispose(),this.parent.removeChild(this)}},{key:"handleResize",value:function(){l.Z.resize(this)}}],n&&Uy(e.prototype,n),r&&Uy(e,r),s}(l.Z.Component);function Hy(t){return Hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hy(t)}function $y(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Ky(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qy(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tp(t,e){return tp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},tp(t,e)}function ep(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=rp(t);if(e){var o=rp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return np(this,n)}}function np(t,e){return!e||"object"!==Hy(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rp(t){return rp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},rp(t)}var op=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tp(t,e)}(u,t);var e,n,r,o,i,a=ep(u);function u(){return Ky(this,u),a.apply(this,arguments)}return e=u,n=[{key:"onCreate",value:function(){this.query("back").interactive=!0,this.backButton=this.query("backContainer/backButton"),this.backButton.once("action",this.close,this),this.backButton.x=(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x,new ut.ZP.Tween(this.backButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start();var t=this.query("content/root");t.scale.set(0),new ut.ZP.Tween(t.scale).to({x:1,y:1},300).start()}},{key:"close",value:(o=regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backButton.interactive=!1,e=this.query("content/root"),new ut.ZP.Tween(e.scale).to({x:0,y:0},300).start(),t.next=5,new ut.ZP.Tween(this.backButton).to({x:(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x},300).easing(ut.ZP.Easing.Sinusoidal.In).start();case 5:this.emit("close"),this.parent.removeChild(this);case 7:case"end":return t.stop()}}),t,this)})),i=function(){var t=this,e=arguments;return new Promise((function(n,r){var i=o.apply(t,e);function a(t){$y(i,n,r,a,u,"next",t)}function u(t){$y(i,n,r,a,u,"throw",t)}a(void 0)}))},function(){return i.apply(this,arguments)})}],n&&Qy(e.prototype,n),r&&Qy(e,r),u}(l.Z.Component);const ip=op;var ap=n(809);function up(t){return up="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},up(t)}function lp(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function sp(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){lp(i,r,o,a,u,"next",t)}function u(t){lp(i,r,o,a,u,"throw",t)}a(void 0)}))}}function cp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fp(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cp(Object(n),!0).forEach((function(e){yp(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function yp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function pp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dp(t,e){return dp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},dp(t,e)}function bp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=mp(t);if(e){var o=mp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return vp(this,n)}}function vp(t,e){return!e||"object"!==up(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mp(t){return mp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},mp(t)}const gp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dp(t,e)}(s,t);var e,n,r,o,i,a,u=bp(s);function s(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};pp(this,s),e=u.call(this,t);var r=n.pack,o=n.group,i=n.resetNumbering,a=void 0!==i&&i,l=n.backgroundColor,c=void 0===l?"#A1EAFC":l;if(e.pack=r,e.group=o,e.resetNumbering=a,e.backgroundColor=c,!e.group)return vp(e);var f=Jl.pack.group.size;return e.group=e.group.reduce((function(t,n){var r=n;return e.resetNumbering&&0===(r%=f)&&(r=f),fp(fp({},t),{},yp({},r,n))}),{}),e}return e=s,n=[{key:"onCreate",value:(a=sp(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,s,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.group){t.next=2;break}return t.abrupt("return");case 2:Yf.Z.on("resize",this.handleResize,this),e=Jl.pack.levels,n=e.columns,r=e.scale,this.back=this.query("back"),this.back.interactive=!0,this.back.tint=Vt.Z.getIntColor(this.backgroundColor),this.backButton=this.bindings.backButton,this.backButton.once("action",this.close,this),this.backButton.x=(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x,this.container=this.bindings.container,this.levelButtons=[],o=Object.keys(this.group),i=Xl.Z.getLevelpackProgress(this.pack),a=0;case 16:if(!(a<o.length)){t.next=35;break}return u=o[a],t.next=20,l.Z.createComponent("UI/LevelButton",u);case 20:(s=t.sent).on("action",this.onLevelButtonClick,this),s.config.disableResize=!0,s.scale.set(r),c=Math.floor(a/n),f=a%n,s.x=(f-n/2+.5)*(s.width+76),s.y=(c+.5)*s.height+64*Math.floor(a/n),s.scale.set(0),this.group[u]-1>i&&s.disable(),this.levelButtons.push(s),this.container.addChild(s);case 32:a++,t.next=16;break;case 35:this.show();case 36:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"show",value:function(){var t=Jl.pack.levels.scale;new ut.ZP.Tween(this.backButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start(),this.levelButtons.forEach((function(e){new ut.ZP.Tween(e.scale).to({x:t},200).easing(ut.ZP.Easing.Sinusoidal.Out).start(),new ut.ZP.Tween(e.scale).to({y:t},200).easing(ut.ZP.Easing.Sinusoidal.Out).start()}))}},{key:"onLevelButtonClick",value:(i=sp(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.backButton.disable(),this.levelButtons.forEach((function(t){return t.disable()})),n=new ap.Z(this.pack,this.group[e.id],!0),Yl.Z.showWindow(n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"close",value:(o=sp(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backButton.disable(),t.next=3,new ut.ZP.Tween(this.backButton).to({x:(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x},400).easing(ut.ZP.Easing.Sinusoidal.In).start();case 3:this.emit("close"),this.parent.removeChild(this);case 5:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"dispose",value:function(){Yf.Z.off("resize",this.handleResize,this)}},{key:"handleResize",value:function(){l.Z.resize(this)}}],n&&hp(e.prototype,n),r&&hp(e,r),s}(l.Z.Component);function wp(t){return wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wp(t)}function Pp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sp(t,e){return Sp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Sp(t,e)}function xp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=jp(t);if(e){var o=jp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Op(this,n)}}function Op(t,e){return!e||"object"!==wp(e)&&"function"!=typeof e?Rp(t):e}function Rp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jp(t){return jp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},jp(t)}function Cp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const _p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sp(t,e)}(i,t);var e,n,r,o=xp(i);function i(){var t;Pp(this,i);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Cp(Rp(t=o.call.apply(o,[this].concat(n))),"animator",null),t}return e=i,(n=[{key:"onCreate",value:function(){Yf.Z.on("resize",this.handleResize,this),this.animator=l.Z.createAnimation(this,"jump",!1,!0,1/0),this.handleResize()}},{key:"handleResize",value:function(){l.Z.resize(this)}},{key:"dispose",value:function(){this.animator&&(this.animator.stop(),this.animator=null),Yf.Z.off("resize",this.handleResize,this)}}])&&kp(e.prototype,n),r&&kp(e,r),i}(l.Z.Component);var Bp=n(1700),Ep=n(2982);function Ap(t){return Ap="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(t)}function Zp(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Tp(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Zp(i,r,o,a,u,"next",t)}function u(t){Zp(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Vp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qp(t,e){return qp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},qp(t,e)}function Dp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Wp(t);if(e){var o=Wp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lp(this,n)}}function Lp(t,e){return!e||"object"!==Ap(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wp(t){return Wp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Wp(t)}const Ip=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qp(t,e)}(c,t);var e,n,r,o,i,a,u,s=Dp(c);function c(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),s.call(this,t)}return e=c,n=[{key:"onCreate",value:(u=Tp(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.infoButton=this.bindings.infoButton,this.infoButton.on("action",this.onInfoButtonClick,this),this.infoButton.visible=!1,this.shopButton=this.bindings.shopButton,this.shopButton.visible=!1,this.container=this.query("container"),t.next=8,this.addLevelpackButtons();case 8:return Yf.Z.on("resize",this.handleResize,this),this.handleResize(),t.next=12,new qt.Z(300);case 12:return t.next=14,this.show();case 14:Yl.Z.readyEmitted||(Yl.Z.platformApi.gameReady(),Yl.Z.readyEmitted=!0);case 15:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getLevelpackConfig",value:function(t,e){return"comingSoon"===t?{name:t,preferences:e.preferences,isComingSoon:!0}:{name:t,preferences:Ep[t].preferences,progress:Xl.Z.getLevelpackProgress(t),levels:Object.keys(Ep[t].levels).length}}},{key:"addLevelpackButtons",value:(a=Tp(regeneratorRuntime.mark((function t(){var e,n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Object.keys(Ep),n=0;case 2:if(!(n<e.length)){t.next=15;break}return r=e[n],o=this.getLevelpackConfig(r,Ep[r]),t.next=7,l.Z.createComponent("packs/PackButton",o);case 7:(i=t.sent).on("action",this.onPackButtonClick,this),i.config.disableResize=!0,i.y=(n+.5)*i.height+64*n,this.container.addChild(i);case 12:n++,t.next=2;break;case 15:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"interruptActions",value:function(){this.container.traverse((function(t){var e;null===(e=t.interruptActions)||void 0===e||e.call(t)}))}},{key:"show",value:(i=Tp(regeneratorRuntime.mark((function t(){var e,n,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.infoButton.x=(Yf.Z.left-this.infoButton.width/2)/this.infoButton.parent.scale.x,e=new Promise((function(t){new ut.ZP.Tween(r.infoButton).to({x:0},400).onStart((function(){return r.infoButton.visible=!0})).onComplete((function(){return t()})).easing(ut.ZP.Easing.Sinusoidal.Out).start()})),this.shopButton.x=(Yf.Z.right+this.shopButton.width/2)/this.shopButton.parent.scale.x,n=new Promise((function(t){new ut.ZP.Tween(r.shopButton).to({x:0},400).onStart((function(){return r.shopButton.visible=!0})).onComplete((function(){return t()})).easing(ut.ZP.Easing.Sinusoidal.Out).start()})),t.abrupt("return",Promise.all([e,n]));case 5:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onInfoButtonClick",value:(o=Tp(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.createComponent("overlays/HowToPlay");case 2:e=t.sent,this.addChild(e);case 4:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onPackButtonClick",value:function(t){var e=t.name,n=new _c.Z(e);Yl.Z.showWindow(n)}},{key:"handleResize",value:function(){l.Z.resize(this)}},{key:"dispose",value:function(){this.container.traverse((function(t){var e;return null===(e=t.dispose)||void 0===e?void 0:e.call(t)})),Yf.Z.off("resize",this.handleResize,this)}},{key:"tick",value:function(t){this.bindings.giftButton.tick(t)}}],n&&Vp(e.prototype,n),r&&Vp(e,r),c}(l.Z.Scene);function Mp(t){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(t)}function Up(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Np(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Up(i,r,o,a,u,"next",t)}function u(t){Up(i,r,o,a,u,"throw",t)}a(void 0)}))}}function zp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Xp(t,e){return Xp=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Xp(t,e)}function Yp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Gp(t);if(e){var o=Gp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jp(this,n)}}function Jp(t,e){return!e||"object"!==Mp(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gp(t){return Gp=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Gp(t)}const Hp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xp(t,e)}(u,t);var e,n,r,o,i,a=Yp(u);function u(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.currentLevel,o=n.nextLevel;return zp(this,u),(e=a.call(this,t)).currentLevel=r,e.nextLevel=o,e}return e=u,n=[{key:"onCreate",value:(i=Np(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backButton=this.bindings.backButton,this.backButton.once("action",this.onBackButtonClick,this),this.backButton.x=(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x,this.nextLevelButton=this.bindings.nextLevelButton,this.nextLevelButton.once("action",this.onNextLevelButtonClick,this),this.trophyAnim=l.Z.createAnimation(this,"trophy",!1,!0,1/0),t.next=8,new qt.Z(300);case 8:new ut.ZP.Tween(this.backButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start(),this.nextLevelButton.show();case 10:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"onBackButtonClick",value:(o=Np(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.backButton.disable(),this.nextLevelButton.disable(),e=new _c.Z(this.currentLevel.pack),n=(Yf.Z.left-this.backButton.width/2)/this.backButton.parent.scale.x,t.next=6,new ut.ZP.Tween(this.backButton).to({x:n},400).easing(ut.ZP.Easing.Sinusoidal.In).start();case 6:Yl.Z.showWindow(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"onNextLevelButtonClick",value:function(){this.backButton.disable(),this.nextLevelButton.disable();var t=this.nextLevel,e=t.pack,n=t.id;Yl.Z.showWindow(new ap.Z(e,n,!0))}}],n&&Fp(e.prototype,n),r&&Fp(e,r),u}(l.Z.Scene);function $p(t){return $p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$p(t)}function Kp(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function Qp(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Kp(i,r,o,a,u,"next",t)}function u(t){Kp(i,r,o,a,u,"throw",t)}a(void 0)}))}}function th(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eh(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function nh(t,e){return nh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},nh(t,e)}function rh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=ih(t);if(e){var o=ih(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oh(this,n)}}function oh(t,e){return!e||"object"!==$p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ih(t){return ih=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},ih(t)}const ah=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&nh(t,e)}(c,t);var e,n,r,o,i,a,u,s=rh(c);function c(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.currentLevel,o=n.nextLevel;return th(this,c),(e=s.call(this,t)).currentLevel=r,e.nextLevel=o,e}return e=c,n=[{key:"onCreate",value:function(){void 0!==this.currentLevel&&(this.wallet=this.bindings.wallet,this.homeButton=this.bindings.homeButton,this.homeButton.once("action",this.onHomeButtonClick,this),this.homeButton.x=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,this.skipLevelButton=this.bindings.skipLevelButton,this.skipLevelButton.on("action",this.onSkipLevelButtonClick,this),this.skipLevelButton.x=Yf.Z.left-this.skipLevelButton.width/2,this.restartLevelButton=this.bindings.restartLevelButton,this.restartLevelButton.once("action",this.onRestartLevelButtonClick,this),this.shopButton=this.bindings.shopButton,this.skipLevelButton.visible=!Xl.Z.isLevelPassed(this.currentLevel),this.show())}},{key:"onHomeButtonClick",value:(u=Qp(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.homeButton.disable(),this.skipLevelButton.disable(),this.restartLevelButton.disable(),this.shopButton.disable(),e=new Ic.Z,t.next=7,this.hideBackButton();case 7:Yl.Z.showWindow(e);case 8:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"onSkipLevelButtonClick",value:(a=Qp(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(Xl.Z.getMoney()<this.skipLevelButton.cost)){t.next=4;break}return this.wallet.lack(),t.abrupt("return");case 4:return this.homeButton.disable(),this.skipLevelButton.disable(),this.restartLevelButton.disable(),this.shopButton.disable(),Xl.Z.addMoney(-this.skipLevelButton.cost),Xl.Z.completeLevel(this.currentLevel),e=this.nextLevel?new ap.Z(this.nextLevel.pack,this.nextLevel.id,!0):new Ic.Z,t.next=13,this.hideBackButton();case 13:Yl.Z.showWindow(e);case 14:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"onRestartLevelButtonClick",value:function(){this.homeButton.disable(),this.skipLevelButton.disable(),this.restartLevelButton.disable(),this.shopButton.disable();var t=this.currentLevel,e=t.pack,n=t.id;Yl.Z.showWindow(new ap.Z(e,n,!0))}},{key:"show",value:(i=Qp(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:new ut.ZP.Tween(this.homeButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start(),new ut.ZP.Tween(this.skipLevelButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start(),l.Z.createAnimation(this,"show",!1,!0);case 3:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"hideBackButton",value:(o=Qp(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,t.next=3,new ut.ZP.Tween(this.homeButton).to({x:e},400).easing(ut.ZP.Easing.Sinusoidal.In).start();case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})}],n&&eh(e.prototype,n),r&&eh(e,r),c}(l.Z.Scene);function uh(t){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uh(t)}function lh(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function sh(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){lh(i,r,o,a,u,"next",t)}function u(t){lh(i,r,o,a,u,"throw",t)}a(void 0)}))}}function ch(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fh(t,e){return fh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},fh(t,e)}function yh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=hh(t);if(e){var o=hh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ph(this,n)}}function ph(t,e){return!e||"object"!==uh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hh(t){return hh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},hh(t)}const dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fh(t,e)}(y,t);var e,n,r,o,i,a,u,s,c,f=yh(y);function y(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(n=f.call(this,t)).levelpack=e,n}return e=y,n=[{key:"onCreate",value:(c=sh(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.levelpack){t.next=2;break}return t.abrupt("return");case 2:return this.groups=[],this.homeButton=this.bindings.homeButton,this.homeButton.once("action",this.onHomeButtonClick,this),this.homeButton.x=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,this.container=this.query("content/container"),this.container.interactive=!0,this.container.mask=this.query("content/mask"),this.scrollableArea=new jy(this.container,this.container.mask),this.scrollableArea.marginBottom=60,this.scrollableArea.on("scroll",this.interruptActions,this),t.next=14,this.prepareGroups();case 14:Yf.Z.on("resize",this.handleResize,this),this.handleResize(),this.show();case 17:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"prepareGroups",value:(s=sh(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,s,c,f,y,p,h,d,b,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=Jl.pack.group,n=e.columns,r=e.scale,o=e.size,i=this.scrollableArea,a=this.levelpack,u=a.pack,s=a.levels,c=Vt.Z.groupArray(Object.keys(s).map(Number),o),f=Xl.Z.getLevelpackProgress(u),y=Math.ceil((f+1)/o),p=0;case 8:if(!(p<c.length)){t.next=29;break}return h=c[p],t.next=12,l.Z.createComponent("packs/DefaultGroupButton",{index:p,pack:u,group:h});case 12:(d=t.sent).on("action",this.onGroupButtonClick,this),d.root.on("pointerdown",i.onPointerDown,i),d.root.on("pointermove",i.onPointerMove,i),d.root.on("pointerup",i.onPointerUp,i),d.config.disableResize=!0,d.scale.set(r),b=Math.floor(p/n),v=p%n,d.x=(v-n/2+.5)*(d.width+96),d.y=(b+.5)*d.height+48*Math.floor(p/n),p>=y&&d.disable(),this.groups.push(d),this.container.addChild(d);case 26:p++,t.next=8;break;case 29:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"interruptActions",value:function(){this.container.traverse((function(t){var e;null===(e=t.interruptActions)||void 0===e||e.call(t)}))}},{key:"onHomeButtonClick",value:(u=sh(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,e=new Ic.Z,t.next=6,this.hide();case 6:Yl.Z.showWindow(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"onGroupButtonClick",value:(a=sh(regeneratorRuntime.mark((function t(e){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,n=e.grouppack,r=n.pack,o=n.group,t.next=6,l.Z.createComponent("overlays/SelectLevel",{pack:r,group:o});case 6:i=t.sent,Yl.Z.currentWindow.addChild(i),this.busy=!1;case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"show",value:(i=sh(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new ut.ZP.Tween(this.homeButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start());case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"hide",value:(o=sh(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,t.abrupt("return",new ut.ZP.Tween(this.homeButton).to({x:e},400).easing(ut.ZP.Easing.Sinusoidal.In).start());case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleResize",value:function(){l.Z.resize(this),this.scrollableArea.handleResize()}},{key:"dispose",value:function(){this.container&&this.container.traverse((function(t){var e;return null===(e=t.dispose)||void 0===e?void 0:e.call(t)})),this.scrollableArea&&this.scrollableArea.dispose(),Yf.Z.off("resize",this.handleResize,this)}},{key:"tick",value:function(t){}}],n&&ch(e.prototype,n),r&&ch(e,r),y}(l.Z.Scene);function bh(t){return bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bh(t)}function vh(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return mh(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mh(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function mh(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function gh(t,e,n,r,o,i,a){try{var u=t[i](a),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,o)}function wh(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){gh(i,r,o,a,u,"next",t)}function u(t){gh(i,r,o,a,u,"throw",t)}a(void 0)}))}}function Ph(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function kh(t,e){return kh=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},kh(t,e)}function Sh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Oh(t);if(e){var o=Oh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xh(this,n)}}function xh(t,e){return!e||"object"!==bh(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oh(t){return Oh=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Oh(t)}const Rh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&kh(t,e)}(y,t);var e,n,r,o,i,a,u,s,c,f=Sh(y);function y(t,e){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),(n=f.call(this,t)).levelpack=e,n}return e=y,n=[{key:"onCreate",value:(c=wh(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.levelpack){t.next=2;break}return t.abrupt("return");case 2:return this.groups=[],this.homeButton=this.bindings.homeButton,this.homeButton.once("action",this.onHomeButtonClick,this),this.homeButton.x=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,t.next=8,this.prepareGroups();case 8:Yf.Z.on("resize",this.handleResize,this),this.handleResize(),this.show();case 11:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"prepareGroups",value:(s=wh(regeneratorRuntime.mark((function t(){var e,n,r,o,i,a,u,s,c,f,y,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(e=Jl.pack.group).columns,n=e.scale,r=e.size,this.scrollableArea,o=this.levelpack,i=o.pack,a=o.levels,u=Vt.Z.groupArray(Object.keys(a).map(Number),r),s=Xl.Z.getLevelpackProgress(i),c=Math.ceil((s+1)/r),f=0;case 8:if(!(f<u.length)){t.next=22;break}return y=u[f],t.next=12,l.Z.createComponent("packs/TTMGroupButton",{index:f,pack:i,group:y});case 12:(p=t.sent).on("action",this.onGroupButtonClick,this),p.config.disableResize=!0,p.scale.set(n),f>=c&&p.disable(),this.groups.push(p),this.query("group"+(f+1)).addChild(p);case 19:f++,t.next=8;break;case 22:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"onHomeButtonClick",value:(u=wh(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,e=new Ic.Z,t.next=6,this.hide();case 6:Yl.Z.showWindow(e);case 7:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"onGroupButtonClick",value:(a=wh(regeneratorRuntime.mark((function t(e){var n,r,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.busy){t.next=2;break}return t.abrupt("return");case 2:return this.busy=!0,n=e.grouppack,r=n.pack,o=n.group,t.next=6,l.Z.createComponent("overlays/SelectLevel",{pack:r,group:o,backgroundColor:7638748});case 6:i=t.sent,Yl.Z.currentWindow.addChild(i),this.busy=!1;case 9:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"show",value:(i=wh(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new ut.ZP.Tween(this.homeButton).to({x:0},400).easing(ut.ZP.Easing.Sinusoidal.Out).start());case 1:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"hide",value:(o=wh(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(Yf.Z.left-this.homeButton.width/2)/this.homeButton.parent.scale.x,t.abrupt("return",new ut.ZP.Tween(this.homeButton).to({x:e},400).easing(ut.ZP.Easing.Sinusoidal.In).start());case 2:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"handleResize",value:function(){l.Z.resize(this);var t,e=this.query("stars"),n=e.toGlobal({x:0,y:0}),r=vh(e.emitter.initializes);try{for(r.s();!(t=r.n()).done;){var o=t.value;"Position"===o.name&&(o.zone.x=Yf.Z.left,o.zone.width=Yf.Z.width,o.zone.height=Yf.Z.height-n.y)}}catch(t){r.e(t)}finally{r.f()}}},{key:"dispose",value:function(){Yf.Z.off("resize",this.handleResize,this)}},{key:"tick",value:function(t){}}],n&&Ph(e.prototype,n),r&&Ph(e,r),y}(l.Z.Scene),jh={LevelView:r.Z,Jumper:g,JumpUp:_,JumpLeft:W,JumpRight:G,MainCamera:H.Z,PlatformNormal:at,Player:s.Z,SlidePlatform0:Pt,Spike:kt.Z,StartPlatform:St.Z,TargetFrameR:Tt,WinPlatform:Gt,PlayerDeath:re,CircleBigV2:he,CircleNormal:Oe,CircleSmall:qe,Ref:ze,VideoReference:Ke,Hinge:fn,HingeSpike:Sn,HingeSpike4:Tn,InvisiblePlatform:Ju,InvisibleSpike:Gu.Z,TwisSpike:Fn,Twist:nr,TwistR:yr,TwistL:kr,SpikePlatf:Ar,DoubleSpike:Ur,Elevator:no,GravityChanger:yo,Heptagon:xo,Heptagon1:Vo,TwistRSpike:Fo,Bounce1:ii,TwisSpikeVariant:bi,Portal:vi.Z,Trigger:Ri,MovingObject:Mi,TwistLSpike:$i,JumpByParent:ua,MovePlatform:va,Point:ja,SpringObj:Ma,LockLaunchState:$a,StickyPlatform:cu,TimedPlatform:ku,GravitySwitch:Tu,IconButton:dl,TextButton:Rl,LevelButton:Tl,NextLevelButton:Fl,SkipLevelButton:as,GiftButton:ms,ThemeButton:Rs,PlainButton:qs,PackBack:of,PackButton:bf,PackProgressBar:xf,LevelsGroupButton:Vf,TTMGroupButton:Xf,Wallet:Fs,ShopButton:ec,AlertMark:sc,ShopItem:gc,ToTheMoonSkins:Cc,DefaultPackCompleted:Wc,ToTheMoonPackCompleted:Hc,HUD:oy,Pause:yy,Tutorial:py.Z,SelectLevel:gp,Shop:Dy,DailyBonus:Gy,HowToPlay:ip,Loading:_p,PackCompleted:Bp.Z,WinScene:Hp,FailScene:ah,HomeScene:Ip,DefaultGroupsScene:dh,ToTheMoonGroupsScene:Rh}}}]);