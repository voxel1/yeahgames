var COMPILED=!1,goog=goog||{};goog.global=this,goog.global.CLOSURE_UNCOMPILED_DEFINES,goog.global.CLOSURE_DEFINES,goog.isDef=function(e){return void 0!==e},goog.isString=function(e){return"string"==typeof e},goog.isBoolean=function(e){return"boolean"==typeof e},goog.isNumber=function(e){return"number"==typeof e},goog.exportPath_=function(e,t,r){var o,i=e.split("."),a=r||goog.global;i[0]in a||!a.execScript||a.execScript("var "+i[0]);for(;i.length&&(o=i.shift());)!i.length&&goog.isDef(t)?a[o]=t:a=a[o]&&a[o]!==Object.prototype[o]?a[o]:a[o]={}},goog.define=function(e,t){var r=t;if(!COMPILED){var o=goog.global.CLOSURE_UNCOMPILED_DEFINES,i=goog.global.CLOSURE_DEFINES;o&&void 0===o.nodeType&&Object.prototype.hasOwnProperty.call(o,e)?r=o[e]:i&&void 0===i.nodeType&&Object.prototype.hasOwnProperty.call(i,e)&&(r=i[e])}goog.exportPath_(e,r)},goog.define("goog.DEBUG",!0),goog.define("goog.LOCALE","en"),goog.define("goog.TRUSTED_SITE",!0),goog.define("goog.STRICT_MODE_COMPATIBLE",!1),goog.define("goog.DISALLOW_TEST_ONLY_CODE",COMPILED&&!goog.DEBUG),goog.define("goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING",!1),goog.provide=function(e){if(goog.isInModuleLoader_())throw new Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(e))throw new Error('Namespace "'+e+'" already declared.');goog.constructNamespace_(e)},goog.constructNamespace_=function(e,t){if(!COMPILED){delete goog.implicitNamespaces_[e];for(var r=e;(r=r.substring(0,r.lastIndexOf(".")))&&!goog.getObjectByName(r);)goog.implicitNamespaces_[r]=!0}goog.exportPath_(e,t)},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(e){if(!goog.isString(e)||!e||-1==e.search(goog.VALID_MODULE_RE_))throw new Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw new Error("Module "+e+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw new Error("goog.module may only be called once per module.");if(goog.moduleLoaderState_.moduleName=e,!COMPILED){if(goog.isProvided_(e))throw new Error('Namespace "'+e+'" already declared.');delete goog.implicitNamespaces_[e]}},goog.module.get=function(e){return goog.module.getInternal_(e)},goog.module.getInternal_=function(e){if(!COMPILED){if(e in goog.loadedModules_)return goog.loadedModules_[e];if(!goog.implicitNamespaces_[e]){var t=goog.getObjectByName(e);return null!=t?t:null}}return null},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_},goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw new Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw new Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.setTestOnly=function(e){if(goog.DISALLOW_TEST_ONLY_CODE)throw e=e||"",new Error("Importing test-only code into non-debug environment"+(e?": "+e:"."))},goog.forwardDeclare=function(e){},goog.forwardDeclare("Document"),goog.forwardDeclare("HTMLScriptElement"),goog.forwardDeclare("XMLHttpRequest"),COMPILED||(goog.isProvided_=function(e){return e in goog.loadedModules_||!goog.implicitNamespaces_[e]&&goog.isDefAndNotNull(goog.getObjectByName(e))},goog.implicitNamespaces_={"goog.module":!0}),goog.getObjectByName=function(e,t){for(var r=e.split("."),o=t||goog.global,i=0;i<r.length;i++)if(o=o[r[i]],!goog.isDefAndNotNull(o))return null;return o},goog.globalize=function(e,t){var r=t||goog.global;for(var o in e)r[o]=e[o]},goog.addDependency=function(e,t,r,o){if(goog.DEPENDENCIES_ENABLED){var i=goog.getLoader_();i&&i.addDependency(e,t,r,o)}},goog.define("goog.ENABLE_DEBUG_LOADER",!0),goog.logToConsole_=function(e){goog.global.console&&goog.global.console.error(e)},goog.require=function(e){if(goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_&&goog.getLoader_().earlyProcessLoad(e),!COMPILED){if(goog.isProvided_(e)){if(goog.isInModuleLoader_())return goog.module.getInternal_(e)}else if(goog.ENABLE_DEBUG_LOADER){var t=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{var r=goog.getLoader_();r?r.load(e):goog.logToConsole_("Could not load "+e+" because there is no debug loader.")}finally{goog.moduleLoaderState_=t}}return null}},goog.basePath="",goog.global.CLOSURE_BASE_PATH,goog.global.CLOSURE_NO_DEPS,goog.global.CLOSURE_IMPORT_SCRIPT,goog.nullFunction=function(){},goog.abstractMethod=function(){throw new Error("unimplemented abstract method")},goog.addSingletonGetter=function(e){e.instance_=void 0,e.getInstance=function(){return e.instance_?e.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=e),e.instance_=new e)}},goog.instantiatedSingletons_=[],goog.define("goog.LOAD_MODULE_USING_EVAL",!0),goog.define("goog.SEAL_MODULE_EXPORTS",goog.DEBUG),goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER,goog.define("goog.TRANSPILE","detect"),goog.define("goog.TRANSPILER","transpile.js"),goog.define("goog.DEBUG_LOADER",""),goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){var hasBadLetScoping;try{hasBadLetScoping=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(e){hasBadLetScoping=!1}goog.hasBadLetScoping=hasBadLetScoping}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(e){return"(function(){"+e+"\n;})();\n"},goog.loadModule=function(e){var t=goog.moduleLoaderState_;try{var r;if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1},goog.isFunction(e))r=e.call(void 0,{});else{if(!goog.isString(e))throw new Error("Invalid module definition");goog.useSafari10Workaround()&&(e=goog.workaroundSafari10EvalBug(e)),r=goog.loadModuleFromSource_.call(void 0,e)}var o=goog.moduleLoaderState_.moduleName;if(!goog.isString(o)||!o)throw new Error('Invalid module name "'+o+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(o,r):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof r&&null!=r&&Object.seal(r),goog.loadedModules_[o]=r}finally{goog.moduleLoaderState_=t}},goog.loadModuleFromSource_=function(){"use strict";var exports={};return eval(arguments[0]),exports},goog.normalizePath_=function(e){for(var t=e.split("/"),r=0;r<t.length;)"."==t[r]?t.splice(r,1):r&&".."==t[r]&&t[r-1]&&".."!=t[r-1]?t.splice(--r,2):r++;return t.join("/")},goog.global.CLOSURE_LOAD_FILE_SYNC,goog.loadFileSync_=function(e){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(e);try{var t=new goog.global.XMLHttpRequest;return t.open("get",e,!1),t.send(),0==t.status||200==t.status?t.responseText:null}catch(e){return null}},goog.transpile_=function(code,path){var jscomp=goog.global.$jscomp;jscomp||(goog.global.$jscomp=jscomp={});var transpile=jscomp.transpile;if(!transpile){var transpilerPath=goog.basePath+goog.TRANSPILER,transpilerCode=goog.loadFileSync_(transpilerPath);if(transpilerCode){if(function(){eval(transpilerCode+"\n//# sourceURL="+transpilerPath)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw new Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,jscomp=goog.global.$jscomp,transpile=jscomp.transpile}}if(!transpile){var suffix=" requires transpilation but no transpiler was found.";transpile=jscomp.transpile=function(e,t){return goog.logToConsole_(t+suffix),e}}return transpile(code,path)},goog.typeOf=function(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t},goog.isNull=function(e){return null===e},goog.isDefAndNotNull=function(e){return null!=e},goog.isArray=function(e){return"array"==goog.typeOf(e)},goog.isArrayLike=function(e){var t=goog.typeOf(e);return"array"==t||"object"==t&&"number"==typeof e.length},goog.isDateLike=function(e){return goog.isObject(e)&&"function"==typeof e.getFullYear},goog.isFunction=function(e){return"function"==goog.typeOf(e)},goog.isObject=function(e){var t=typeof e;return"object"==t&&null!=e||"function"==t},goog.getUid=function(e){return e[goog.UID_PROPERTY_]||(e[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(e){return!!e[goog.UID_PROPERTY_]},goog.removeUid=function(e){null!==e&&"removeAttribute"in e&&e.removeAttribute(goog.UID_PROPERTY_);try{delete e[goog.UID_PROPERTY_]}catch(e){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(e){var t=goog.typeOf(e);if("object"==t||"array"==t){if(e.clone)return e.clone();var r="array"==t?[]:{};for(var o in e)r[o]=goog.cloneObject(e[o]);return r}return e},goog.bindNative_=function(e,t,r){return e.call.apply(e.bind,arguments)},goog.bindJs_=function(t,r,e){if(!t)throw new Error;if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,o),t.apply(r,e)}}return function(){return t.apply(r,arguments)}},goog.bind=function(e,t,r){return Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(t,e){var r=Array.prototype.slice.call(arguments,1);return function(){var e=r.slice();return e.push.apply(e,arguments),t.apply(this,e)}},goog.mixin=function(e,t){for(var r in t)e[r]=t[r]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(e){if(goog.global.execScript)goog.global.execScript(e,"JavaScript");else{if(!goog.global.eval)throw new Error("goog.globalEval not available");if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(e){}if(void 0!==goog.global._evalTest_){try{delete goog.global._evalTest_}catch(e){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(e);else{var t=goog.global.document,r=t.createElement("SCRIPT");r.type="text/javascript",r.defer=!1,r.appendChild(t.createTextNode(e)),t.head.appendChild(r),t.head.removeChild(r)}}},goog.evalWorksForGlobals_=null,goog.cssNameMapping_,goog.cssNameMappingStyle_,goog.global.CLOSURE_CSS_NAME_MAP_FN,goog.getCssName=function(e,t){if("."==String(e).charAt(0))throw new Error('className passed in goog.getCssName must not start with ".". You passed: '+e);var r,i=function(e){return goog.cssNameMapping_[e]||e};r=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?i:function(e){for(var t=e.split("-"),r=[],o=0;o<t.length;o++)r.push(i(t[o]));return r.join("-")}:function(e){return e};var o=t?e+"-"+r(t):r(e);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(o):o},goog.setCssNameMapping=function(e,t){goog.cssNameMapping_=e,goog.cssNameMappingStyle_=t},goog.global.CLOSURE_CSS_NAME_MAPPING,!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING),goog.getMsg=function(e,r){return r&&(e=e.replace(/\{\$([^}]+)}/g,function(e,t){return null!=r&&t in r?r[t]:e})),e},goog.getMsgWithFallback=function(e,t){return e},goog.exportSymbol=function(e,t,r){goog.exportPath_(e,t,r)},goog.exportProperty=function(e,t,r){e[t]=r},goog.inherits=function(e,a){function t(){}t.prototype=a.prototype,e.superClass_=a.prototype,e.prototype=new t,(e.prototype.constructor=e).base=function(e,t,r){for(var o=new Array(arguments.length-2),i=2;i<arguments.length;i++)o[i-2]=arguments[i];return a.prototype[t].apply(e,o)}},goog.base=function(e,t,r){var o=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!o)throw new Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(o.superClass_){for(var i=new Array(arguments.length-1),a=1;a<arguments.length;a++)i[a-1]=arguments[a];return o.superClass_.constructor.apply(e,i)}var n=new Array(arguments.length-2);for(a=2;a<arguments.length;a++)n[a-2]=arguments[a];for(var s=!1,p=e.constructor;p;p=p.superClass_&&p.superClass_.constructor)if(p.prototype[t]===o)s=!0;else if(s)return p.prototype[t].apply(e,n);if(e[t]===o)return e.constructor.prototype[t].apply(e,n);throw new Error("goog.base called from a method of one name to a method of a different name")},goog.scope=function(e){if(goog.isInModuleLoader_())throw new Error("goog.scope is not supported within a goog.module.");e.call(goog.global)},COMPILED||(goog.global.COMPILED=COMPILED),goog.defineClass=function(e,t){var r=t.constructor,o=t.statics;r&&r!=Object.prototype.constructor||(r=function(){throw new Error("cannot instantiate an interface (no constructor defined).")});var i=goog.defineClass.createSealingConstructor_(r,e);return e&&goog.inherits(i,e),delete t.constructor,delete t.statics,goog.defineClass.applyProperties_(i.prototype,t),null!=o&&(o instanceof Function?o(i):goog.defineClass.applyProperties_(i,o)),i},goog.defineClass.ClassDescriptor,goog.define("goog.defineClass.SEAL_CLASS_INSTANCES",goog.DEBUG),goog.defineClass.createSealingConstructor_=function(t,e){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return t;var r=!goog.defineClass.isUnsealable_(e),o=function(){var e=t.apply(this,arguments)||this;return e[goog.UID_PROPERTY_]=e[goog.UID_PROPERTY_],this.constructor===o&&r&&Object.seal instanceof Function&&Object.seal(e),e};return o},goog.defineClass.isUnsealable_=function(e){return e&&e.prototype&&e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],goog.defineClass.applyProperties_=function(e,t){var r;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);for(var o=0;o<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;o++)r=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[o],Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},goog.tagUnsealableClass=function(e){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(e.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var e=goog.global.document;return null!=e&&"write"in e},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var e=goog.global.document,t=e.currentScript;if(t)var r=[t];else r=e.getElementsByTagName("SCRIPT");for(var o=r.length-1;0<=o;--o){var i=r[o].src,a=i.lastIndexOf("?"),n=-1==a?i.length:a;if("base.js"==i.substr(n-7,7))return void(goog.basePath=i.substr(0,n-7))}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null},goog.Transpiler.prototype.createRequiresTranspilation_=function(){var requiresTranspilation={es3:!1},transpilationRequiredForAllLaterModes=!1;function addNewerLanguageTranspilationCheck(e,t){transpilationRequiredForAllLaterModes?requiresTranspilation[e]=!0:t()?requiresTranspilation[e]=!1:(requiresTranspilation[e]=!0,transpilationRequiredForAllLaterModes=!0)}function evalCheck(code){try{return!!eval(code)}catch(e){return!1}}var userAgent=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";return addNewerLanguageTranspilationCheck("es5",function(){return evalCheck("[1,].length==1")}),addNewerLanguageTranspilationCheck("es6",function(){var e=userAgent.match(/Edge\/(\d+)(\.\d)*/i);if(e&&Number(e[1])<15)return!1;return evalCheck('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')}),addNewerLanguageTranspilationCheck("es6-impl",function(){return!0}),addNewerLanguageTranspilationCheck("es7",function(){return evalCheck("2 ** 2 == 4")}),addNewerLanguageTranspilationCheck("es8",function(){return evalCheck("async () => 1, true")}),addNewerLanguageTranspilationCheck("es_next",function(){return evalCheck("({...rest} = {}), true")}),requiresTranspilation},goog.Transpiler.prototype.needsTranspile=function(e){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;if(this.requiresTranspilation_||(this.requiresTranspilation_=this.createRequiresTranspilation_()),e in this.requiresTranspilation_)return this.requiresTranspilation_[e];throw new Error("Unknown language mode: "+e)},goog.Transpiler.prototype.transpile=function(e,t){return goog.transpile_(e,t)},goog.transpiler_=new goog.Transpiler,goog.DebugLoader=function(){this.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},written:{},deferred:{}},this.oldIeWaiting_=!1,this.queuedModules_=[],this.lastNonModuleScriptIndex_=0},goog.DebugLoader.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader.prototype.earlyProcessLoad=function(e){goog.DebugLoader.IS_OLD_IE_&&this.maybeProcessDeferredDep_(e)},goog.DebugLoader.prototype.load=function(e){var t=this.getPathFromDeps_(e);if(!t){var r="goog.require could not find: "+e;throw this.logToConsole(r),Error(r)}var o=[],i={},a=this.dependencies_,n=this,s=function(e){if(!(e in a.written||e in a.visited)){if(a.visited[e]=!0,e in a.requires)for(var t in a.requires[e])if(!n.isProvided(t)){if(!(t in a.nameToPath))throw Error("Undefined nameToPath for "+t);s(a.nameToPath[t])}e in i||(i[e]=!0,o.push(e))}};s(t);for(var p=0;p<o.length;p++){var l=o[p];this.dependencies_.written[l]=!0}for(p=0;p<o.length;p++){if(!(l=o[p]))throw Error("Undefined script input");var g=a.loadFlags[l]||{},c=g.lang||"es3",u=this.getTranspiler().needsTranspile(c);"goog"==g.module||u?this.importProcessedScript_(goog.basePath+l,"goog"==g.module,u):this.importScript_(goog.basePath+l)}},goog.DebugLoader.prototype.addDependency=function(e,t,r,o){var i,a,n=e.replace(/\\/g,"/"),s=this.dependencies_;o&&"boolean"!=typeof o||(o=o?{module:"goog"}:{});for(var p=0;i=t[p];p++)s.nameToPath[i]=n,s.loadFlags[n]=o;for(var l=0;a=r[l];l++)n in s.requires||(s.requires[n]={}),s.requires[n][a]=!0},goog.DebugLoader.prototype.importScript_=function(e,t){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.bind(this.writeScriptTag_,this))(e,t)&&(this.dependencies_.written[e]=!0)},goog.DebugLoader.prototype.importProcessedScript_=function(e,t,r){var o='goog.debugLoader_.retrieveAndExec_("'+e+'", '+t+", "+r+");";this.importScript_("",o)},goog.DebugLoader.prototype.retrieveAndExec_=function(e,t,r){if(!COMPILED){var o=e;e=this.normalizePath(e);var i=goog.global.CLOSURE_IMPORT_SCRIPT||goog.bind(this.writeScriptTag_,this),a=this.loadFileSync(e);if(null==a)throw new Error('Load of "'+e+'" failed');r&&(a=this.getTranspiler().transpile(a,e)),t?a=this.wrapModule_(e,a):a+="\n//# sourceURL="+e,goog.DebugLoader.IS_OLD_IE_&&this.oldIeWaiting_?(this.dependencies_.deferred[o]=a,this.queuedModules_.push(o)):i(e,a)}},goog.DebugLoader.prototype.wrapModule_=function(e,t){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(t+"\n//# sourceURL="+e+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+t+"\n;return exports});\n//# sourceURL="+e+"\n"},goog.DebugLoader.prototype.loadQueuedModules_=function(){var e=this.queuedModules_.length;if(0<e){var t=this.queuedModules_;this.queuedModules_=[];for(var r=0;r<e;r++){var o=t[r];this.maybeProcessDeferredPath_(o)}}this.oldIeWaiting_=!1},goog.DebugLoader.prototype.maybeProcessDeferredDep_=function(e){if(this.isDeferredModule_(e)&&this.allDepsAreAvailable_(e)){var t=this.getPathFromDeps_(e);this.maybeProcessDeferredPath_(goog.basePath+t)}},goog.DebugLoader.prototype.isDeferredModule_=function(e){var t=this.getPathFromDeps_(e),r=t&&this.dependencies_.loadFlags[t]||{},o=r.lang||"es3";return!(!t||"goog"!=r.module&&!this.getTranspiler().needsTranspile(o))&&goog.basePath+t in this.dependencies_.deferred},goog.DebugLoader.prototype.allDepsAreAvailable_=function(e){var t=this.getPathFromDeps_(e);if(t&&t in this.dependencies_.requires)for(var r in this.dependencies_.requires[t])if(!this.isProvided(r)&&!this.isDeferredModule_(r))return!1;return!0},goog.DebugLoader.prototype.maybeProcessDeferredPath_=function(e){if(e in this.dependencies_.deferred){var t=this.dependencies_.deferred[e];delete this.dependencies_.deferred[e],goog.globalEval(t)}},goog.DebugLoader.prototype.writeScriptSrcNode_=function(e){goog.global.document.write('<script type="text/javascript" src="'+e+'"><\/script>')},goog.DebugLoader.prototype.appendScriptSrcNode_=function(e){var t=goog.global.document,r=t.createElement("script");r.type="text/javascript",r.src=e,r.defer=!1,r.async=!1,t.head.appendChild(r)},goog.DebugLoader.prototype.writeScriptTag_=function(e,t){if(this.inHtmlDocument()){var r=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&"complete"==r.readyState){if(/\bdeps.js$/.test(e))return!1;throw Error('Cannot write "'+e+'" after document load')}if(void 0===t)if(goog.DebugLoader.IS_OLD_IE_){this.oldIeWaiting_=!0;var o=" onreadystatechange='goog.debugLoader_.onScriptLoad_(this, "+ ++this.lastNonModuleScriptIndex_+")' ";r.write('<script type="text/javascript" src="'+e+'"'+o+"><\/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?this.appendScriptSrcNode_(e):this.writeScriptSrcNode_(e);else r.write('<script type="text/javascript">'+this.protectScriptTag_(t)+"<\/script>");return!0}return!1},goog.DebugLoader.prototype.protectScriptTag_=function(e){return e.replace(/<\/(SCRIPT)/gi,"\\x3c/$1")},goog.DebugLoader.prototype.onScriptLoad_=function(e,t){return"complete"==e.readyState&&this.lastNonModuleScriptIndex_==t&&this.loadQueuedModules_(),!0},goog.DebugLoader.prototype.getPathFromDeps_=function(e){return e in this.dependencies_.nameToPath?this.dependencies_.nameToPath[e]:null},goog.DebugLoader.prototype.getTranspiler=function(){return goog.transpiler_},goog.DebugLoader.prototype.isProvided=function(e){return goog.isProvided_(e)},goog.DebugLoader.prototype.inHtmlDocument=function(){return goog.inHtmlDocument_()},goog.DebugLoader.prototype.logToConsole=function(e){goog.logToConsole_(e)},goog.DebugLoader.prototype.loadFileSync=function(e){return goog.loadFileSync_(e)},goog.DebugLoader.prototype.normalizePath=function(e){return goog.normalizePath_(e)},goog.debugLoader_=null,goog.registerDebugLoader=function(e){if(goog.debugLoader_)throw new Error("Debug loader already registered!");if(!(e instanceof goog.DebugLoader))throw new Error("Not a goog.DebugLoader.");goog.debugLoader_=e},goog.getLoader_=function(){if(!goog.debugLoader_&&goog.DEBUG_LOADER)throw new Error("Loaded debug loader file but no loader was registered!");return goog.debugLoader_||(goog.debugLoader_=new goog.DebugLoader),goog.debugLoader_},function(){var e;goog.DEBUG_LOADER&&(e=new goog.DebugLoader).importScript_(goog.basePath+goog.DEBUG_LOADER),goog.global.CLOSURE_NO_DEPS||(e=e||new goog.DebugLoader,goog.DEBUG_LOADER||goog.registerDebugLoader(e),e.importScript_(goog.basePath+"deps.js"))}()),goog.provide("spriter"),spriter.loadBool=function(e,t,r){var o=e[t];switch(typeof o){case"string":return"true"===o;case"boolean":return o;default:return r||!1}},spriter.saveBool=function(e,t,r,o){"boolean"==typeof o&&r===o||(e[t]=r)},spriter.loadFloat=function(e,t,r){var o=e[t];switch(typeof o){case"string":return parseFloat(o);case"number":return o;default:return r||0}},spriter.saveFloat=function(e,t,r,o){"number"==typeof o&&r===o||(e[t]=r)},spriter.loadInt=function(e,t,r){var o=e[t];switch(typeof o){case"string":return parseInt(o,10);case"number":return 0|o;default:return r||0}},spriter.saveInt=function(e,t,r,o){"number"==typeof o&&r===o||(e[t]=r)},spriter.loadString=function(e,t,r){var o=e[t];switch(typeof o){case"string":return o;default:return r||""}},spriter.saveString=function(e,t,r,o){"string"==typeof o&&r===o||(e[t]=r)},spriter.makeArray=function(e){return"object"==typeof e&&"number"==typeof e.length?e:void 0!==e?[e]:[]},spriter.wrap=function(e,t,r){return t<r?e<t?r-(t-e)%(r-t):t+(e-t)%(r-t):t===r?t:e},spriter.interpolateLinear=function(e,t,r){return e+(t-e)*r},spriter.interpolateQuadratic=function(e,t,r,o){return spriter.interpolateLinear(spriter.interpolateLinear(e,t,o),spriter.interpolateLinear(t,r,o),o)},spriter.interpolateCubic=function(e,t,r,o,i){return spriter.interpolateLinear(spriter.interpolateQuadratic(e,t,r,i),spriter.interpolateQuadratic(t,r,o,i),i)},spriter.interpolateQuartic=function(e,t,r,o,i,a){return spriter.interpolateLinear(spriter.interpolateCubic(e,t,r,o,a),spriter.interpolateCubic(t,r,o,i,a),a)},spriter.interpolateQuintic=function(e,t,r,o,i,a,n){return spriter.interpolateLinear(spriter.interpolateQuartic(e,t,r,o,i,n),spriter.interpolateQuartic(t,r,o,i,a,n),n)},spriter.interpolateBezier=function(e,t,r,o,i){function u(e,t,r,o){return((e*o+t)*o+r)*o}var a,n=3*e,s=3*(r-e)-n,p=3*t,l=3*(o-t)-p;return u((a=1)-p-l,l,p,function(e,t,r,o,i){var a,n,s,p,l,g,c;for(s=o,g=0;g<8;g++){if(p=u(e,t,r,s)-o,Math.abs(p)<i)return s;if(l=(3*e*(c=s)+2*t)*c+r,Math.abs(l)<i)break;s-=p/l}if(n=1,(s=o)<(a=0))return a;if(n<s)return n;for(;a<n;){if(p=u(e,t,r,s),Math.abs(p-o)<i)return s;p<o?a=s:n=s,s=.5*(n-a)+a}return s}(1-n-s,s,n,i,1/(200*a)))},spriter.tween=function(e,t,r){return e+(t-e)*r},spriter.wrapAngleRadians=function(e){return e<=0?(e-Math.PI)%(2*Math.PI)+Math.PI:(e+Math.PI)%(2*Math.PI)-Math.PI},spriter.tweenAngleRadians=function(e,t,r,o){return 0===o?e:(0<o?t-e<0&&(t+=2*Math.PI):o<0&&0<t-e&&(t-=2*Math.PI),spriter.wrapAngleRadians(e+spriter.wrapAngleRadians(t-e)*r))},spriter.Angle=function(e){this.rad=e||0},Object.defineProperty(spriter.Angle.prototype,"deg",{get:function(){return 180*this.rad/Math.PI},set:function(e){this.rad=e*Math.PI/180}}),Object.defineProperty(spriter.Angle.prototype,"cos",{get:function(){return Math.cos(this.rad)}}),Object.defineProperty(spriter.Angle.prototype,"sin",{get:function(){return Math.sin(this.rad)}}),spriter.Angle.prototype.selfIdentity=function(){return this.rad=0,this},spriter.Angle.prototype.copy=function(e){return this.rad=e.rad,this},spriter.Angle.add=function(e,t,r){return(r=r||new spriter.Angle).rad=spriter.wrapAngleRadians(e.rad+t.rad),r},spriter.Angle.prototype.add=function(e,t){return spriter.Angle.add(this,e,t)},spriter.Angle.prototype.selfAdd=function(e){return spriter.Angle.add(this,e,this)},spriter.Angle.tween=function(e,t,r,o,i){return(i=i||new spriter.Angle).rad=spriter.tweenAngleRadians(e.rad,t.rad,r,o),i},spriter.Angle.prototype.tween=function(e,t,r,o){return spriter.Angle.tween(this,e,t,r,o)},spriter.Angle.prototype.selfTween=function(e,t,r){return spriter.Angle.tween(this,e,t,r,this)},spriter.Vector=function(e,t){this.x=e||0,this.y=t||0},spriter.Vector.prototype.x=0,spriter.Vector.prototype.y=0,spriter.Vector.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this},spriter.Vector.add=function(e,t,r){return(r=r||new spriter.Vector).x=e.x+t.x,r.y=e.y+t.y,r},spriter.Vector.prototype.add=function(e,t){return spriter.Vector.add(this,e,t)},spriter.Vector.prototype.selfAdd=function(e){return this.x+=e.x,this.y+=e.y,this},spriter.Vector.tween=function(e,t,r,o){return(o=o||new spriter.Vector).x=spriter.tween(e.x,t.x,r),o.y=spriter.tween(e.y,t.y,r),o},spriter.Vector.prototype.tween=function(e,t,r){return spriter.Vector.tween(this,e,t,r)},spriter.Vector.prototype.selfTween=function(e,t){return spriter.Vector.tween(this,e,t,this)},spriter.Position=function(){goog.base(this,0,0)},goog.inherits(spriter.Position,spriter.Vector),spriter.Rotation=function(){goog.base(this,0)},goog.inherits(spriter.Rotation,spriter.Angle),spriter.Scale=function(){goog.base(this,1,1)},goog.inherits(spriter.Scale,spriter.Vector),spriter.Scale.prototype.selfIdentity=function(){return this.x=1,this.y=1,this},spriter.Pivot=function(){goog.base(this,0,1)},goog.inherits(spriter.Pivot,spriter.Vector),spriter.Pivot.prototype.selfIdentity=function(){return this.x=0,this.y=1,this},spriter.Space=function(){this.position=new spriter.Position,this.rotation=new spriter.Rotation,this.scale=new spriter.Scale},spriter.Space.prototype.position,spriter.Space.prototype.rotation,spriter.Space.prototype.scale,spriter.Space.prototype.copy=function(e){return this.position.copy(e.position),this.rotation.copy(e.rotation),this.scale.copy(e.scale),this},spriter.Space.prototype.load=function(e){var t=this;return t.position.x=spriter.loadFloat(e,"x",0),t.position.y=spriter.loadFloat(e,"y",0),t.rotation.deg=spriter.loadFloat(e,"angle",0),t.scale.x=spriter.loadFloat(e,"scale_x",1),t.scale.y=spriter.loadFloat(e,"scale_y",1),t},spriter.Space.equal=function(e,t,r){return r=r||1e-6,!(Math.abs(e.position.x-t.position.x)>r)&&(!(Math.abs(e.position.y-t.position.y)>r)&&(!(Math.abs(e.rotation.rad-t.rotation.rad)>r)&&(!(Math.abs(e.scale.x-t.scale.x)>r)&&!(Math.abs(e.scale.y-t.scale.y)>r))))},spriter.Space.identity=function(e){return(e=e||new spriter.Space).position.x=0,e.position.y=0,e.rotation.rad=0,e.scale.x=1,e.scale.y=1,e},spriter.Space.translate=function(e,t,r){t*=e.scale.x,r*=e.scale.y;var o=e.rotation.rad,i=Math.cos(o),a=Math.sin(o),n=i*t-a*r,s=a*t+i*r;return e.position.x+=n,e.position.y+=s,e},spriter.Space.rotate=function(e,t){return e.rotation.rad=spriter.wrapAngleRadians(e.rotation.rad+t),e},spriter.Space.scale=function(e,t,r){return e.scale.x*=t,e.scale.y*=r,e},spriter.Space.invert=function(e,t){t=t||new spriter.Space;var r=1/e.scale.x,o=1/e.scale.y,i=-e.rotation.rad,a=-e.position.x,n=-e.position.y;t.scale.x=r,t.scale.y=o;var s=a,p=n,l=t.rotation.rad=i,g=Math.cos(l),c=Math.sin(l),u=g*s-c*p,d=c*s+g*p;return t.position.x=u*r,t.position.y=d*o,t},spriter.Space.combine=function(e,t,r){r=r||new spriter.Space;var o=t.position.x*e.scale.x,i=t.position.y*e.scale.y,a=e.rotation.rad,n=Math.cos(a),s=Math.sin(a),p=n*o-s*i,l=s*o+n*i;return r.position.x=p+e.position.x,r.position.y=l+e.position.y,e.scale.x*e.scale.y<0?r.rotation.rad=spriter.wrapAngleRadians(e.rotation.rad-t.rotation.rad):r.rotation.rad=spriter.wrapAngleRadians(t.rotation.rad+e.rotation.rad),r.scale.x=t.scale.x*e.scale.x,r.scale.y=t.scale.y*e.scale.y,r},spriter.Space.extract=function(e,t,r){(r=r||new spriter.Space).scale.x=e.scale.x/t.scale.x,r.scale.y=e.scale.y/t.scale.y,t.scale.x*t.scale.y<0?r.rotation.rad=spriter.wrapAngleRadians(t.rotation.rad+e.rotation.rad):r.rotation.rad=spriter.wrapAngleRadians(e.rotation.rad-t.rotation.rad);var o=e.position.x-t.position.x,i=e.position.y-t.position.y,a=-t.rotation.rad,n=Math.cos(a),s=Math.sin(a),p=n*o-s*i,l=s*o+n*i;return r.position.x=p/t.scale.x,r.position.y=l/t.scale.y,r},spriter.Space.transform=function(e,t,r){r=r||new spriter.Vector;var o=t.x*e.scale.x,i=t.y*e.scale.y,a=e.rotation.rad,n=Math.cos(a),s=Math.sin(a),p=n*o-s*i,l=s*o+n*i;return r.x=p+e.position.x,r.y=l+e.position.y,r},spriter.Space.untransform=function(e,t,r){r=r||new spriter.Vector;var o=t.x-e.position.x,i=t.y-e.position.y,a=-e.rotation.rad,n=Math.cos(a),s=Math.sin(a),p=n*o-s*i,l=s*o+n*i;return r.x=p/e.scale.x,r.y=l/e.scale.y,r},spriter.Space.tween=function(e,t,r,o,i){return i.position.x=spriter.tween(e.position.x,t.position.x,r),i.position.y=spriter.tween(e.position.y,t.position.y,r),i.rotation.rad=spriter.tweenAngleRadians(e.rotation.rad,t.rotation.rad,r,o),i.scale.x=spriter.tween(e.scale.x,t.scale.x,r),i.scale.y=spriter.tween(e.scale.y,t.scale.y,r),i},spriter.Element=function(){},spriter.Element.prototype.id=-1,spriter.Element.prototype.name="",spriter.Element.prototype.load=function(e){return this.id=spriter.loadInt(e,"id",-1),this.name=spriter.loadString(e,"name",""),this},spriter.File=function(e){goog.base(this),this.type=e},goog.inherits(spriter.File,spriter.Element),spriter.File.prototype.type="unknown",spriter.File.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.ImageFile=function(){goog.base(this,"image"),this.pivot=new spriter.Pivot},goog.inherits(spriter.ImageFile,spriter.File),spriter.ImageFile.prototype.width=0,spriter.ImageFile.prototype.height=0,spriter.ImageFile.prototype.pivot,spriter.ImageFile.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.width=spriter.loadInt(e,"width",0),t.height=spriter.loadInt(e,"height",0),t.pivot.x=spriter.loadFloat(e,"pivot_x",0),t.pivot.y=spriter.loadFloat(e,"pivot_y",1),t},spriter.SoundFile=function(){goog.base(this,"sound")},goog.inherits(spriter.SoundFile,spriter.File),spriter.SoundFile.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.Folder=function(){goog.base(this),this.file_array=[]},goog.inherits(spriter.Folder,spriter.Element),spriter.Folder.prototype.file_array,spriter.Folder.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.file_array=[],e.file=spriter.makeArray(e.file),e.file.forEach(function(e){switch(e.type){case"image":default:t.file_array.push((new spriter.ImageFile).load(e));break;case"sound":t.file_array.push((new spriter.SoundFile).load(e))}}),t},spriter.Object=function(e){this.type=e},spriter.Object.prototype.type="unknown",spriter.Object.prototype.name="",spriter.Object.prototype.load=function(e){return this},spriter.SpriteObject=function(){goog.base(this,"sprite"),this.local_space=new spriter.Space,this.world_space=new spriter.Space,this.pivot=new spriter.Pivot},goog.inherits(spriter.SpriteObject,spriter.Object),spriter.SpriteObject.prototype.parent_index=-1,spriter.SpriteObject.prototype.folder_index=-1,spriter.SpriteObject.prototype.file_index=-1,spriter.SpriteObject.prototype.local_space,spriter.SpriteObject.prototype.world_space,spriter.SpriteObject.prototype.default_pivot=!1,spriter.SpriteObject.prototype.pivot,spriter.SpriteObject.prototype.z_index=0,spriter.SpriteObject.prototype.alpha=1,spriter.SpriteObject.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.folder_index=spriter.loadInt(e,"folder",-1),this.file_index=spriter.loadInt(e,"file",-1),this.local_space.load(e),this.world_space.copy(this.local_space),void 0!==e.pivot_x||void 0!==e.pivot_y?(this.pivot.x=spriter.loadFloat(e,"pivot_x",0),this.pivot.y=spriter.loadFloat(e,"pivot_y",1)):this.default_pivot=!0,this.z_index=spriter.loadInt(e,"z_index",0),this.alpha=spriter.loadFloat(e,"a",1),this},spriter.SpriteObject.prototype.copy=function(e){return this.parent_index=e.parent_index,this.folder_index=e.folder_index,this.file_index=e.file_index,this.local_space.copy(e.local_space),this.world_space.copy(e.world_space),this.default_pivot=e.default_pivot,this.pivot.copy(e.pivot),this.z_index=e.z_index,this.alpha=e.alpha,this},spriter.SpriteObject.prototype.tween=function(e,t,r){spriter.Space.tween(this.local_space,e.local_space,t,r,this.local_space),this.default_pivot||spriter.Vector.tween(this.pivot,e.pivot,t,this.pivot),this.alpha=spriter.tween(this.alpha,e.alpha,t)},spriter.Bone=function(){goog.base(this,"bone"),this.local_space=new spriter.Space,this.world_space=new spriter.Space},goog.inherits(spriter.Bone,spriter.Object),spriter.Bone.prototype.parent_index=-1,spriter.Bone.prototype.local_space,spriter.Bone.prototype.world_space,spriter.Bone.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.local_space.load(e),this.world_space.copy(this.local_space),this},spriter.Bone.prototype.copy=function(e){return this.parent_index=e.parent_index,this.local_space.copy(e.local_space),this.world_space.copy(e.world_space),this},spriter.Bone.prototype.tween=function(e,t,r){spriter.Space.tween(this.local_space,e.local_space,t,r,this.local_space)},spriter.BoxObject=function(){goog.base(this,"box"),this.local_space=new spriter.Space,this.world_space=new spriter.Space,this.pivot=new spriter.Pivot},goog.inherits(spriter.BoxObject,spriter.Object),spriter.BoxObject.prototype.parent_index=-1,spriter.BoxObject.prototype.local_space,spriter.BoxObject.prototype.world_space,spriter.BoxObject.prototype.pivot,spriter.BoxObject.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.local_space.load(e),this.world_space.copy(this.local_space),this.pivot.x=spriter.loadFloat(e,"pivot_x",0),this.pivot.y=spriter.loadFloat(e,"pivot_y",1),this},spriter.BoxObject.prototype.copy=function(e){return this.parent_index=e.parent_index,this.local_space.copy(e.local_space),this.world_space.copy(e.world_space),this.pivot.copy(e.pivot),this},spriter.BoxObject.prototype.tween=function(e,t,r){spriter.Space.tween(this.local_space,e.local_space,t,r,this.local_space)},spriter.PointObject=function(){goog.base(this,"point"),this.local_space=new spriter.Space,this.world_space=new spriter.Space},goog.inherits(spriter.PointObject,spriter.Object),spriter.PointObject.prototype.parent_index=-1,spriter.PointObject.prototype.local_space,spriter.PointObject.prototype.world_space,spriter.PointObject.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.local_space.load(e),this.world_space.copy(this.local_space),this},spriter.PointObject.prototype.copy=function(e){return this.parent_index=e.parent_index,this.local_space.copy(e.local_space),this.world_space.copy(e.world_space),this},spriter.PointObject.prototype.tween=function(e,t,r){spriter.Space.tween(this.local_space,e.local_space,t,r,this.local_space)},spriter.SoundObject=function(){goog.base(this,"sound")},goog.inherits(spriter.SoundObject,spriter.Object),spriter.SoundObject.prototype.folder_index=-1,spriter.SoundObject.prototype.file_index=-1,spriter.SoundObject.prototype.trigger=!1,spriter.SoundObject.prototype.volume=1,spriter.SoundObject.prototype.panning=0,spriter.SoundObject.prototype.load=function(e){return goog.base(this,"load",e),this.folder_index=spriter.loadInt(e,"folder",-1),this.file_index=spriter.loadInt(e,"file",-1),this.trigger=spriter.loadBool(e,"trigger",!1),this.volume=spriter.loadFloat(e,"volume",1),this.panning=spriter.loadFloat(e,"panning",0),this},spriter.SoundObject.prototype.copy=function(e){return this.folder_index=e.folder_index,this.file_index=e.file_index,this.trigger=e.trigger,this.volume=e.volume,this.panning=e.panning,this},spriter.SoundObject.prototype.tween=function(e,t,r){this.volume=spriter.tween(this.volume,e.volume,t),this.panning=spriter.tween(this.panning,e.panning,t)},spriter.EntityObject=function(){goog.base(this,"entity"),this.local_space=new spriter.Space,this.world_space=new spriter.Space},goog.inherits(spriter.EntityObject,spriter.Object),spriter.EntityObject.prototype.parent_index=-1,spriter.EntityObject.prototype.local_space,spriter.EntityObject.prototype.world_space,spriter.EntityObject.prototype.entity_index=-1,spriter.EntityObject.prototype.animation_index=-1,spriter.EntityObject.prototype.animation_time=0,spriter.EntityObject.prototype.pose,spriter.EntityObject.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.local_space.load(e),this.world_space.copy(this.local_space),this.entity_index=spriter.loadInt(e,"entity",-1),this.animation_index=spriter.loadInt(e,"animation",-1),this.animation_time=spriter.loadFloat(e,"t",0),this},spriter.EntityObject.prototype.copy=function(e){return this.parent_index=e.parent_index,this.local_space.copy(e.local_space),this.world_space.copy(e.world_space),this.entity_index=e.entity_index,this.animation_index=e.animation_index,this.animation_time=e.animation_time,this},spriter.EntityObject.prototype.tween=function(e,t,r){spriter.Space.tween(this.local_space,e.local_space,t,r,this.local_space),this.animation_time=spriter.tween(this.animation_time,e.animation_time,t)},spriter.VariableObject=function(){goog.base(this,"variable")},goog.inherits(spriter.VariableObject,spriter.Object),spriter.VariableObject.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.VariableObject.prototype.copy=function(e){return this},spriter.VariableObject.prototype.tween=function(e,t,r){},spriter.Ref=function(){goog.base(this)},goog.inherits(spriter.Ref,spriter.Element),spriter.Ref.prototype.parent_index=-1,spriter.Ref.prototype.timeline_index=-1,spriter.Ref.prototype.keyframe_index=-1,spriter.Ref.prototype.load=function(e){return goog.base(this,"load",e),this.parent_index=spriter.loadInt(e,"parent",-1),this.timeline_index=spriter.loadInt(e,"timeline",-1),this.keyframe_index=spriter.loadInt(e,"key",-1),this},spriter.BoneRef=function(){goog.base(this)},goog.inherits(spriter.BoneRef,spriter.Ref),spriter.BoneRef.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.ObjectRef=function(){goog.base(this)},goog.inherits(spriter.ObjectRef,spriter.Ref),spriter.ObjectRef.prototype.z_index=0,spriter.ObjectRef.prototype.load=function(e){return goog.base(this,"load",e),this.z_index=spriter.loadInt(e,"z_index",0),this},spriter.Keyframe=function(){goog.base(this)},goog.inherits(spriter.Keyframe,spriter.Element),spriter.Keyframe.prototype.time=0,spriter.Keyframe.prototype.load=function(e){return goog.base(this,"load",e),this.time=spriter.loadInt(e,"time",0),this},spriter.Keyframe.find=function(e,t){if(e.length<=0)return-1;if(t<e[0].time)return-1;var r=e.length-1;if(t>=e[r].time)return r;var o=0,i=r;if(0===i)return 0;for(var a=i>>1;;){if(e[a+1].time<=t?o=a+1:i=a,o===i)return o;a=o+i>>1}},spriter.Keyframe.compare=function(e,t){return e.time-t.time},spriter.Curve=function(){},spriter.Curve.prototype.type="linear",spriter.Curve.prototype.c1=0,spriter.Curve.prototype.c2=0,spriter.Curve.prototype.c3=0,spriter.Curve.prototype.c4=0,spriter.Curve.prototype.load=function(e){return this.type=spriter.loadString(e,"curve_type","linear"),this.c1=spriter.loadFloat(e,"c1",0),this.c2=spriter.loadFloat(e,"c2",0),this.c3=spriter.loadFloat(e,"c3",0),this.c4=spriter.loadFloat(e,"c4",0),this},spriter.Curve.prototype.evaluate=function(e){switch(this.type){case"instant":return 0;case"linear":return e;case"quadratic":return spriter.interpolateQuadratic(0,this.c1,1,e);case"cubic":return spriter.interpolateCubic(0,this.c1,this.c2,1,e);case"quartic":return spriter.interpolateQuartic(0,this.c1,this.c2,this.c3,1,e);case"quintic":return spriter.interpolateQuintic(0,this.c1,this.c2,this.c3,this.c4,1,e);case"bezier":return spriter.interpolateBezier(this.c1,this.c2,this.c3,this.c4,e)}return 0},spriter.MainlineKeyframe=function(){goog.base(this),this.curve=new spriter.Curve},goog.inherits(spriter.MainlineKeyframe,spriter.Keyframe),spriter.MainlineKeyframe.prototype.curve,spriter.MainlineKeyframe.prototype.bone_ref_array,spriter.MainlineKeyframe.prototype.object_ref_array,spriter.MainlineKeyframe.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.curve.load(e),t.bone_ref_array=[],e.bone_ref=spriter.makeArray(e.bone_ref),e.bone_ref.forEach(function(e){t.bone_ref_array.push((new spriter.BoneRef).load(e))}),t.bone_ref_array.sort(function(e,t){return e.id-t.id}),t.object_ref_array=[],e.object_ref=spriter.makeArray(e.object_ref),e.object_ref.forEach(function(e){t.object_ref_array.push((new spriter.ObjectRef).load(e))}),t.object_ref_array.sort(function(e,t){return e.id-t.id}),t},spriter.Mainline=function(){},spriter.Mainline.prototype.keyframe_array,spriter.Mainline.prototype.load=function(e){var t=this;return t.keyframe_array=[],e.key=spriter.makeArray(e.key),e.key.forEach(function(e){t.keyframe_array.push((new spriter.MainlineKeyframe).load(e))}),t.keyframe_array.sort(spriter.Keyframe.compare),t},spriter.TimelineKeyframe=function(e){goog.base(this),this.type=e,this.curve=new spriter.Curve},goog.inherits(spriter.TimelineKeyframe,spriter.Keyframe),spriter.TimelineKeyframe.prototype.type="unknown",spriter.TimelineKeyframe.prototype.spin=1,spriter.TimelineKeyframe.prototype.curve,spriter.TimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.spin=spriter.loadInt(e,"spin",1),this.curve.load(e),this},spriter.SpriteTimelineKeyframe=function(){goog.base(this,"sprite")},goog.inherits(spriter.SpriteTimelineKeyframe,spriter.TimelineKeyframe),spriter.SpriteTimelineKeyframe.prototype.sprite,spriter.SpriteTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.sprite=(new spriter.SpriteObject).load(e.object||{}),this},spriter.BoneTimelineKeyframe=function(){goog.base(this,"bone")},goog.inherits(spriter.BoneTimelineKeyframe,spriter.TimelineKeyframe),spriter.BoneTimelineKeyframe.prototype.bone,spriter.BoneTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.bone=(new spriter.Bone).load(e.bone||{}),this},spriter.BoxTimelineKeyframe=function(){goog.base(this,"box")},goog.inherits(spriter.BoxTimelineKeyframe,spriter.TimelineKeyframe),spriter.BoxTimelineKeyframe.prototype.box,spriter.BoxTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.box=(new spriter.BoxObject).load(e.object||{}),this},spriter.PointTimelineKeyframe=function(){goog.base(this,"point")},goog.inherits(spriter.PointTimelineKeyframe,spriter.TimelineKeyframe),spriter.PointTimelineKeyframe.prototype.point,spriter.PointTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.point=(new spriter.PointObject).load(e.object||{}),this},spriter.SoundTimelineKeyframe=function(){goog.base(this,"sound")},goog.inherits(spriter.SoundTimelineKeyframe,spriter.TimelineKeyframe),spriter.SoundTimelineKeyframe.prototype.sound,spriter.SoundTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.sound=(new spriter.SoundObject).load(e.object||{}),this},spriter.EntityTimelineKeyframe=function(){goog.base(this,"entity")},goog.inherits(spriter.EntityTimelineKeyframe,spriter.TimelineKeyframe),spriter.EntityTimelineKeyframe.prototype.entity,spriter.EntityTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.entity=(new spriter.EntityObject).load(e.object||{}),this},spriter.VariableTimelineKeyframe=function(){goog.base(this,"variable")},goog.inherits(spriter.VariableTimelineKeyframe,spriter.TimelineKeyframe),spriter.VariableTimelineKeyframe.prototype.variable,spriter.VariableTimelineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.variable=(new spriter.VariableObject).load(e.object||{}),this},spriter.TagDef=function(){goog.base(this)},goog.inherits(spriter.TagDef,spriter.Element),spriter.TagDef.prototype.tag_index=-1,spriter.TagDef.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.Tag=function(){goog.base(this)},goog.inherits(spriter.Tag,spriter.Element),spriter.Tag.prototype.tag_def_index=-1,spriter.Tag.prototype.load=function(e){return goog.base(this,"load",e),this.tag_def_index=spriter.loadInt(e,"t",-1),this},spriter.TaglineKeyframe=function(){goog.base(this)},goog.inherits(spriter.TaglineKeyframe,spriter.Keyframe),spriter.TaglineKeyframe.prototype.tag_array,spriter.TaglineKeyframe.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.tag_array=[],e.tag=spriter.makeArray(e.tag),e.tag.forEach(function(e){t.tag_array.push((new spriter.Tag).load(e))}),this},spriter.Tagline=function(){goog.base(this),this.keyframe_array=[]},goog.inherits(spriter.Tagline,spriter.Element),spriter.Tagline.prototype.keyframe_array,spriter.Tagline.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.keyframe_array=[],e.key=spriter.makeArray(e.key),e.key.forEach(function(e){t.keyframe_array.push((new spriter.TaglineKeyframe).load(e))}),this},spriter.VarlineKeyframe=function(){goog.base(this)},goog.inherits(spriter.VarlineKeyframe,spriter.Keyframe),spriter.VarlineKeyframe.prototype.val,spriter.VarlineKeyframe.prototype.load=function(e){switch(goog.base(this,"load",e),typeof e.val){case"number":this.val=spriter.loadFloat(e,"val",0);break;case"string":this.val=spriter.loadString(e,"val","")}return this},spriter.Varline=function(){goog.base(this)},goog.inherits(spriter.Varline,spriter.Element),spriter.Varline.prototype.var_def_index=-1,spriter.Varline.prototype.keyframe_array,spriter.Varline.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.var_def_index=spriter.loadInt(e,"def",-1),t.keyframe_array=[],e.key=spriter.makeArray(e.key),e.key.forEach(function(e){t.keyframe_array.push((new spriter.VarlineKeyframe).load(e))}),this},spriter.Meta=function(){goog.base(this)},goog.inherits(spriter.Meta,spriter.Element),spriter.Meta.prototype.tagline,spriter.Meta.prototype.varline_array,spriter.Meta.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.tagline=new spriter.Tagline,e.tagline&&t.tagline.load(e.tagline),t.varline_array=[],e.valline=e.valline||null,e.varline=e.varline||e.valline,e.varline&&(e.varline=spriter.makeArray(e.varline),e.varline.forEach(function(e){t.varline_array.push((new spriter.Varline).load(e))})),t},spriter.Timeline=function(){goog.base(this)},goog.inherits(spriter.Timeline,spriter.Element),spriter.Timeline.prototype.type="sprite",spriter.Timeline.prototype.object_index=-1,spriter.Timeline.prototype.keyframe_array,spriter.Timeline.prototype.meta,spriter.Timeline.prototype.load=function(e){var t=this;switch(goog.base(this,"load",e),t.type=spriter.loadString(e,"object_type","sprite"),t.object_index=spriter.loadInt(e,"obj",-1),t.keyframe_array=[],e.key=spriter.makeArray(e.key),t.type){case"sprite":e.key.forEach(function(e){t.keyframe_array.push((new spriter.SpriteTimelineKeyframe).load(e))});break;case"bone":e.key.forEach(function(e){t.keyframe_array.push((new spriter.BoneTimelineKeyframe).load(e))});break;case"box":e.key.forEach(function(e){t.keyframe_array.push((new spriter.BoxTimelineKeyframe).load(e))});break;case"point":e.key.forEach(function(e){t.keyframe_array.push((new spriter.PointTimelineKeyframe).load(e))});break;case"sound":e.key.forEach(function(e){t.keyframe_array.push((new spriter.SoundTimelineKeyframe).load(e))});break;case"entity":e.key.forEach(function(e){t.keyframe_array.push((new spriter.EntityTimelineKeyframe).load(e))});break;case"variable":e.key.forEach(function(e){t.keyframe_array.push((new spriter.VariableTimelineKeyframe).load(e))});break;default:console.log("TODO: spriter.Timeline::load",t.type,e.key)}return t.keyframe_array.sort(spriter.Keyframe.compare),e.meta&&(t.meta=(new spriter.Meta).load(e.meta)),t},spriter.SoundlineKeyframe=function(){goog.base(this)},goog.inherits(spriter.SoundlineKeyframe,spriter.Keyframe),spriter.SoundlineKeyframe.prototype.sound,spriter.SoundlineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this.sound=(new spriter.SoundObject).load(e.object||{}),this},spriter.Soundline=function(){goog.base(this)},goog.inherits(spriter.Soundline,spriter.Element),spriter.Soundline.prototype.keyframe_array,spriter.Soundline.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.keyframe_array=[],e.key=spriter.makeArray(e.key),e.key.forEach(function(e){t.keyframe_array.push((new spriter.SoundlineKeyframe).load(e))}),t.keyframe_array.sort(spriter.Keyframe.compare),t},spriter.EventlineKeyframe=function(){goog.base(this)},goog.inherits(spriter.EventlineKeyframe,spriter.Keyframe),spriter.EventlineKeyframe.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.Eventline=function(){goog.base(this)},goog.inherits(spriter.Eventline,spriter.Element),spriter.Eventline.prototype.keyframe_array,spriter.Eventline.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.keyframe_array=[],e.key=spriter.makeArray(e.key),e.key.forEach(function(e){t.keyframe_array.push((new spriter.EventlineKeyframe).load(e))}),t.keyframe_array.sort(spriter.Keyframe.compare),t},spriter.MapInstruction=function(){},spriter.MapInstruction.prototype.folder_index=-1,spriter.MapInstruction.prototype.file_index=-1,spriter.MapInstruction.prototype.target_folder_index=-1,spriter.MapInstruction.prototype.target_file_index=-1,spriter.MapInstruction.prototype.load=function(e){var t=this;return t.folder_index=spriter.loadInt(e,"folder",-1),t.file_index=spriter.loadInt(e,"file",-1),t.target_folder_index=spriter.loadInt(e,"target_folder",-1),t.target_file_index=spriter.loadInt(e,"target_file",-1),t},spriter.CharacterMap=function(){goog.base(this),this.map_instruction_array=[]},goog.inherits(spriter.CharacterMap,spriter.Element),spriter.CharacterMap.prototype.map_instruction_array,spriter.CharacterMap.prototype.load=function(e){var r=this;return goog.base(this,"load",e),r.map_instruction_array=[],e.map=spriter.makeArray(e.map),e.map.forEach(function(e){var t=(new spriter.MapInstruction).load(e);r.map_instruction_array.push(t)}),r},spriter.VarDef=function(e){goog.base(this),this.type=e},goog.inherits(spriter.VarDef,spriter.Element),spriter.VarDef.prototype.type="unknown",spriter.VarDef.prototype.load=function(e){return goog.base(this,"load",e),this},spriter.IntVarDef=function(){goog.base(this,"int")},goog.inherits(spriter.IntVarDef,spriter.VarDef),spriter.IntVarDef.prototype.default_value=0,spriter.IntVarDef.prototype.value=0,spriter.IntVarDef.prototype.load=function(e){return goog.base(this,"load",e),this.value=this.default_value=spriter.loadInt(e,"default_value",0),this},spriter.FloatVarDef=function(){goog.base(this,"float")},goog.inherits(spriter.FloatVarDef,spriter.VarDef),spriter.FloatVarDef.prototype.default_value=0,spriter.FloatVarDef.prototype.value=0,spriter.FloatVarDef.prototype.load=function(e){return goog.base(this,"load",e),this.value=this.default_value=spriter.loadFloat(e,"default_value",0),this},spriter.StringVarDef=function(){goog.base(this,"string")},goog.inherits(spriter.StringVarDef,spriter.VarDef),spriter.StringVarDef.prototype.default_value="",spriter.StringVarDef.prototype.value="",spriter.StringVarDef.prototype.load=function(e){return goog.base(this,"load",e),this.value=this.default_value=spriter.loadString(e,"default_value",""),this},spriter.VarDefs=function(){goog.base(this)},goog.inherits(spriter.VarDefs,spriter.Element),spriter.VarDefs.prototype.var_def_array,spriter.VarDefs.prototype.load=function(e){var t=this;goog.base(this,"load",e),this.var_def_array=[];var r=[];return"object"==typeof e.i?r=spriter.makeArray(e.i):"object"==typeof e&&"number"==typeof e.length&&(r=spriter.makeArray(e)),r.forEach(function(e){switch(e.type){case"int":t.var_def_array.push((new spriter.IntVarDef).load(e));break;case"float":t.var_def_array.push((new spriter.FloatVarDef).load(e));break;case"string":t.var_def_array.push((new spriter.StringVarDef).load(e));break;default:console.log("TODO: spriter.VarDefs.load",e.type,e),t.var_def_array.push(new spriter.VarDef(e.type).load(e))}}),this},spriter.ObjInfo=function(e){goog.base(this),this.type=e},goog.inherits(spriter.ObjInfo,spriter.Element),spriter.ObjInfo.prototype.type="unknown",spriter.ObjInfo.prototype.var_defs,spriter.ObjInfo.prototype.load=function(e){return goog.base(this,"load",e),this.var_defs=(new spriter.VarDefs).load(e.var_defs||{}),this},spriter.SpriteFrame=function(){},spriter.SpriteFrame.prototype.folder_index=-1,spriter.SpriteFrame.prototype.file_index=-1,spriter.SpriteFrame.prototype.load=function(e){return this.folder_index=spriter.loadInt(e,"folder",-1),this.file_index=spriter.loadInt(e,"file",-1),this},spriter.SpriteObjInfo=function(){goog.base(this,"sprite")},goog.inherits(spriter.SpriteObjInfo,spriter.ObjInfo),spriter.SpriteObjInfo.prototype.sprite_frame_array,spriter.SpriteObjInfo.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.sprite_frame_array=[],e.frames=spriter.makeArray(e.frames),e.frames.forEach(function(e){t.sprite_frame_array.push((new spriter.SpriteFrame).load(e))}),this},spriter.BoneObjInfo=function(){goog.base(this,"bone")},goog.inherits(spriter.BoneObjInfo,spriter.ObjInfo),spriter.BoneObjInfo.prototype.w=0,spriter.BoneObjInfo.prototype.h=0,spriter.BoneObjInfo.prototype.load=function(e){return goog.base(this,"load",e),this.w=spriter.loadInt(e,"w",0),this.h=spriter.loadInt(e,"h",0),this},spriter.BoxObjInfo=function(){goog.base(this,"box")},goog.inherits(spriter.BoxObjInfo,spriter.ObjInfo),spriter.BoxObjInfo.prototype.w=0,spriter.BoxObjInfo.prototype.h=0,spriter.BoxObjInfo.prototype.load=function(e){return goog.base(this,"load",e),this.w=spriter.loadFloat(e,"w",0),this.h=spriter.loadFloat(e,"h",0),this},spriter.Animation=function(){goog.base(this)},goog.inherits(spriter.Animation,spriter.Element),spriter.Animation.prototype.length=0,spriter.Animation.prototype.looping="true",spriter.Animation.prototype.loop_to=0,spriter.Animation.prototype.mainline,spriter.Animation.prototype.timeline_array,spriter.Animation.prototype.soundline_array,spriter.Animation.prototype.eventline_array,spriter.Animation.prototype.meta,spriter.Animation.prototype.min_time=0,spriter.Animation.prototype.max_time=0,spriter.Animation.prototype.load=function(e){var t=this;return goog.base(this,"load",e),t.length=spriter.loadInt(e,"length",0),t.looping=spriter.loadString(e,"looping","true"),t.loop_to=spriter.loadInt(e,"loop_to",0),t.mainline=(new spriter.Mainline).load(e.mainline||{}),t.timeline_array=[],e.timeline=spriter.makeArray(e.timeline),e.timeline.forEach(function(e){t.timeline_array.push((new spriter.Timeline).load(e))}),t.soundline_array=[],e.soundline=spriter.makeArray(e.soundline),e.soundline.forEach(function(e){t.soundline_array.push((new spriter.Soundline).load(e))}),t.eventline_array=[],e.eventline=spriter.makeArray(e.eventline),e.eventline.forEach(function(e){t.eventline_array.push((new spriter.Eventline).load(e))}),e.meta&&(t.meta=(new spriter.Meta).load(e.meta)),t.min_time=0,t.max_time=t.length,t},spriter.Entity=function(){goog.base(this)},goog.inherits(spriter.Entity,spriter.Element),spriter.Entity.prototype.character_map_map,spriter.Entity.prototype.character_map_keys,spriter.Entity.prototype.var_defs,spriter.Entity.prototype.obj_info_map,spriter.Entity.prototype.obj_info_keys,spriter.Entity.prototype.animation_map,spriter.Entity.prototype.animation_keys,spriter.Entity.prototype.load=function(e){var r=this;return goog.base(this,"load",e),r.character_map_map={},r.character_map_keys=[],e.character_map=spriter.makeArray(e.character_map),e.character_map.forEach(function(e){var t=(new spriter.CharacterMap).load(e);r.character_map_map[t.name]=t,r.character_map_keys.push(t.name)}),this.var_defs=(new spriter.VarDefs).load(e.var_defs||{}),r.obj_info_map={},r.obj_info_keys=[],e.obj_info=spriter.makeArray(e.obj_info),e.obj_info.forEach(function(e){switch(e.type){case"sprite":var t=(new spriter.SpriteObjInfo).load(e);break;case"bone":t=(new spriter.BoneObjInfo).load(e);break;case"box":t=(new spriter.BoxObjInfo).load(e);break;case"point":case"sound":case"entity":case"variable":default:console.log("TODO: spriter.Entity.load",e.type,e);t=new spriter.ObjInfo(e.type).load(e)}r.obj_info_map[t.name]=t,r.obj_info_keys.push(t.name)}),r.animation_map={},r.animation_keys=[],e.animation=spriter.makeArray(e.animation),e.animation.forEach(function(e){var t=(new spriter.Animation).load(e);r.animation_map[t.name]=t,r.animation_keys.push(t.name)}),r},spriter.Data=function(){this.folder_array=[],this.entity_map={},this.entity_keys=[]},spriter.Data.prototype.folder_array,spriter.Data.prototype.tag_def_array,spriter.Data.prototype.entity_map,spriter.Data.prototype.entity_keys,spriter.Data.prototype.load=function(e){var i=this;e=e||{};spriter.loadString(e,"scon_version",""),spriter.loadString(e,"generator",""),spriter.loadString(e,"generator_version","");return i.folder_array=[],e.folder=spriter.makeArray(e.folder),e.folder.forEach(function(e){i.folder_array.push((new spriter.Folder).load(e))}),i.tag_def_array=[],e.tag_list=spriter.makeArray(e.tag_list),e.tag_list.forEach(function(e){i.tag_def_array.push((new spriter.TagDef).load(e))}),i.entity_map={},i.entity_keys=[],e.entity=spriter.makeArray(e.entity),e.entity.forEach(function(e){var t=(new spriter.Entity).load(e);i.entity_map[t.name]=t,i.entity_keys.push(t.name)}),i.entity_keys.forEach(function(e){var t=i.entity_map[e];t.animation_keys.forEach(function(e){t.animation_map[e].timeline_array.forEach(function(e){e.keyframe_array.forEach(function(e){if(e instanceof spriter.SpriteTimelineKeyframe){var t=e.sprite;if(t.default_pivot){var r=i.folder_array[t.folder_index],o=r&&r.file_array[t.file_index];o&&t.pivot.copy(o.pivot)}}})})})}),i},spriter.Data.prototype.getEntities=function(){return this.entity_map},spriter.Data.prototype.getEntityKeys=function(){return this.entity_keys},spriter.Data.prototype.getAnims=function(e){var t=this.entity_map&&this.entity_map[e];return t?t.animation_map:{}},spriter.Data.prototype.getAnimKeys=function(e){var t=this.entity_map&&this.entity_map[e];return t?t.animation_keys:[]},spriter.Pose=function(e){this.data=e||null,this.character_map_key_array=[],this.bone_array=[],this.object_array=[],this.sound_array=[],this.event_array=[],this.tag_array=[],this.var_map={},this.anim_keys=[],this.times=[],this.elapsed_times=[],this.times[0]=0,this.elapsed_times[0]=0,""===this.entity_key&&(this.entity_key=this.data.entity_keys[0],this.anim_keys[0]=this.data.entity_map[this.entity_key].animation_keys[0])},spriter.Pose.prototype.data,spriter.Pose.prototype.entity_key="",spriter.Pose.prototype.character_map_key_array,spriter.Pose.prototype.anim_keys=[],spriter.Pose.prototype.times=[],spriter.Pose.prototype.elapsed_times=[],spriter.Pose.prototype.dirty=!0,spriter.Pose.prototype.bone_array,spriter.Pose.prototype.object_array,spriter.Pose.prototype.sound_array,spriter.Pose.prototype.event_array,spriter.Pose.prototype.tag_array,spriter.Pose.prototype.var_map,spriter.Pose.prototype.getEntities=function(){return this.data?this.data.getEntities():null},spriter.Pose.prototype.getEntityKeys=function(){return this.data?this.data.getEntityKeys():null},spriter.Pose.prototype.curEntity=function(){var e=this.data.entity_map;return e&&e[this.entity_key]},spriter.Pose.prototype.getEntity=function(){return this.entity_key},spriter.Pose.prototype.setEntity=function(e){this.entity_key!==e&&""!==e&&(this.entity_key=e,this.anim_keys[0]="",this.times[0]=0,this.dirty=!0,this.bone_array=[],this.object_array=[])},spriter.Pose.prototype.getAnims=function(){return this.data?this.data.getAnims(this.entity_key):null},spriter.Pose.prototype.getAnimKeys=function(){return this.data?this.data.getAnimKeys(this.entity_key):null},spriter.Pose.prototype.curAnim=function(e){var t=this.getAnims();return t&&t[this.anim_keys[e]]},spriter.Pose.prototype.curAnimLength=function(e){var t,r=this.data,o=r&&r.entity_map[this.entity_key];return(t=isNaN(e)?o&&o.animation_map[e]:o&&o.animation_map[this.anim_keys[e]])&&t.length||0},spriter.Pose.prototype.getAnim=function(e){return this.anim_keys[e]},spriter.Pose.prototype.setAnims=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];this.anim_keys[e]!==t&&(this.anim_keys[e]=t,this.times[e]=0,this.elapsed_times[e]=0,this.dirty=!0)}},spriter.Pose.prototype.getTime=function(e){return this.times[e]},spriter.Pose.prototype.setTimes=function(){for(var e=0;e<arguments.length;e++){time=arguments[e];var t=this.curAnim(e);t&&(time=spriter.wrap(time,t.min_time,t.max_time)),this.times[e]!==time&&(this.times[e]=time,this.elapsed_times[e]=0,this.dirty=!0)}},spriter.Pose.prototype.updates=function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];this.elapsed_times[e]+=t}this.dirty=!0},spriter.Pose.prototype.strike=function(e){var c=this;if(c.dirty||1!==c.anim_keys.length){c.dirty=!1;var u=c.curEntity();1<c.anim_keys.length&&(c.character_map_key_array=[],c.bone_array=[],c.object_array=[],c.sound_array=[],c.event_array=[],c.tag_array=[],c.var_map={}),c.var_map=c.var_map||{},u.var_defs.var_def_array.forEach(function(e){e.name in c.var_map||(c.var_map[e.name]=e.default_value)});var b=c.curAnim(e-1),o=c.times[e-1],i=c.elapsed_times[e-1];c.times[e-1]=c.times[e-1]+c.elapsed_times[e-1],c.elapsed_times[e-1]=0;var a=!1,n=!1;b&&(a=i<0&&c.times[e-1]<=b.min_time,n=0<i&&c.times[e-1]>=b.max_time,c.times[e-1]=spriter.wrap(c.times[e-1],b.min_time,b.max_time));var d=c.times[e-1];if(b){var t=b.mainline.keyframe_array,r=spriter.Keyframe.find(t,d),s=(r+1)%t.length,p=t[r],l=t[s],g=p.time,f=l.time;f<g&&(f=b.length);var v=d;if(g!==f){var y=(d-g)/(f-g);y=p.curve.evaluate(y),v=spriter.tween(g,f,y)}var S=b.timeline_array,h=p.bone_ref_array,_=c.bone_array;h.forEach(function(e,t){var r=e.timeline_index,o=S[r],i=o.keyframe_array,a=e.keyframe_index,n=(a+1)%i.length,s=i[a],p=i[n],l=s.time,g=p.time;g<l&&(g=b.length);var c=0;l!==g&&(c=(v-l)/(g-l),c=s.curve.evaluate(c));var u=_[t]=_[t]||new spriter.Bone;u.copy(s.bone).tween(p.bone,c,s.spin),u.name=o.name,u.parent_index=e.parent_index}),_.length=h.length,_.forEach(function(e){var t=_[e.parent_index];t?spriter.Space.combine(t.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space)});var m=p.object_ref_array,E=c.object_array;if(m.forEach(function(e,t){var r=e.timeline_index,o=S[r],i=o.keyframe_array,a=e.keyframe_index,n=(a+1)%i.length,s=i[a],p=i[n],l=s.time,g=p.time;g<l&&(g=b.length);var c=0;switch(l!==g&&(c=(v-l)/(g-l),c=s.curve.evaluate(c)),o.type){case"sprite":var u=E[t]=E[t]||new spriter.SpriteObject;u.copy(s.sprite).tween(p.sprite,c,s.spin),u.name=o.name,u.parent_index=e.parent_index;break;case"bone":var d=E[t]=E[t]||new spriter.Bone;d.copy(s.bone).tween(p.bone,c,s.spin),d.name=o.name,d.parent_index=e.parent_index;break;case"box":var f=E[t]=E[t]||new spriter.BoxObject;f.copy(s.box).tween(p.box,c,s.spin),f.name=o.name,f.parent_index=e.parent_index;break;case"point":var y=E[t]=E[t]||new spriter.PointObject;y.copy(s.point).tween(p.point,c,s.spin),y.name=o.name,y.parent_index=e.parent_index;break;case"sound":var h=E[t]=E[t]||new spriter.SoundObject;h.copy(s.sound).tween(p.sound,c,s.spin),h.name=o.name;break;case"entity":var _=E[t]=E[t]||new spriter.EntityObject;_.copy(s.entity).tween(p.entity,c,s.spin),_.name=o.name,_.parent_index=e.parent_index;break;case"variable":var m=E[t]=E[t]||new spriter.VariableObject;m.name=o.name,m.copy(s.variable).tween(p.variable,c,s.spin);break;default:throw new Error(o.type)}}),E.length=m.length,c.character_map_key_array.forEach(function(e){var t=u.character_map_map[e];t&&t.map_instruction_array.forEach(function(t){E.forEach(function(e){switch(e.type){case"sprite":e.folder_index===t.folder_index&&e.file_index===t.file_index&&(e.folder_index=t.target_folder_index,e.file_index=t.target_file_index);break;case"bone":case"box":case"sound":case"event":case"entity":case"variable":break;default:throw new Error(e.type)}})})}),E.forEach(function(e){switch(e.type){case"sprite":(s=_[e.parent_index])?spriter.Space.combine(s.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space);var t=c.data.folder_array[e.folder_index],r=t&&t.file_array[e.file_index];if(r){var o=e.default_pivot?r.pivot:e.pivot,i=(.5-o.x)*r.width,a=(.5-o.y)*r.height;spriter.Space.translate(e.world_space,i,a)}break;case"bone":(s=_[e.parent_index])?spriter.Space.combine(s.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space);break;case"box":(s=_[e.parent_index])?spriter.Space.combine(s.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space);var n=u.obj_info_map[e.name];if(n){i=(.5-e.pivot.x)*n.w,a=(.5-e.pivot.y)*n.h;spriter.Space.translate(e.world_space,i,a)}break;case"point":(s=_[e.parent_index])?spriter.Space.combine(s.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space);break;case"sound":break;case"entity":var s;(s=_[e.parent_index])?spriter.Space.combine(s.world_space,e.local_space,e.world_space):e.world_space.copy(e.local_space);break;case"variable":break;default:throw new Error(e.type)}}),E.forEach(function(e){switch(e.type){case"entity":var t=e.pose=e.pose||new spriter.Pose(c.data),r=t.data.entity_keys[e.entity_index];r!==t.getEntity()&&t.setEntity(r);var o=t.curEntity().animation_keys[e.animation_index];if(o!==t.getAnim()){var i=t.curAnimLength(o),a=e.animation_time*i;t.setTimes(a)}else{i=t.curAnimLength(o);var n=(a=e.animation_time*i)-t.getTime(0);t.update(n)}t.strike(1)}}),c.sound_array=[],b.soundline_array.forEach(function(e){function t(e){var t=c.data.folder_array[e.sound.folder_index],r=t&&t.file_array[e.sound.file_index];c.sound_array.push({name:r.name,volume:e.sound.volume,panning:e.sound.panning})}i<0?a?e.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<o||d<=e.time&&e.time<=b.max_time)&&t(e)}):e.keyframe_array.forEach(function(e){d<=e.time&&e.time<o&&t(e)}):n?e.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<=d||o<e.time&&e.time<=b.max_time)&&t(e)}):e.keyframe_array.forEach(function(e){o<e.time&&e.time<=d&&t(e)})}),c.event_array=[],b.eventline_array.forEach(function(t){function r(e){c.event_array.push(t.name)}i<0?a?t.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<o||d<=e.time&&e.time<=b.max_time)&&r()}):t.keyframe_array.forEach(function(e){d<=e.time&&e.time<o&&r()}):n?t.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<=d||o<e.time&&e.time<=b.max_time)&&r()}):t.keyframe_array.forEach(function(e){o<e.time&&e.time<=d&&r()})}),b.meta){if(b.meta.tagline){var w=function(e){c.tag_array=[],e.tag_array.forEach(function(e){var t=c.data.tag_def_array[e.tag_def_index];c.tag_array.push(t.name)}),c.tag_array.sort()};i<0?a?b.meta.tagline.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<o||d<=e.time&&e.time<=b.max_time)&&w(e)}):b.meta.tagline.keyframe_array.forEach(function(e){d<=e.time&&e.time<o&&w(e)}):n?b.meta.tagline.keyframe_array.forEach(function(e){(b.min_time<=e.time&&e.time<=d||o<e.time&&e.time<=b.max_time)&&w(e)}):b.meta.tagline.keyframe_array.forEach(function(e){o<e.time&&e.time<=d&&w(e)})}c.var_map=c.var_map||{},b.meta.varline_array.forEach(function(e){var t=e.keyframe_array,r=spriter.Keyframe.find(t,d);if(-1!==r){var o=(r+1)%t.length,i=t[r],a=t[o],n=i.time,s=a.time;s<n&&(s=b.length);var p=0;n!==s&&(p=(d-n)/(s-n));var l=u.var_defs.var_def_array[e.var_def_index],g=0;switch(l.type){case"int":g=0|spriter.tween(+i.val,+a.val,p);break;case"float":g=spriter.tween(+i.val,+a.val,p);break;case"string":g=i.val}c.var_map[l.name]=g}})}}}},function(e,I,t){I.SpriteFrameCache=I.Class({properties:{_spriteFrames:null,_spriteFramesAliases:null,_loadedFileNames:null},ctor:function(){this._spriteFrames={},this._spriteFramesAliases={},this._loadedFileNames=[]},_addSpriteFramesWithDictionary:function(e,t){var r=e.metadata,o=e.frames,i=0;for(var a in null!=r&&(i=parseInt(this._valueForKey("format",r))),I.Assert(0<=i&&i<=3,"format is not supported for cc.SpriteFrameCache addSpriteFramesWithDictionary:textureFilename:"),o){var n=o[a];if(n){var s=this._spriteFrames[a];if(s)continue;if(0==i){var p=parseFloat(this._valueForKey("x",n)),l=parseFloat(this._valueForKey("y",n)),g=parseFloat(this._valueForKey("width",n)),c=parseFloat(this._valueForKey("height",n)),u=parseFloat(this._valueForKey("offsetX",n)),d=parseFloat(this._valueForKey("offsetY",n)),f=parseInt(this._valueForKey("originalWidth",n)),y=parseInt(this._valueForKey("originalHeight",n));f&&y||I.log("cocos2d: WARNING: originalWidth/Height not found on the cc.SpriteFrame. AnchorPoint won't work as expected. Regenrate the .plist"),f=Math.abs(f),y=Math.abs(y),(s=new I.SpriteFrame).initWithTexture(t,I.rect(p,l,g,c),!1,I.p(u,d),I.size(f,y))}else if(1==i||2==i){var h=I.RectFromString(this._valueForKey("frame",n)),_=!1;2==i&&(_="true"==this._valueForKey("rotated",n));var m=I.PointFromString(this._valueForKey("offset",n)),b=I.SizeFromString(this._valueForKey("sourceSize",n));(s=new I.SpriteFrame).initWithTexture(t,h,_,m,b)}else if(3==i){var v,S,E,w,x;v=I.SizeFromString(this._valueForKey("spriteSize",n)),S=I.PointFromString(this._valueForKey("spriteOffset",n)),E=I.SizeFromString(this._valueForKey("spriteSourceSize",n)),w=I.RectFromString(this._valueForKey("textureRect",n)),x="true"==this._valueForKey("textureRotated",n);var O=n.aliases,L=a.toString();for(var P in O)this._spriteFramesAliases.hasOwnProperty(O[P])&&I.log("cocos2d: WARNING: an alias with name "+P+" already exists"),this._spriteFramesAliases[O[P]]=L;s=new I.SpriteFrame,n.hasOwnProperty("spriteSize")?s.initWithTexture(t,I.rect(w.x,w.y,v.width,v.height),x,S,E):s.initWithTexture(t,v,x,S,E)}if(I.renderContextType===I.CANVAS&&s.isRotated())if(s.getTexture().isLoaded()){var D=s.getTexture().getHtmlElementObj();D=I.cutRotateImageToCanvas(D,s.getRect());var T=new I.Texture2D;T.initWithElement(D),T.handleLoadedTexture(),s.setTexture(T);var F=s.getRect();s.setRect(I.rect(0,0,F.width,F.height))}this._spriteFrames[a]=s}}},addSpriteFramesWithJson:function(e){I.log("addSpriteFramesWithJson is deprecated, because Json format doesn't support on JSB. Use XML format instead");var t=e,r="",o=t.metadata;o&&(r=(r=this._valueForKey("textureFileName",o)).toString());var i=I.TextureCache.getInstance().addImage(r);i?this._addSpriteFramesWithDictionary(t,i):I.log("cocos2d: cc.SpriteFrameCache: Couldn't load texture")},addSpriteFrames:function(e,t){var r=I.FileUtils.getInstance(),o=r.fullPathForFilename(e),i=r.dictionaryWithContentsOfFileThreadSafe(o);switch(arguments.length){case 1:if(I.Assert(e,"plist filename should not be NULL"),!I.ArrayContainsObject(this._loadedFileNames,e)){var a="",n=i.metadata;if(n&&(a=this._valueForKey("textureFileName",n).toString()),""!=a)a=r.fullPathFromRelativeFile(a,e);else{var s=(a=e).lastIndexOf(".",a.length);a=a.substr(0,s),a+=".png"}var p=I.TextureCache.getInstance().addImage(a);p?this._addSpriteFramesWithDictionary(i,p):I.log("cocos2d: cc.SpriteFrameCache: Couldn't load texture")}break;case 2:if(t instanceof I.Texture2D)this._addSpriteFramesWithDictionary(i,t);else{var l=t;I.Assert(l,"texture name should not be null");var g=I.TextureCache.getInstance().addImage(l);g?this._addSpriteFramesWithDictionary(i,g):I.log("cocos2d: cc.SpriteFrameCache: couldn't load texture file. File not found "+l)}break;default:throw"Argument must be non-nil "}},addSpriteFrame:function(e,t){this._spriteFrames[t]=e},removeSpriteFrames:function(){this._spriteFrames=[],this._spriteFramesAliases=[],this._loadedFileNames={}},removeSpriteFrameByName:function(e){e&&(this._spriteFramesAliases.hasOwnProperty(e)&&delete this._spriteFramesAliases[e],this._spriteFrames.hasOwnProperty(e)&&delete this._spriteFrames[e],this._loadedFileNames={})},removeSpriteFramesFromFile:function(e){var t=I.FileUtils.getInstance(),r=t.fullPathForFilename(e),o=t.dictionaryWithContentsOfFileThreadSafe(r);this._removeSpriteFramesFromDictionary(o),I.ArrayContainsObject(this._loadedFileNames,e)&&I.ArrayRemoveObject(e)},_removeSpriteFramesFromDictionary:function(e){var t=e.frames;for(var r in t)this._spriteFrames.hasOwnProperty(r)&&delete this._spriteFrames[r]},removeSpriteFramesFromTexture:function(e){for(var t in this._spriteFrames){var r=this._spriteFrames[t];r&&r.getTexture()==e&&delete this._spriteFrames[t]}},getSpriteFrame:function(e){var t,r;(this._spriteFrames.hasOwnProperty(e)&&(t=this._spriteFrames[e]),t)||(this._spriteFramesAliases.hasOwnProperty(e)&&(r=this._spriteFramesAliases[e]),r&&(this._spriteFrames.hasOwnProperty(r.toString())&&(t=this._spriteFrames[r.toString()]),t||I.log("cocos2d: cc.SpriteFrameCahce: Frame "+e+" not found")));return t},_valueForKey:function(e,t){return t&&t.hasOwnProperty(e)?t[e].toString():""}}),I.s_sharedSpriteFrameCache=null,I.SpriteFrameCache.getInstance=function(){return I.s_sharedSpriteFrameCache||(I.s_sharedSpriteFrameCache=new I.SpriteFrameCache),I.s_sharedSpriteFrameCache},I.SpriteFrameCache.purgeSharedSpriteFrameCache=function(){I.s_sharedSpriteFrameCache=null}}(window,window.cc,spriter);