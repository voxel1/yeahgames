(function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).nakamajs={})})(this,function(e){"use strict";var t="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==t&&t,r={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function s(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function c(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function h(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function d(e){var t=new FileReader,r=h(t);return t.readAsArrayBuffer(e),r}function l(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&(t=e)&&DataView.prototype.isPrototypeOf(t)?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=c(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?c(this)||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer)):this.blob().then(d)}),this.text=function(){var e,t,r,n=c(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,r=h(t=new FileReader),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(l(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}u.prototype.append=function(e,t){e=s(e),t=o(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},u.prototype.delete=function(e){delete this.map[s(e)]},u.prototype.get=function(e){return e=s(e),this.has(e)?this.map[e]:null},u.prototype.has=function(e){return this.map.hasOwnProperty(s(e))},u.prototype.set=function(e,t){this.map[s(e)]=o(t)},u.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},u.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),a(e)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),a(e)},u.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),a(e)},r.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){if(!(this instanceof v))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new u(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new u(t.headers)),this.method=(n=(r=t.method||this.method||"GET").toUpperCase(),m.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;s.test(this.url)?this.url=this.url.replace(s,"$1_="+(new Date).getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}function b(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}}),t}function w(e,t){if(!(this instanceof w))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new u(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},p.call(v.prototype),p.call(w.prototype),w.prototype.clone=function(){return new w(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},w.error=function(){var e=new w(null,{status:0,statusText:""});return e.type="error",e};var _=[301,302,303,307,308];w.redirect=function(e,t){if(-1===_.indexOf(t))throw new RangeError("Invalid status code");return new w(null,{status:t,headers:{location:e}})};var y=t.DOMException;try{new y}catch(_e){(y=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),y.prototype.constructor=y}function g(e,n){return new Promise(function(i,s){var a=new v(e,n);if(a.signal&&a.signal.aborted)return s(new y("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}c.onload=function(){var e,t,r={status:c.status,statusText:c.statusText,headers:(e=c.getAllResponseHeaders()||"",t=new u,e.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e}).forEach(function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}}),t)};r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var n="response"in c?c.response:c.responseText;setTimeout(function(){i(new w(n,r))},0)},c.onerror=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},c.ontimeout=function(){setTimeout(function(){s(new TypeError("Network request failed"))},0)},c.onabort=function(){setTimeout(function(){s(new y("Aborted","AbortError"))},0)},c.open(a.method,function(e){try{return""===e&&t.location.href?t.location.href:e}catch(r){return e}}(a.url),!0),"include"===a.credentials?c.withCredentials=!0:"omit"===a.credentials&&(c.withCredentials=!1),"responseType"in c&&(r.blob?c.responseType="blob":r.arrayBuffer&&a.headers.get("Content-Type")&&-1!==a.headers.get("Content-Type").indexOf("application/octet-stream")&&(c.responseType="arraybuffer")),!n||"object"!=typeof n.headers||n.headers instanceof u?a.headers.forEach(function(e,t){c.setRequestHeader(t,e)}):Object.getOwnPropertyNames(n.headers).forEach(function(e){c.setRequestHeader(e,o(n.headers[e]))}),a.signal&&(a.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&a.signal.removeEventListener("abort",h)}),c.send(void 0===a._bodyInit?null:a._bodyInit)})}g.polyfill=!0,t.fetch||(t.fetch=g,t.Headers=u,t.Request=v,t.Response=w);var k=function(){return(k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function P(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{u(n.next(e))}catch(t){s(t)}}function a(e){try{u(n.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(o,a)}u((n=n.apply(e,t||[])).next())})}function T(e,t){var r,n,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(e){return function(t){return u([e,t])}}function u(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function S(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function R(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)o.push(n.value)}catch(a){i={error:a}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o}const x="function"==typeof atob,M="function"==typeof btoa,O="function"==typeof Buffer,E="function"==typeof TextDecoder?new TextDecoder:void 0,A="function"==typeof TextEncoder?new TextEncoder:void 0,C=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),N=(()=>{let e={};return C.forEach((t,r)=>e[t]=r),e})(),U=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,q=String.fromCharCode.bind(String),j="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),F=e=>e.replace(/=/g,"").replace(/[+\/]/g,e=>"+"==e?"-":"_"),I=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),B=M?e=>btoa(e):O?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,n,i,s="";const o=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(n=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");s+=C[(t=r<<16|n<<8|i)>>18&63]+C[t>>12&63]+C[t>>6&63]+C[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},D=O?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(q.apply(null,e.subarray(r,r+4096)));return B(t.join(""))},z=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?q(192|t>>>6)+q(128|63&t):q(224|t>>>12&15)+q(128|t>>>6&63)+q(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return q(240|t>>>18&7)+q(128|t>>>12&63)+q(128|t>>>6&63)+q(128|63&t)},G=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,J=e=>e.replace(G,z),L=O?e=>Buffer.from(e,"utf8").toString("base64"):A?e=>D(A.encode(e)):e=>B(J(e)),H=(e,t=!1)=>t?F(L(e)):L(e),W=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,K=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return q(55296+(t>>>10))+q(56320+(1023&t));case 3:return q((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return q((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},X=e=>e.replace(W,K),V=x?e=>atob(I(e)):O?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!U.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,i="";for(let s=0;s<e.length;)t=N[e.charAt(s++)]<<18|N[e.charAt(s++)]<<12|(r=N[e.charAt(s++)])<<6|(n=N[e.charAt(s++)]),i+=64===r?q(t>>16&255):64===n?q(t>>16&255,t>>8&255):q(t>>16&255,t>>8&255,255&t);return i},Y=O?e=>j(Buffer.from(e,"base64")):e=>j(V(e).split("").map(e=>e.charCodeAt(0))),Z=O?e=>Buffer.from(e,"base64").toString("utf8"):E?e=>E.decode(Y(e)):e=>X(V(e)),$=e=>I(e.replace(/[-_]/g,e=>"-"==e?"+":"/")),Q=e=>Z($(e));function ee(e,t,r){var n=k({method:e},t);if(n.headers=k({},t.headers),"undefined"!=typeof XMLHttpRequest){var i=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");(null==i?void 0:i.set)||(n.credentials="cocos-ignore")}return Object.keys(n.headers).includes("Accept")||(n.headers.Accept="application/json"),Object.keys(n.headers).includes("Content-Type")||(n.headers["Content-Type"]="application/json"),Object.keys(n.headers).forEach(function(e){n.headers[e]||delete n.headers[e]}),r&&(n.body=r),n}var te,re,ne;(function(e){e[e.NO_OVERRIDE=0]="NO_OVERRIDE",e[e.BEST=1]="BEST",e[e.SET=2]="SET",e[e.INCREMENT=3]="INCREMENT",e[e.DECREMENT=4]="DECREMENT"})(te||(te={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.SANDBOX=1]="SANDBOX",e[e.PRODUCTION=2]="PRODUCTION"}(re||(re={})),function(e){e[e.APPLE_APP_STORE=0]="APPLE_APP_STORE",e[e.GOOGLE_PLAY_STORE=1]="GOOGLE_PLAY_STORE",e[e.HUAWEI_APP_GALLERY=2]="HUAWEI_APP_GALLERY",e[e.FACEBOOK_INSTANT_STORE=3]="FACEBOOK_INSTANT_STORE"}(ne||(ne={}));for(var ie=function(){function e(e,t,r){this.serverKey=e,this.basePath=t,this.timeoutMs=r}return e.prototype.healthcheck=function(e,t){var r=this;void 0===t&&(t={});var n=new Map,i=this.buildFullUrl(this.basePath,"/healthcheck",n),s=ee("GET",t,"");return e&&(s.headers.Authorization="Bearer "+e),Promise.race([fetch(i,s).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},e.prototype.deleteAccount=function(e,t){var r=this;void 0===t&&(t={});var n=new Map,i=this.buildFullUrl(this.basePath,"/v2/account",n),s=ee("DELETE",t,"");return e&&(s.headers.Authorization="Bearer "+e),Promise.race([fetch(i,s).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},e.prototype.getAccount=function(e,t){var r=this;void 0===t&&(t={});var n=new Map,i=this.buildFullUrl(this.basePath,"/v2/account",n),s=ee("GET",t,"");return e&&(s.headers.Authorization="Bearer "+e),Promise.race([fetch(i,s).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,r.timeoutMs,"Request timed out.")})])},e.prototype.updateAccount=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account",s),a=ee("PUT",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.authenticateApple=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/apple",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateCustom=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/custom",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateDevice=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/device",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateEmail=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/email",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateFacebook=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var u,c=new Map;c.set("create",n),c.set("username",i),c.set("sync",s),u=JSON.stringify(r||{});var h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebook",c),d=ee("POST",o,u);return e&&(d.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.authenticateFacebookInstantGame=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/facebookinstantgame",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateGameCenter=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/gamecenter",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateGoogle=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var a,u=new Map;u.set("create",n),u.set("username",i),a=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,"/v2/account/authenticate/google",u),h=ee("POST",s,a);return e&&(h.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.authenticateSteam=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==r)throw new Error("'account' is a required parameter but is null or undefined.");var u,c=new Map;c.set("create",n),c.set("username",i),c.set("sync",s),u=JSON.stringify(r||{});var h=this.buildFullUrl(this.basePath,"/v2/account/authenticate/steam",c),d=ee("POST",o,u);return e&&(d.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.linkApple=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/apple",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkCustom=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/custom",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkDevice=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/device",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkEmail=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/email",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkFacebook=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'account' is a required parameter but is null or undefined.");var s,o=new Map;o.set("sync",r),s=JSON.stringify(t||{});var a=this.buildFullUrl(this.basePath,"/v2/account/link/facebook",o),u=ee("POST",n,s);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.linkFacebookInstantGame=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/facebookinstantgame",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkGameCenter=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/gamecenter",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkGoogle=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/google",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.linkSteam=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/link/steam",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.sessionRefresh=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==r)throw new Error("'body' is a required parameter but is null or undefined.");var s,o=new Map;s=JSON.stringify(r||{});var a=this.buildFullUrl(this.basePath,"/v2/account/session/refresh",o),u=ee("POST",n,s);return e&&(u.headers.Authorization="Basic "+H(e+":"+t)),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.unlinkApple=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/apple",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkCustom=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/custom",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkDevice=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/device",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkEmail=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/email",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkFacebook=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebook",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkFacebookInstantGame=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/facebookinstantgame",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkGameCenter=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/gamecenter",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkGoogle=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/google",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.unlinkSteam=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/account/unlink/steam",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listChannelMessages=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==t)throw new Error("'channelId' is a required parameter but is null or undefined.");var a="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(t))),u=new Map;u.set("limit",r),u.set("forward",n),u.set("cursor",i);var c=this.buildFullUrl(this.basePath,a,u),h=ee("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.event=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/event",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.deleteFriends=function(e,t,r,n){var i=this;void 0===n&&(n={});var s=new Map;s.set("ids",t),s.set("usernames",r);var o=this.buildFullUrl(this.basePath,"/v2/friend",s),a=ee("DELETE",n,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.listFriends=function(e,t,r,n,i){var s=this;void 0===i&&(i={});var o=new Map;o.set("limit",t),o.set("state",r),o.set("cursor",n);var a=this.buildFullUrl(this.basePath,"/v2/friend",o),u=ee("GET",i,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},e.prototype.addFriends=function(e,t,r,n){var i=this;void 0===n&&(n={});var s=new Map;s.set("ids",t),s.set("usernames",r);var o=this.buildFullUrl(this.basePath,"/v2/friend",s),a=ee("POST",n,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.blockFriends=function(e,t,r,n){var i=this;void 0===n&&(n={});var s=new Map;s.set("ids",t),s.set("usernames",r);var o=this.buildFullUrl(this.basePath,"/v2/friend/block",s),a=ee("POST",n,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.importFacebookFriends=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'account' is a required parameter but is null or undefined.");var s,o=new Map;o.set("reset",r),s=JSON.stringify(t||{});var a=this.buildFullUrl(this.basePath,"/v2/friend/facebook",o),u=ee("POST",n,s);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.listFriendsOfFriends=function(e,t,r,n){var i=this;void 0===n&&(n={});var s=new Map;s.set("limit",t),s.set("cursor",r);var o=this.buildFullUrl(this.basePath,"/v2/friend/friends",s),a=ee("GET",n,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.importSteamFriends=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'account' is a required parameter but is null or undefined.");var s,o=new Map;o.set("reset",r),s=JSON.stringify(t||{});var a=this.buildFullUrl(this.basePath,"/v2/friend/steam",o),u=ee("POST",n,s);return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.listGroups=function(e,t,r,n,i,s,o,a){var u=this;void 0===a&&(a={});var c=new Map;c.set("name",t),c.set("cursor",r),c.set("limit",n),c.set("lang_tag",i),c.set("members",s),c.set("open",o);var h=this.buildFullUrl(this.basePath,"/v2/group",c),d=ee("GET",a,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,u.timeoutMs,"Request timed out.")})])},e.prototype.createGroup=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/group",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.deleteGroup=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("DELETE",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.updateGroup=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'body' is a required parameter but is null or undefined.");var s,o="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(t))),a=new Map;s=JSON.stringify(r||{});var u=this.buildFullUrl(this.basePath,o,a),c=ee("PUT",n,s);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(u,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.addGroupUsers=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var s="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(t))),o=new Map;o.set("user_ids",r);var a=this.buildFullUrl(this.basePath,s,o),u=ee("POST",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.banGroupUsers=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var s="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(t))),o=new Map;o.set("user_ids",r);var a=this.buildFullUrl(this.basePath,s,o),u=ee("POST",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.demoteGroupUsers=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var s="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(t))),o=new Map;o.set("user_ids",r);var a=this.buildFullUrl(this.basePath,s,o),u=ee("POST",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.joinGroup=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.kickGroupUsers=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var s="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(t))),o=new Map;o.set("user_ids",r);var a=this.buildFullUrl(this.basePath,s,o),u=ee("POST",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.leaveGroup=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var i="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.promoteGroupUsers=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var s="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(t))),o=new Map;o.set("user_ids",r);var a=this.buildFullUrl(this.basePath,s,o),u=ee("POST",n,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.listGroupUsers=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==t)throw new Error("'groupId' is a required parameter but is null or undefined.");var a="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(t))),u=new Map;u.set("limit",r),u.set("state",n),u.set("cursor",i);var c=this.buildFullUrl(this.basePath,a,u),h=ee("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.validatePurchaseApple=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/purchase/apple",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.validatePurchaseFacebookInstant=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/purchase/facebookinstant",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.validatePurchaseGoogle=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/purchase/google",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.validatePurchaseHuawei=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/purchase/huawei",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listSubscriptions=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/subscription",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.validateSubscriptionApple=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/subscription/apple",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.validateSubscriptionGoogle=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/iap/subscription/google",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.getSubscription=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'productId' is a required parameter but is null or undefined.");var i="/v2/iap/subscription/{productId}".replace("{productId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("GET",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.deleteLeaderboardRecord=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");var i="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("DELETE",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listLeaderboardRecords=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");var u="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),c=new Map;c.set("owner_ids",r),c.set("limit",n),c.set("cursor",i),c.set("expiry",s);var h=this.buildFullUrl(this.basePath,u,c),d=ee("GET",o,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.writeLeaderboardRecord=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'record' is a required parameter but is null or undefined.");var s,o="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(t))),a=new Map;s=JSON.stringify(r||{});var u=this.buildFullUrl(this.basePath,o,a),c=ee("POST",n,s);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(u,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.listLeaderboardRecordsAroundOwner=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==t)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'ownerId' is a required parameter but is null or undefined.");var u="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(t))).replace("{ownerId}",encodeURIComponent(String(r))),c=new Map;c.set("limit",n),c.set("expiry",i),c.set("cursor",s);var h=this.buildFullUrl(this.basePath,u,c),d=ee("GET",o,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.listMatches=function(e,t,r,n,i,s,o,a){var u=this;void 0===a&&(a={});var c=new Map;c.set("limit",t),c.set("authoritative",r),c.set("label",n),c.set("min_size",i),c.set("max_size",s),c.set("query",o);var h=this.buildFullUrl(this.basePath,"/v2/match",c),d=ee("GET",a,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,u.timeoutMs,"Request timed out.")})])},e.prototype.deleteNotifications=function(e,t,r){var n=this;void 0===r&&(r={});var i=new Map;i.set("ids",t);var s=this.buildFullUrl(this.basePath,"/v2/notification",i),o=ee("DELETE",r,"");return e&&(o.headers.Authorization="Bearer "+e),Promise.race([fetch(s,o).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listNotifications=function(e,t,r,n){var i=this;void 0===n&&(n={});var s=new Map;s.set("limit",t),s.set("cacheable_cursor",r);var o=this.buildFullUrl(this.basePath,"/v2/notification",s),a=ee("GET",n,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.rpcFunc2=function(e,t,r,n,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'id' is a required parameter but is null or undefined.");var o="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(t))),a=new Map;a.set("payload",r),a.set("http_key",n);var u=this.buildFullUrl(this.basePath,o,a),c=ee("GET",i,"");return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(u,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},e.prototype.rpcFunc=function(e,t,r,n,i){var s=this;if(void 0===i&&(i={}),null==t)throw new Error("'id' is a required parameter but is null or undefined.");if(null==r)throw new Error("'body' is a required parameter but is null or undefined.");var o,a="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(t))),u=new Map;u.set("http_key",n),o=JSON.stringify(r||{});var c=this.buildFullUrl(this.basePath,a,u),h=ee("POST",i,o);return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},e.prototype.sessionLogout=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/session/logout",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.readStorageObjects=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/storage",s),a=ee("POST",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.writeStorageObjects=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/storage",s),a=ee("PUT",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.deleteStorageObjects=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'body' is a required parameter but is null or undefined.");var i,s=new Map;i=JSON.stringify(t||{});var o=this.buildFullUrl(this.basePath,"/v2/storage/delete",s),a=ee("PUT",r,i);return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listStorageObjects=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==t)throw new Error("'collection' is a required parameter but is null or undefined.");var a="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(t))),u=new Map;u.set("user_id",r),u.set("limit",n),u.set("cursor",i);var c=this.buildFullUrl(this.basePath,a,u),h=ee("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.listStorageObjects2=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==t)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==r)throw new Error("'userId' is a required parameter but is null or undefined.");var a="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(t))).replace("{userId}",encodeURIComponent(String(r))),u=new Map;u.set("limit",n),u.set("cursor",i);var c=this.buildFullUrl(this.basePath,a,u),h=ee("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.listTournaments=function(e,t,r,n,i,s,o,a){var u=this;void 0===a&&(a={});var c=new Map;c.set("category_start",t),c.set("category_end",r),c.set("start_time",n),c.set("end_time",i),c.set("limit",s),c.set("cursor",o);var h=this.buildFullUrl(this.basePath,"/v2/tournament",c),d=ee("GET",a,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,u.timeoutMs,"Request timed out.")})])},e.prototype.deleteTournamentRecord=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");var i="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("DELETE",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listTournamentRecords=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");var u="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),c=new Map;c.set("owner_ids",r),c.set("limit",n),c.set("cursor",i),c.set("expiry",s);var h=this.buildFullUrl(this.basePath,u,c),d=ee("GET",o,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.writeTournamentRecord2=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'record' is a required parameter but is null or undefined.");var s,o="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),a=new Map;s=JSON.stringify(r||{});var u=this.buildFullUrl(this.basePath,o,a),c=ee("POST",n,s);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(u,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.writeTournamentRecord=function(e,t,r,n){var i=this;if(void 0===n&&(n={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'record' is a required parameter but is null or undefined.");var s,o="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(t))),a=new Map;s=JSON.stringify(r||{});var u=this.buildFullUrl(this.basePath,o,a),c=ee("PUT",n,s);return e&&(c.headers.Authorization="Bearer "+e),Promise.race([fetch(u,c).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,i.timeoutMs,"Request timed out.")})])},e.prototype.joinTournament=function(e,t,r){var n=this;if(void 0===r&&(r={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");var i="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(t))),s=new Map,o=this.buildFullUrl(this.basePath,i,s),a=ee("POST",r,"");return e&&(a.headers.Authorization="Bearer "+e),Promise.race([fetch(o,a).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,n.timeoutMs,"Request timed out.")})])},e.prototype.listTournamentRecordsAroundOwner=function(e,t,r,n,i,s,o){var a=this;if(void 0===o&&(o={}),null==t)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==r)throw new Error("'ownerId' is a required parameter but is null or undefined.");var u="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(t))).replace("{ownerId}",encodeURIComponent(String(r))),c=new Map;c.set("limit",n),c.set("expiry",i),c.set("cursor",s);var h=this.buildFullUrl(this.basePath,u,c),d=ee("GET",o,"");return e&&(d.headers.Authorization="Bearer "+e),Promise.race([fetch(h,d).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,a.timeoutMs,"Request timed out.")})])},e.prototype.getUsers=function(e,t,r,n,i){var s=this;void 0===i&&(i={});var o=new Map;o.set("ids",t),o.set("usernames",r),o.set("facebook_ids",n);var a=this.buildFullUrl(this.basePath,"/v2/user",o),u=ee("GET",i,"");return e&&(u.headers.Authorization="Bearer "+e),Promise.race([fetch(a,u).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,s.timeoutMs,"Request timed out.")})])},e.prototype.listUserGroups=function(e,t,r,n,i,s){var o=this;if(void 0===s&&(s={}),null==t)throw new Error("'userId' is a required parameter but is null or undefined.");var a="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(t))),u=new Map;u.set("limit",r),u.set("state",n),u.set("cursor",i);var c=this.buildFullUrl(this.basePath,a,u),h=ee("GET",s,"");return e&&(h.headers.Authorization="Bearer "+e),Promise.race([fetch(c,h).then(function(e){if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e}),new Promise(function(e,t){return setTimeout(t,o.timeoutMs,"Request timed out.")})])},e.prototype.buildFullUrl=function(e,t,r){var n,i,s=e+t+"?",o=function(e,t){t instanceof Array?s+=t.reduce(function(t,r){return t+encodeURIComponent(e)+"="+encodeURIComponent(r)+"&"},""):null!=t&&(s+=encodeURIComponent(e)+"="+encodeURIComponent(t)+"&")};try{for(var a=S(r),u=a.next();!u.done;u=a.next()){var c=R(u.value,2);o(c[0],c[1])}}catch(h){n={error:h}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return s},e}(),se=function(){function e(e,t,r){this.created=r,this.token=e,this.refresh_token=t,this.created_at=Math.floor((new Date).getTime()/1e3),this.update(e,t)}return e.prototype.isexpired=function(e){return this.expires_at-e<0},e.prototype.isrefreshexpired=function(e){return this.refresh_expires_at-e<0},e.prototype.update=function(e,t){var r=e.split(".");if(3!=r.length)throw"jwt is not valid.";var n=JSON.parse(V(r[1])),i=Math.floor(parseInt(n.exp));if(t){var s=t.split(".");if(3!=s.length)throw"refresh jwt is not valid.";var o=JSON.parse(V(s[1])),a=Math.floor(parseInt(o.exp));this.refresh_expires_at=a,this.refresh_token=t}this.token=e,this.expires_at=i,this.username=n.usn,this.user_id=n.uid,this.vars=n.vrs},e.restore=function(t,r){return new e(t,r,!1)},e}(),oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ae="undefined"==typeof Uint8Array?[]:new Uint8Array(256),ue=0;ue<oe.length;ue++)ae[oe.charCodeAt(ue)]=ue;var ce=function(e){var t,r=new Uint8Array(e),n=r.length,i="";for(t=0;t<n;t+=3)i+=oe[r[t]>>2],i+=oe[(3&r[t])<<4|r[t+1]>>4],i+=oe[(15&r[t+1])<<2|r[t+2]>>6],i+=oe[63&r[t+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i},he=function(e){var t,r,n,i,s,o=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(o--,"="===e[e.length-2]&&o--);var c=new ArrayBuffer(o),h=new Uint8Array(c);for(t=0;t<a;t+=4)r=ae[e.charCodeAt(t)],n=ae[e.charCodeAt(t+1)],i=ae[e.charCodeAt(t+2)],s=ae[e.charCodeAt(t+3)],h[u++]=r<<2|n>>4,h[u++]=(15&n)<<4|i>>2,h[u++]=(3&i)<<6|63&s;return c},de=function(){function e(){}return Object.defineProperty(e.prototype,"onClose",{get:function(){return this._socket.onclose},set:function(e){this._socket.onclose=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this._socket.onerror},set:function(e){this._socket.onerror=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onMessage",{get:function(){return this._socket.onmessage},set:function(e){e?this._socket.onmessage=function(t){var r=JSON.parse(t.data);r.match_data&&r.match_data.data?r.match_data.data=new Uint8Array(he(r.match_data.data)):r.party_data&&r.party_data.data&&(r.party_data.data=new Uint8Array(he(r.party_data.data))),e(r)}:e=null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onOpen",{get:function(){return this._socket.onopen},set:function(e){this._socket.onopen=e},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(){var e;return(null===(e=this._socket)||void 0===e?void 0:e.readyState)==WebSocket.OPEN},e.prototype.connect=function(e,t,r,n,i){var s="".concat(e).concat(t,":").concat(r,"/ws?lang=en&status=").concat(encodeURIComponent(n.toString()),"&token=").concat(encodeURIComponent(i));this._socket=new WebSocket(s)},e.prototype.close=function(){this._socket.close(),this._socket=void 0},e.prototype.send=function(e){if(e.match_data_send)e.match_data_send.op_code=e.match_data_send.op_code.toString(),(t=e.match_data_send.data)&&t instanceof Uint8Array?e.match_data_send.data=ce(t.buffer):t&&(e.match_data_send.data=B(t));else if(e.party_data_send){var t;e.party_data_send.op_code=e.party_data_send.op_code.toString(),(t=e.party_data_send.data)&&t instanceof Uint8Array?e.party_data_send.data=ce(t.buffer):t&&(e.party_data_send.data=B(t))}this._socket.send(JSON.stringify(e))},e}(),le=function(){function e(t,r,n,i,s,o){void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===s&&(s=new de),void 0===o&&(o=e.DefaultSendTimeoutMs),this.host=t,this.port=r,this.useSSL=n,this.verbose=i,this.adapter=s,this.sendTimeoutMs=o,this.cIds={},this.nextCid=1,this._heartbeatTimeoutMs=e.DefaultHeartbeatTimeoutMs}return e.prototype.generatecid=function(){var e=this.nextCid.toString();return++this.nextCid,e},e.prototype.connect=function(t,r,n){var i=this;if(void 0===r&&(r=!1),void 0===n&&(n=e.DefaultConnectTimeoutMs),this.adapter.isOpen())return Promise.resolve(t);var s=this.useSSL?"wss://":"ws://";return this.adapter.connect(s,this.host,this.port,r,t.token),this.adapter.onClose=function(e){i.ondisconnect(e)},this.adapter.onError=function(e){i.onerror(e)},this.adapter.onMessage=function(e){if(i.verbose&&window&&window.console&&console.log("Response: %o",JSON.stringify(e)),e.cid){var t=i.cIds[e.cid];if(!t)return void(i.verbose&&window&&window.console&&console.error("No promise executor for message: %o",e));delete i.cIds[e.cid],e.error?t.reject(e.error):t.resolve(e)}else e.notifications?e.notifications.notifications.forEach(function(e){e.content=e.content?JSON.parse(e.content):void 0,i.onnotification(e)}):e.match_data?(e.match_data.op_code=parseInt(e.match_data.op_code),i.onmatchdata(e.match_data)):e.match_presence_event?i.onmatchpresence(e.match_presence_event):e.matchmaker_ticket?i.onmatchmakerticket(e.matchmaker_ticket):e.matchmaker_matched?i.onmatchmakermatched(e.matchmaker_matched):e.status_presence_event?i.onstatuspresence(e.status_presence_event):e.stream_presence_event?i.onstreampresence(e.stream_presence_event):e.stream_data?i.onstreamdata(e.stream_data):e.channel_message?(e.channel_message.content=JSON.parse(e.channel_message.content),i.onchannelmessage(e.channel_message)):e.channel_presence_event?i.onchannelpresence(e.channel_presence_event):e.party_data?(e.party_data.op_code=parseInt(e.party_data.op_code),i.onpartydata(e.party_data)):e.party_close?i.onpartyclose(e.party_close):e.party_join_request?i.onpartyjoinrequest(e.party_join_request):e.party_leader?i.onpartyleader(e.party_leader):e.party_matchmaker_ticket?i.onpartymatchmakerticket(e.party_matchmaker_ticket):e.party_presence_event?i.onpartypresence(e.party_presence_event):e.party?i.onparty(e.party):i.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",e)},new Promise(function(e,r){i.adapter.onOpen=function(r){i.verbose&&window&&window.console&&console.log(r),i.pingPong(),e(t)},i.adapter.onError=function(e){r(e),i.adapter.close()},setTimeout(function(){r("The socket timed out when trying to connect.")},n)})},e.prototype.disconnect=function(e){void 0===e&&(e=!0),this.adapter.isOpen()&&this.adapter.close(),e&&this.ondisconnect({})},e.prototype.setHeartbeatTimeoutMs=function(e){this._heartbeatTimeoutMs=e},e.prototype.getHeartbeatTimeoutMs=function(){return this._heartbeatTimeoutMs},e.prototype.ondisconnect=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onerror=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onchannelmessage=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onchannelpresence=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onnotification=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onmatchdata=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onmatchpresence=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onmatchmakerticket=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onmatchmakermatched=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onparty=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onpartyclose=function(e){this.verbose&&window&&window.console&&console.log("Party closed: "+e)},e.prototype.onpartyjoinrequest=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onpartydata=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onpartyleader=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onpartymatchmakerticket=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onpartypresence=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onstatuspresence=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onstreampresence=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onstreamdata=function(e){this.verbose&&window&&window.console&&console.log(e)},e.prototype.onheartbeattimeout=function(){this.verbose&&window&&window.console&&console.log("Heartbeat timeout.")},e.prototype.send=function(t,r){var n=this;void 0===r&&(r=e.DefaultSendTimeoutMs);var i=t;return new Promise(function(e,t){if(n.adapter.isOpen())if(i.match_data_send)n.adapter.send(i),e();else if(i.party_data_send)n.adapter.send(i),e();else{i.channel_message_send?i.channel_message_send.content=JSON.stringify(i.channel_message_send.content):i.channel_message_update&&(i.channel_message_update.content=JSON.stringify(i.channel_message_update.content));var s=n.generatecid();n.cIds[s]={resolve:e,reject:t},setTimeout(function(){t("The socket timed out while waiting for a response.")},r),i.cid=s,n.adapter.send(i)}else t("Socket connection has not been established yet.");if(n.verbose&&window&&window.console){var o=k({},i);o.match_data_send&&o.match_data_send.data?o.match_data_send.data=Q(o.match_data_send.data):o.party_data_send&&o.party_data_send.data&&(o.party_data_send.data=Q(o.party_data_send.data)),console.log("Sent message: %o",JSON.stringify(o))}})},e.prototype.acceptPartyMember=function(e,t){return this.send({party_accept:{party_id:e,presence:t}})},e.prototype.addMatchmaker=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return[4,this.send({matchmaker_add:{min_count:t,max_count:r,query:e,string_properties:n,numeric_properties:i}})];case 1:return[2,s.sent().matchmaker_ticket]}})})},e.prototype.addMatchmakerParty=function(e,t,r,n,i,s){return P(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return[4,this.send({party_matchmaker_add:{party_id:e,min_count:r,max_count:n,query:t,string_properties:i,numeric_properties:s}})];case 1:return[2,o.sent().party_matchmaker_ticket]}})})},e.prototype.closeParty=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.send({party_close:{party_id:e}})];case 1:return[2,t.sent()]}})})},e.prototype.createMatch=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.send({match_create:{name:e}})];case 1:return[2,t.sent().match]}})})},e.prototype.createParty=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.send({party_create:{open:e,max_size:t}})];case 1:return[2,r.sent().party]}})})},e.prototype.followUsers=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.send({status_follow:{user_ids:e}})];case 1:return[2,t.sent().status]}})})},e.prototype.joinChat=function(e,t,r,n){return P(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this.send({channel_join:{target:e,type:t,persistence:r,hidden:n}})];case 1:return[2,i.sent().channel]}})})},e.prototype.joinMatch=function(e,t,r){return P(this,void 0,void 0,function(){var n;return T(this,function(i){switch(i.label){case 0:return n={match_join:{metadata:r}},t?n.match_join.token=t:n.match_join.match_id=e,[4,this.send(n)];case 1:return[2,i.sent().match]}})})},e.prototype.joinParty=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.send({party_join:{party_id:e}})];case 1:return[2,t.sent()]}})})},e.prototype.leaveChat=function(e){return this.send({channel_leave:{channel_id:e}})},e.prototype.leaveMatch=function(e){return this.send({match_leave:{match_id:e}})},e.prototype.leaveParty=function(e){return this.send({party_leave:{party_id:e}})},e.prototype.listPartyJoinRequests=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.send({party_join_request_list:{party_id:e}})];case 1:return[2,t.sent().party_join_request]}})})},e.prototype.promotePartyMember=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.send({party_promote:{party_id:e,presence:t}})];case 1:return[2,r.sent().party_leader]}})})},e.prototype.removeChatMessage=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.send({channel_message_remove:{channel_id:e,message_id:t}})];case 1:return[2,r.sent().channel_message_ack]}})})},e.prototype.removeMatchmaker=function(e){return this.send({matchmaker_remove:{ticket:e}})},e.prototype.removeMatchmakerParty=function(e,t){return this.send({party_matchmaker_remove:{party_id:e,ticket:t}})},e.prototype.removePartyMember=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(){return[2,this.send({party_remove:{party_id:e,presence:t}})]})})},e.prototype.rpc=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this.send({rpc:{id:e,payload:t,http_key:r}})];case 1:return[2,n.sent().rpc]}})})},e.prototype.sendMatchState=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(){return[2,this.send({match_data_send:{match_id:e,op_code:t,data:r,presences:null!=n?n:[],reliable:i}})]})})},e.prototype.sendPartyData=function(e,t,r){return this.send({party_data_send:{party_id:e,op_code:t,data:r}})},e.prototype.unfollowUsers=function(e){return this.send({status_unfollow:{user_ids:e}})},e.prototype.updateChatMessage=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this.send({channel_message_update:{channel_id:e,message_id:t,content:r}})];case 1:return[2,n.sent().channel_message_ack]}})})},e.prototype.updateStatus=function(e){return this.send({status_update:{status:e}})},e.prototype.writeChatMessage=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.send({channel_message_send:{channel_id:e,content:t}})];case 1:return[2,r.sent().channel_message_ack]}})})},e.prototype.pingPong=function(){return P(this,void 0,void 0,function(){var e=this;return T(this,function(t){switch(t.label){case 0:if(!this.adapter.isOpen())return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.send({ping:{}},this._heartbeatTimeoutMs)];case 2:return t.sent(),[3,4];case 3:return t.sent(),this.adapter.isOpen()&&(window&&window.console&&console.error("Server unreachable from heartbeat."),this.onheartbeattimeout(),this.adapter.close()),[2];case 4:return setTimeout(function(){return e.pingPong()},this._heartbeatTimeoutMs),[2]}})})},e.DefaultHeartbeatTimeoutMs=1e4,e.DefaultSendTimeoutMs=1e4,e.DefaultConnectTimeoutMs=3e4,e}(),fe="127.0.0.1",pe="7350",me="defaultkey",ve=7e3,be=3e5,we=function(){function e(e,t,r,n,i,s){void 0===e&&(e=me),void 0===t&&(t=fe),void 0===r&&(r=pe),void 0===n&&(n=!1),void 0===i&&(i=ve),void 0===s&&(s=!0),this.serverkey=e,this.host=t,this.port=r,this.useSSL=n,this.timeout=i,this.autoRefreshSession=s,this.expiredTimespanMs=be;var o="".concat(n?"https://":"http://").concat(t,":").concat(r);this.apiClient=new ie(e,o,i)}return e.prototype.addGroupUsers=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.addGroupUsers(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.addFriends=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.addFriends(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.authenticateApple=function(e,t,r,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),P(this,void 0,void 0,function(){var s;return T(this,function(){return s={token:e,vars:n},[2,this.apiClient.authenticateApple(this.serverkey,"",s,t,r,i).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})]})})},e.prototype.authenticateCustom=function(e,t,r,n,i){void 0===n&&(n={}),void 0===i&&(i={});var s={id:e,vars:n};return this.apiClient.authenticateCustom(this.serverkey,"",s,t,r,i).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})},e.prototype.authenticateDevice=function(e,t,r,n){var i={id:e,vars:n};return this.apiClient.authenticateDevice(this.serverkey,"",i,t,r).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})},e.prototype.authenticateEmail=function(e,t,r,n,i){var s={email:e,password:t,vars:i};return this.apiClient.authenticateEmail(this.serverkey,"",s,r,n).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})},e.prototype.authenticateFacebookInstantGame=function(e,t,r,n,i){void 0===i&&(i={});var s={signed_player_info:e,vars:n};return this.apiClient.authenticateFacebookInstantGame(this.serverkey,"",{signed_player_info:s.signed_player_info,vars:s.vars},t,r,i).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})},e.prototype.authenticateFacebook=function(e,t,r,n,i,s){void 0===s&&(s={});var o={token:e,vars:i};return this.apiClient.authenticateFacebook(this.serverkey,"",o,t,r,n,s).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})},e.prototype.authenticateGoogle=function(e,t,r,n,i){return void 0===i&&(i={}),P(this,void 0,void 0,function(){var s,o;return T(this,function(a){switch(a.label){case 0:return s={token:e,vars:n},[4,this.apiClient.authenticateGoogle(this.serverkey,"",s,t,r,i)];case 1:return o=a.sent(),[2,new se(o.token||"",o.refresh_token||"",o.created||!1)]}})})},e.prototype.authenticateGameCenter=function(e,t,r,n,i,s,o,a,u,c){return void 0===c&&(c={}),P(this,void 0,void 0,function(){var h,d;return T(this,function(l){switch(l.label){case 0:return h={bundle_id:e,player_id:t,public_key_url:r,salt:n,signature:i,timestamp_seconds:s,vars:u},[4,this.apiClient.authenticateGameCenter(this.serverkey,"",h,a,o,c)];case 1:return d=l.sent(),[2,new se(d.token||"",d.refresh_token||"",d.created||!1)]}})})},e.prototype.authenticateSteam=function(e,t,r,n,i){return P(this,void 0,void 0,function(){var s;return T(this,function(){return s={token:e,vars:i,sync:n},[2,this.apiClient.authenticateSteam(this.serverkey,"",s,t,r).then(function(e){return new se(e.token||"",e.refresh_token||"",e.created||!1)})]})})},e.prototype.banGroupUsers=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.banGroupUsers(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.blockFriends=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.blockFriends(e.token,t,r).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.createGroup=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.createGroup(e.token,t).then(function(e){return Promise.resolve({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count?Number(e.max_count):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})})]}})})},e.prototype.createSocket=function(e,t,r,n){return void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===r&&(r=new de),void 0===n&&(n=le.DefaultSendTimeoutMs),new le(this.host,this.port,e,t,r,n)},e.prototype.deleteAccount=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this.apiClient.deleteAccount(e.token).then(function(e){return void 0!==e})]}})})},e.prototype.deleteFriends=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.deleteFriends(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.deleteGroup=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.deleteGroup(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.deleteNotifications=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.deleteNotifications(e.token,t).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.deleteStorageObjects=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.deleteStorageObjects(e.token,t).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.deleteTournamentRecord=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(){return[2,this.apiClient.deleteTournamentRecord(e.token,t)]})})},e.prototype.demoteGroupUsers=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.demoteGroupUsers(e.token,t,r).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.emitEvent=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.event(e.token,t).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.getAccount=function(e){return P(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2,this.apiClient.getAccount(e.token)]}})})},e.prototype.getSubscription=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.getSubscription(e.token,t)]}})})},e.prototype.importFacebookFriends=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.importFacebookFriends(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.importSteamFriends=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.importSteamFriends(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.getUsers=function(e,t,r,n){return P(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,this.apiClient.getUsers(e.token,t,r,n).then(function(e){var t={users:[]};return null==e.users?Promise.resolve(t):(e.users.forEach(function(e){t.users.push({avatar_url:e.avatar_url,create_time:e.create_time,display_name:e.display_name,edge_count:e.edge_count?Number(e.edge_count):0,facebook_id:e.facebook_id,gamecenter_id:e.gamecenter_id,google_id:e.google_id,id:e.id,lang_tag:e.lang_tag,location:e.location,online:e.online,steam_id:e.steam_id,timezone:e.timezone,update_time:e.update_time,username:e.username,metadata:e.metadata?JSON.parse(e.metadata):void 0})}),Promise.resolve(t))})]}})})},e.prototype.joinGroup=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.joinGroup(e.token,t,{}).then(function(e){return void 0!==e})]}})})},e.prototype.joinTournament=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.joinTournament(e.token,t,{}).then(function(e){return void 0!==e})]}})})},e.prototype.kickGroupUsers=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.kickGroupUsers(e.token,t,r).then(function(e){return Promise.resolve(null!=e)})]}})})},e.prototype.leaveGroup=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.leaveGroup(e.token,t,{}).then(function(e){return void 0!==e})]}})})},e.prototype.listChannelMessages=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2,this.apiClient.listChannelMessages(e.token,t,r,n,i).then(function(e){var t={messages:[],next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,cacheable_cursor:e.cacheable_cursor};return null==e.messages?Promise.resolve(t):(e.messages.forEach(function(e){t.messages.push({channel_id:e.channel_id,code:e.code?Number(e.code):0,create_time:e.create_time,message_id:e.message_id,persistent:e.persistent,sender_id:e.sender_id,update_time:e.update_time,username:e.username,content:e.content?JSON.parse(e.content):void 0,group_id:e.group_id,room_name:e.room_name,user_id_one:e.user_id_one,user_id_two:e.user_id_two})}),Promise.resolve(t))})]}})})},e.prototype.listGroupUsers=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2,this.apiClient.listGroupUsers(e.token,t,n,r,i).then(function(e){var t={group_users:[],cursor:e.cursor};return null==e.group_users?Promise.resolve(t):(e.group_users.forEach(function(e){t.group_users.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0},state:e.state?Number(e.state):0})}),Promise.resolve(t))})]}})})},e.prototype.listUserGroups=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2,this.apiClient.listUserGroups(e.token,t,r,n,i).then(function(e){var t={user_groups:[],cursor:e.cursor};return null==e.user_groups?Promise.resolve(t):(e.user_groups.forEach(function(e){t.user_groups.push({group:{avatar_url:e.group.avatar_url,create_time:e.group.create_time,creator_id:e.group.creator_id,description:e.group.description,edge_count:e.group.edge_count?Number(e.group.edge_count):0,id:e.group.id,lang_tag:e.group.lang_tag,max_count:e.group.max_count,metadata:e.group.metadata?JSON.parse(e.group.metadata):void 0,name:e.group.name,open:e.group.open,update_time:e.group.update_time},state:e.state?Number(e.state):0})}),Promise.resolve(t))})]}})})},e.prototype.listGroups=function(e,t,r,n){return P(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,this.apiClient.listGroups(e.token,t,r,n).then(function(e){var t={groups:[]};return null==e.groups?Promise.resolve(t):(t.cursor=e.cursor,e.groups.forEach(function(e){t.groups.push({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})}),Promise.resolve(t))})]}})})},e.prototype.linkApple=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkApple(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkCustom=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkCustom(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkDevice=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkDevice(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkEmail=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkEmail(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkFacebook=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkFacebook(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkFacebookInstantGame=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkFacebookInstantGame(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkGoogle=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkGoogle(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkGameCenter=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkGameCenter(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.linkSteam=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.linkSteam(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.listFriends=function(e,t,r,n){return P(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,this.apiClient.listFriends(e.token,r,t,n).then(function(e){var t={friends:[],cursor:e.cursor};return null==e.friends?Promise.resolve(t):(e.friends.forEach(function(e){t.friends.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0,facebook_instant_game_id:e.user.facebook_instant_game_id},state:e.state})}),Promise.resolve(t))})]}})})},e.prototype.listFriendsOfFriends=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.listFriendsOfFriends(e.token,t,r).then(function(e){var t={friends_of_friends:[],cursor:e.cursor};return null==e.friends_of_friends?Promise.resolve(t):(e.friends_of_friends.forEach(function(e){t.friends_of_friends.push({referrer:e.referrer,user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0,facebook_instant_game_id:e.user.facebook_instant_game_id}})}),Promise.resolve(t))})]}})})},e.prototype.listLeaderboardRecords=function(e,t,r,n,i,s){return P(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2,this.apiClient.listLeaderboardRecords(e.token,t,r,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,rank_count:e.rank_count?Number(e.rank_count):0,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)})]}})})},e.prototype.listLeaderboardRecordsAroundOwner=function(e,t,r,n,i,s){return P(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2,this.apiClient.listLeaderboardRecordsAroundOwner(e.token,t,r,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,rank_count:e.rank_count?Number(e.rank_count):0,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)})]}})})},e.prototype.listMatches=function(e,t,r,n,i,s,o){return P(this,void 0,void 0,function(){return T(this,function(a){switch(a.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2,this.apiClient.listMatches(e.token,t,r,n,i,s,o)]}})})},e.prototype.listNotifications=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.listNotifications(e.token,t,r).then(function(e){var t={cacheable_cursor:e.cacheable_cursor,notifications:[]};return null==e.notifications?Promise.resolve(t):(e.notifications.forEach(function(e){t.notifications.push({code:e.code?Number(e.code):0,create_time:e.create_time,id:e.id,persistent:e.persistent,sender_id:e.sender_id,subject:e.subject,content:e.content?JSON.parse(e.content):void 0})}),Promise.resolve(t))})]}})})},e.prototype.listStorageObjects=function(e,t,r,n,i){return P(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2,this.apiClient.listStorageObjects(e.token,t,r,n,i).then(function(e){var t={objects:[],cursor:e.cursor};return null==e.objects?Promise.resolve(t):(e.objects.forEach(function(e){t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})}),Promise.resolve(t))})]}})})},e.prototype.listTournaments=function(e,t,r,n,i,s,o){return P(this,void 0,void 0,function(){return T(this,function(a){switch(a.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2,this.apiClient.listTournaments(e.token,t,r,n,i,s,o).then(function(e){var t={cursor:e.cursor,tournaments:[]};return null!=e.tournaments&&e.tournaments.forEach(function(e){t.tournaments.push({id:e.id,title:e.title,description:e.description,duration:e.duration?Number(e.duration):0,category:e.category?Number(e.category):0,sort_order:e.sort_order?Number(e.sort_order):0,size:e.size?Number(e.size):0,max_size:e.max_size?Number(e.max_size):0,max_num_score:e.max_num_score?Number(e.max_num_score):0,can_enter:e.can_enter,end_active:e.end_active?Number(e.end_active):0,next_reset:e.next_reset?Number(e.next_reset):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,create_time:e.create_time,start_time:e.start_time,end_time:e.end_time,start_active:e.start_active,authoritative:e.authoritative})}),Promise.resolve(t)})]}})})},e.prototype.listSubscriptions=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.listSubscriptions(e.token,{cursor:t,limit:r})]}})})},e.prototype.listTournamentRecords=function(e,t,r,n,i,s){return P(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2,this.apiClient.listTournamentRecords(e.token,t,r,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)})]}})})},e.prototype.listTournamentRecordsAroundOwner=function(e,t,r,n,i,s){return P(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:o.sent(),o.label=2;case 2:return[2,this.apiClient.listTournamentRecordsAroundOwner(e.token,t,r,n,i,s).then(function(e){var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach(function(e){t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),null!=e.records&&e.records.forEach(function(e){t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})}),Promise.resolve(t)})]}})})},e.prototype.promoteGroupUsers=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.promoteGroupUsers(e.token,t,r)]}})})},e.prototype.readStorageObjects=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.readStorageObjects(e.token,t).then(function(e){var t={objects:[]};return null==e.objects?Promise.resolve(t):(e.objects.forEach(function(e){t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})}),Promise.resolve(t))})]}})})},e.prototype.rpc=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.rpcFunc(e.token,t,JSON.stringify(r)).then(function(e){return Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})})]}})})},e.prototype.rpcHttpKey=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(){return[2,this.apiClient.rpcFunc2("",t,r&&JSON.stringify(r)||"",e).then(function(e){return Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})}).catch(function(e){throw e})]})})},e.prototype.sessionLogout=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.sessionLogout(e.token,{refresh_token:r,token:t}).then(function(e){return void 0!==e})]}})})},e.prototype.sessionRefresh=function(e,t){return void 0===t&&(t={}),P(this,void 0,void 0,function(){var r;return T(this,function(n){switch(n.label){case 0:return e?(e.created&&e.expires_at-e.created_at<70&&console.warn("Session lifetime too short, please set '--session.token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),e.created&&e.refresh_expires_at-e.created_at<3700&&console.warn("Session refresh lifetime too short, please set '--session.refresh_token_expiry_sec' option. See the documentation for more info: https://heroiclabs.com/docs/nakama/getting-started/configuration/#session"),[4,this.apiClient.sessionRefresh(this.serverkey,"",{token:e.refresh_token,vars:t})]):(console.error("Cannot refresh a null session."),[2,e]);case 1:return r=n.sent(),e.update(r.token,r.refresh_token),[2,e]}})})},e.prototype.unlinkApple=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkApple(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkCustom=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkCustom(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkDevice=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkDevice(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkEmail=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkEmail(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkFacebook=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkFacebook(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkFacebookInstantGame=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkFacebookInstantGame(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkGoogle=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkGoogle(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkGameCenter=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkGameCenter(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.unlinkSteam=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.unlinkSteam(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.updateAccount=function(e,t){return P(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2,this.apiClient.updateAccount(e.token,t).then(function(e){return void 0!==e})]}})})},e.prototype.updateGroup=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.updateGroup(e.token,t,r).then(function(e){return void 0!==e})]}})})},e.prototype.validatePurchaseApple=function(e,t,r){return void 0===r&&(r=!0),P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.validatePurchaseApple(e.token,{receipt:t,persist:r})]}})})},e.prototype.validatePurchaseFacebookInstant=function(e,t,r){return void 0===r&&(r=!0),P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.validatePurchaseFacebookInstant(e.token,{signed_request:t,persist:r})]}})})},e.prototype.validatePurchaseGoogle=function(e,t,r){return void 0===r&&(r=!0),P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.validatePurchaseGoogle(e.token,{purchase:t,persist:r})]}})})},e.prototype.validatePurchaseHuawei=function(e,t,r,n){return void 0===n&&(n=!0),P(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,this.apiClient.validatePurchaseHuawei(e.token,{purchase:t,signature:r,persist:n})]}})})},e.prototype.validateSubscriptionApple=function(e,t,r){return void 0===r&&(r=!0),P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.validateSubscriptionApple(e.token,{receipt:t,persist:r})]}})})},e.prototype.validateSubscriptionGoogle=function(e,t,r){return void 0===r&&(r=!0),P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.validateSubscriptionGoogle(e.token,{receipt:t,persist:r})]}})})},e.prototype.writeLeaderboardRecord=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2,this.apiClient.writeLeaderboardRecord(e.token,t,{metadata:r.metadata?JSON.stringify(r.metadata):void 0,score:r.score,subscore:r.subscore}).then(function(e){return Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})})]}})})},e.prototype.writeStorageObjects=function(e,t){return P(this,void 0,void 0,function(){var r;return T(this,function(n){switch(n.label){case 0:return this.autoRefreshSession&&e.refresh_token&&e.isexpired((Date.now()+this.expiredTimespanMs)/1e3)?[4,this.sessionRefresh(e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return r={objects:[]},t.forEach(function(e){r.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read,permission_write:e.permission_write,value:JSON.stringify(e.value),version:e.version})}),[2,this.apiClient.writeStorageObjects(e.token,r)]}})})},e.prototype.writeTournamentRecord=function(e,t,r){return P(this,void 0,void 0,function(){return T(this,function(){return[2,this.apiClient.writeTournamentRecord(e.token,t,{metadata:r.metadata?JSON.stringify(r.metadata):void 0,score:r.score,subscore:r.subscore}).then(function(e){return Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})})]})})},e}();e.Client=we,e.DefaultSocket=le,e.Session=se,e.WebSocketAdapterText=de});